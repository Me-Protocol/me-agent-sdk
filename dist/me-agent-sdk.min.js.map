{"version":3,"file":"me-agent-sdk.min.js","sources":["../node_modules/tslib/tslib.es6.js","../src/constants/categories.ts","../src/state/manager.ts","../src/api/client.ts","../src/ui/icons.ts","../src/ui/button.ts","../src/ui/components/message.ts","../src/ui/components/quick-actions.ts","../src/ui/components/card-list.ts","../src/ui/components/offer-preview.ts","../src/ui/components/redemption/otp-view.ts","../src/ui/components/redemption/reward-selection-view.ts","../src/ui/components/redemption/error-view.ts","../src/ui/components/redemption/confirmation-view.ts","../src/ui/components/redemption/onboarding-view.ts","../src/ui/detail-panel.ts","../src/ui/chat.ts","../src/ui/styles.ts","../src/auth/magic.ts","../src/redeem/manager.ts","../src/config/env.ts","../src/sdk.ts","../src/index.ts"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n    ownKeys = Object.getOwnPropertyNames || function (o) {\r\n        var ar = [];\r\n        for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n        return ar;\r\n    };\r\n    return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    var r, s = 0;\r\n    function next() {\r\n        while (r = env.stack.pop()) {\r\n            try {\r\n                if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n                if (r.dispose) {\r\n                    var result = r.dispose.call(r.value);\r\n                    if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n                }\r\n                else s |= 1;\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n        return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n            return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n        });\r\n    }\r\n    return path;\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __esDecorate: __esDecorate,\r\n    __runInitializers: __runInitializers,\r\n    __propKey: __propKey,\r\n    __setFunctionName: __setFunctionName,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n    __rewriteRelativeImportExtension: __rewriteRelativeImportExtension,\r\n};\r\n","/**\n * Preset categories with images and icons\n * Maps category names to their visual assets\n */\nexport interface CategoryPreset {\n  id: number;\n  image: string;\n  title: string;\n  icon: string;\n  description: string;\n  // Map to backend category names\n  categoryNames: string[];\n}\n\nexport const PRESET_CATEGORIES: CategoryPreset[] = [\n  {\n    id: 1,\n    image:\n      \"https://res.cloudinary.com/dlwsf8xgj/image/upload/v1712589166/cate-1_qizn7y.png\",\n    title: \"Must Haves\",\n    icon: \"award\",\n    description: \"Essential products you shouldn't miss\",\n    categoryNames: [\"Must Haves\", \"Essentials\"],\n  },\n  {\n    id: 2,\n    image:\n      \"https://res.cloudinary.com/dlwsf8xgj/image/upload/v1712589166/cate7_tbhw5u.png\",\n    title: \"Cosmetics\",\n    icon: \"shirt\",\n    description: \"Beauty and personal care products\",\n    categoryNames: [\"Cosmetics\", \"Beauty\"],\n  },\n  {\n    id: 3,\n    image:\n      \"https://res.cloudinary.com/dlwsf8xgj/image/upload/v1712589167/cate2_gtjck8.png\",\n    title: \"Travel &\\nExperiences\",\n    icon: \"heartPulse\",\n    description: \"Destinations and unforgettable moments\",\n    categoryNames: [\"Travel\", \"Experiences\", \"Travel & Experiences\"],\n  },\n  {\n    id: 6,\n    image:\n      \"https://res.cloudinary.com/dlwsf8xgj/image/upload/v1712589167/cate-4_uxqxqx.png\",\n    title: \"Sneakers\",\n    icon: \"sofa\",\n    description: \"Stylish footwear for all occasions\",\n    categoryNames: [\"Sneakers\", \"Shoes\", \"Footwear\"],\n  },\n  {\n    id: 7,\n    image:\n      \"https://res.cloudinary.com/dlwsf8xgj/image/upload/v1712589167/cate-5_zxqxqx.png\",\n    title: \"Food &\\nBeverages\",\n    icon: \"tag\",\n    description: \"Culinary delights and refreshments\",\n    categoryNames: [\n      \"Food\",\n      \"Beverages\",\n      \"Food & Beverages\",\n      \"Food and beverages\",\n    ],\n  },\n  {\n    id: 8,\n    image:\n      \"https://res.cloudinary.com/dlwsf8xgj/image/upload/v1712589168/cate-3_sports.png\",\n    title: \"Deals &\\nSports\",\n    icon: \"layoutGrid\",\n    description: \"Sporting goods and special offers\",\n    categoryNames: [\"Sports\", \"Sport deals\", \"Deals\"],\n  },\n  {\n    id: 5,\n    image:\n      \"https://res.cloudinary.com/dlwsf8xgj/image/upload/v1712589167/cate-6_pfxfbq.png\",\n    title: \"Gadgets &\\nElectronics\",\n    icon: \"laptop\",\n    description: \"Tech products and accessories\",\n    categoryNames: [\"Electronics\", \"Gadgets\", \"Tech\"],\n  },\n  {\n    id: 4,\n    image:\n      \"https://res.cloudinary.com/dlwsf8xgj/image/upload/v1712589168/cate-8_s6yf5z.png\",\n    title: \"Art &\\nCollectibles\",\n    icon: \"bookOpen\",\n    description: \"Unique items for collectors\",\n    categoryNames: [\"Art\", \"Collectibles\", \"Art & Collectibles\"],\n  },\n];\n\n/**\n * Get preset category by category name from backend\n */\nexport function getCategoryPreset(\n  categoryName: string\n): CategoryPreset | undefined {\n  return PRESET_CATEGORIES.find((preset) =>\n    preset.categoryNames.some(\n      (name) => name.toLowerCase() === categoryName.toLowerCase()\n    )\n  );\n}\n\n/**\n * Merge backend categories with presets\n */\nexport function mergeCategoriesWithPresets(\n  backendCategories: Array<{\n    categoryId: string;\n    categoryName: string;\n    brandCount: number;\n  }>\n): Array<{\n  categoryId: string;\n  categoryName: string;\n  brandCount: number;\n  image?: string;\n  title?: string;\n  icon?: string;\n  description?: string;\n}> {\n  return backendCategories.map((category) => {\n    const preset = getCategoryPreset(category.categoryName);\n    if (preset) {\n      return {\n        ...category,\n        image: preset.image,\n        title: preset.title,\n        icon: preset.icon,\n        description: preset.description,\n      };\n    }\n    return category;\n  });\n}\n","import { ChatState, Message } from '../types';\n\n/**\n * State Manager - Handles chat state management\n */\nexport class StateManager {\n  private state: ChatState;\n  private listeners: Set<(state: ChatState) => void>;\n\n  constructor() {\n    this.state = {\n      isOpen: false,\n      messages: [],\n      sessionId: null,\n      isLoading: false,\n    };\n    this.listeners = new Set();\n  }\n\n  /**\n   * Get current state\n   */\n  getState(): ChatState {\n    return { ...this.state };\n  }\n\n  /**\n   * Update state and notify listeners\n   */\n  setState(updates: Partial<ChatState>): void {\n    this.state = { ...this.state, ...updates };\n    this.notifyListeners();\n  }\n\n  /**\n   * Subscribe to state changes\n   */\n  subscribe(listener: (state: ChatState) => void): () => void {\n    this.listeners.add(listener);\n    // Return unsubscribe function\n    return () => {\n      this.listeners.delete(listener);\n    };\n  }\n\n  /**\n   * Notify all listeners of state change\n   */\n  private notifyListeners(): void {\n    this.listeners.forEach((listener) => listener(this.state));\n  }\n\n  /**\n   * Add a message to the chat\n   */\n  addMessage(message: Message): void {\n    this.setState({\n      messages: [...this.state.messages, message],\n    });\n  }\n\n  /**\n   * Update the last message (for streaming)\n   */\n  updateLastMessage(content: string): void {\n    const messages = [...this.state.messages];\n    if (messages.length > 0) {\n      messages[messages.length - 1] = {\n        ...messages[messages.length - 1],\n        content,\n      };\n      this.setState({ messages });\n    }\n  }\n\n  /**\n   * Set session ID\n   */\n  setSessionId(sessionId: string): void {\n    this.setState({ sessionId });\n  }\n\n  /**\n   * Toggle chat open/closed\n   */\n  toggleChat(): void {\n    this.setState({ isOpen: !this.state.isOpen });\n  }\n\n  /**\n   * Set loading state\n   */\n  setLoading(isLoading: boolean): void {\n    this.setState({ isLoading });\n  }\n\n  /**\n   * Clear all messages\n   */\n  clearMessages(): void {\n    this.setState({ messages: [] });\n  }\n}\n\n","import {\n  MeAgentConfig,\n  SessionResponse,\n  SendMessagePayload,\n  OfferDetail,\n  MELoginResponse,\n  SwapAmountPayload,\n  SwapAmountResponse,\n} from \"../types\";\nimport { EnvConfig } from \"../config/env\";\n\n/**\n * API Client - Handles communication with backend\n */\nexport class APIClient {\n  private config: MeAgentConfig;\n  private env: EnvConfig;\n  private userId: string;\n\n  constructor(config: MeAgentConfig, env: EnvConfig) {\n    this.config = config;\n    this.env = env;\n    this.userId = config.userId || this.generateUUID();\n  }\n\n  /**\n   * Get user email from config\n   */\n  getUserEmail(): string | undefined {\n    return this.config.emailAddress;\n  }\n\n  /**\n   * Generate a UUID v4\n   */\n  private generateUUID(): string {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\n      const r = (Math.random() * 16) | 0;\n      const v = c === \"x\" ? r : (r & 0x3) | 0x8;\n      return v.toString(16);\n    });\n  }\n\n  /**\n   * Create a new session\n   */\n  async createSession(): Promise<string> {\n    try {\n      const response = await fetch(\n        `${this.env.AGENT_BASE_URL}/apps/consumer/users/${this.userId}/sessions`,\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n\n      if (!response.ok) {\n        throw new Error(`Failed to create session: ${response.statusText}`);\n      }\n\n      const data: SessionResponse = await response.json();\n      return data.id;\n    } catch (error) {\n      console.error(\"Error creating session:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Send a message and handle streaming response\n   */\n  async sendMessage(\n    sessionId: string,\n    message: string,\n    onChunk: (chunk: string, rawData?: any) => void,\n    onComplete: () => void,\n    onError: (error: Error) => void\n  ): Promise<void> {\n    try {\n      const payload: SendMessagePayload = {\n        appName: \"consumer\",\n        userId: this.userId,\n        sessionId: sessionId,\n        newMessage: {\n          parts: [{ text: message }],\n          role: \"user\",\n        },\n        streaming: true,\n      };\n\n      const headers: Record<string, string> = {\n        \"Content-Type\": \"application/json\",\n      };\n\n      // Add email header if provided\n      if (this.config.emailAddress) {\n        headers[\"x-user-email\"] = this.config.emailAddress;\n      }\n\n      const response = await fetch(`${this.env.AGENT_BASE_URL}/run_sse`, {\n        method: \"POST\",\n        headers,\n        body: JSON.stringify(payload),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Failed to send message: ${response.statusText}`);\n      }\n\n      // Handle SSE streaming response\n      const reader = response.body?.getReader();\n      const decoder = new TextDecoder();\n\n      if (!reader) {\n        throw new Error(\"Response body is not readable\");\n      }\n\n      let buffer = \"\";\n\n      while (true) {\n        const { done, value } = await reader.read();\n\n        if (done) {\n          onComplete();\n          break;\n        }\n\n        buffer += decoder.decode(value, { stream: true });\n        const lines = buffer.split(\"\\n\");\n        buffer = lines.pop() || \"\";\n\n        for (const line of lines) {\n          if (line.startsWith(\"data: \")) {\n            const data = line.slice(6).trim();\n            if (data && data !== \"[DONE]\") {\n              try {\n                const parsed = JSON.parse(data);\n\n                // Extract text from content.parts[0].text\n                if (parsed.content?.parts?.[0]?.text) {\n                  const text = parsed.content.parts[0].text;\n                  // If partial=false, this is the final complete message\n                  // We should replace, not append\n                  onChunk(text, parsed);\n                } else if (parsed.content?.parts?.[0]?.functionCall) {\n                  // Function call - pass along but no text chunk\n                  onChunk(\"\", parsed);\n                } else if (parsed.content?.parts?.[0]?.functionResponse) {\n                  // Function response - pass along but no text chunk\n                  onChunk(\"\", parsed);\n                } else if (parsed.chunk) {\n                  onChunk(parsed.chunk, parsed);\n                } else if (parsed.text) {\n                  onChunk(parsed.text, parsed);\n                }\n              } catch (e) {\n                // If not JSON, treat as plain text chunk\n                onChunk(data);\n              }\n            }\n          }\n        }\n      }\n    } catch (error) {\n      console.error(\"Error sending message:\", error);\n      onError(error as Error);\n    }\n  }\n\n  /**\n   * Fetch offer details\n   */\n  async fetchOfferDetails(\n    offerCode: string,\n    sessionId: string\n  ): Promise<OfferDetail> {\n    try {\n      const response = await fetch(\n        `${this.env.API_V1_URL}store/offer/${offerCode}?sessionId=${sessionId}`,\n        {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n\n      if (!response.ok) {\n        throw new Error(\n          `Failed to fetch offer details: ${response.statusText}`\n        );\n      }\n\n      const result = await response.json();\n      return result.data;\n    } catch (error) {\n      console.error(\"Error fetching offer details:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Fetch user reward balances\n   */\n  async fetchRewardBalances(\n    walletAddress: string,\n    token: string\n  ): Promise<any[]> {\n    try {\n      const response = await fetch(\n        `${this.env.API_URL}reward/sdk/balances?walletAddress=${walletAddress}`,\n        {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"x-access-token\": token,\n          },\n        }\n      );\n\n      if (!response.ok) {\n        throw new Error(\n          `Failed to fetch reward balances: ${response.statusText}`\n        );\n      }\n\n      const result = await response.json();\n      return result.data || [];\n    } catch (error) {\n      console.error(\"Error fetching reward balances:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Fetch swap amount needed for redemption\n   */\n  async fetchSwapAmount(\n    payload: SwapAmountPayload,\n    token: string\n  ): Promise<SwapAmountResponse> {\n    try {\n      const response = await fetch(\n        `${this.env.API_URL}reward/sdk/swap-amount`,\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"x-access-token\": token,\n          },\n          body: JSON.stringify(payload),\n        }\n      );\n\n      if (!response.ok) {\n        throw new Error(`Failed to fetch swap amount: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n      return result.data;\n    } catch (error) {\n      console.error(\"Error fetching swap amount:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Login to ME Protocol (creates account if new user)\n   */\n  async meProtocolLogin(\n    email: string,\n    walletAddress: string\n  ): Promise<MELoginResponse> {\n    try {\n      const response = await fetch(`${this.env.API_URL}auth/sdk/login`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          walletAddress,\n          email,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Failed to login: ${response.statusText}`);\n      }\n\n      const data: MELoginResponse = await response.json();\n      return data;\n    } catch (error) {\n      console.error(\"Error in ME Protocol login:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Fetch brands by category ID with purchase earning methods\n   */\n  async fetchBrandsByCategoryId(categoryId: string): Promise<any[]> {\n    try {\n      const response = await fetch(\n        `${this.env.API_URL}brands/earning-methods/purchase/categories/${categoryId}/brands`,\n        {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n\n      if (!response.ok) {\n        throw new Error(\n          `Failed to fetch brands by category: ${response.statusText}`\n        );\n      }\n\n      const result = await response.json();\n      return result.data || [];\n    } catch (error) {\n      console.error(\"Error fetching brands by category:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Fetch offers by brand ID\n   */\n  async fetchOffersByBrandId(brandId: string, token?: string): Promise<any[]> {\n    try {\n      const headers: Record<string, string> = {\n        \"Content-Type\": \"application/json\",\n      };\n\n      if (token) {\n        headers[\"authorization\"] = `Bearer ${token}`;\n      }\n\n      const response = await fetch(\n        `${this.env.API_V1_URL}store/offer?page=1&limit=50&brandId=${brandId}`,\n        {\n          method: \"GET\",\n          headers,\n        }\n      );\n\n      if (!response.ok) {\n        throw new Error(`Failed to fetch offers: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n      return result.data?.offers || [];\n    } catch (error) {\n      console.error(\"Error fetching offers by brand:\", error);\n      throw error;\n    }\n  }\n}\n","/**\n * SVG Icons for ME Agent SDK\n * Each icon function accepts optional width, height, and color parameters\n */\n\ninterface IconOptions {\n  width?: string | number;\n  height?: string | number;\n  color?: string;\n  className?: string;\n}\n\n/**\n * Main ME Agent Bot Icon (for the chat button)\n */\nexport function getBotIcon(options: IconOptions = {}): string {\n  const { width = 37, height = 40, color = \"white\", className = \"\" } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 37 40\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n      <path d=\"M23.4571 18.3143V21.1714M11.8857 18.3143V21.1714M13.3321 29.7429C13.3321 29.7429 14.7786 31.1714 17.6714 31.1714C20.5643 31.1714 22.0107 29.7429 22.0107 29.7429M16.225 18.3143V25.4572H17.6714\" stroke=\"${color}\" stroke-width=\"2.4\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n      <path d=\"M33.475 18.4767C33.9723 18.4767 34.4492 18.2791 34.8008 17.9275C35.1525 17.5759 35.35 17.099 35.35 16.6017V12.8517C35.35 12.3544 35.1525 11.8775 34.8008 11.5259C34.4492 11.1742 33.9723 10.9767 33.475 10.9767H3.475C2.97772 10.9767 2.50081 11.1742 2.14918 11.5259C1.79754 11.8775 1.6 12.3544 1.6 12.8517V16.6017C1.6 17.099 1.79754 17.5759 2.14918 17.9275C2.50081 18.2791 2.97772 18.4767 3.475 18.4767\" stroke=\"${color}\" stroke-width=\"3.2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n      <path d=\"M10.0308 10.9758C8.7876 10.9758 7.59532 10.482 6.71624 9.6029C5.83716 8.72382 5.3433 7.53153 5.3433 6.28833C5.3433 5.04513 5.83716 3.85284 6.71624 2.97377C7.59532 2.09469 8.7876 1.60083 10.0308 1.60083C11.8396 1.56932 13.6121 2.44694 15.1172 4.11926C16.6223 5.79157 17.7901 8.18096 18.4683 10.9758C19.1465 8.18096 20.3143 5.79157 21.8194 4.11926C23.3245 2.44694 25.097 1.56932 26.9058 1.60083C28.149 1.60083 29.3413 2.09469 30.2204 2.97377C31.0994 3.85284 31.5933 5.04513 31.5933 6.28833C31.5933 7.53153 31.0994 8.72382 30.2204 9.6029C29.3413 10.482 28.149 10.9758 26.9058 10.9758\" stroke=\"${color}\" stroke-width=\"3.2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n      <path d=\"M33.7429 18.3143C33.7429 18.3143 32.3666 18.3869 31.8143 18.9572C31.2733 19.5157 31.225 20.8589 31.225 20.8589V33.85C31.225 34.8446 30.8299 35.7984 30.1266 36.5017C29.4234 37.2049 28.4696 37.6 27.475 37.6L8.725 37.6C7.73044 37.6 6.77661 37.2049 6.07335 36.5017C5.37009 35.7984 4.975 34.8446 4.975 33.85V20.8589C4.975 20.8589 4.89952 19.6862 4.17143 18.9572C3.46158 18.2464 2.40357 18.1536 2.40357 18.1536\" stroke=\"${color}\" stroke-width=\"3.2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Close/X Icon (for close buttons)\n */\nexport function getCloseIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n        <path d=\"M8 8L13 13M8 8L3 3M8 8L3 13M8 8L13 3\" stroke=\"${color}\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Send/Arrow Icon (for send message button)\n */\nexport function getSendIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n      <path d=\"M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Chevron/Arrow Back Icon (for back navigation)\n */\nexport function getChevronLeftIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n      <path d=\"M15 18L9 12L15 6\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Maximize/Expand Icon (for expanding the chat window)\n */\nexport function getMaximizeIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n        <rect x=\"2\" y=\"3\" width=\"12\" height=\"10\" rx=\"2\" stroke=\"${color}\"/>\n        <rect x=\"8\" y=\"4\" width=\"5\" height=\"8\" rx=\"1\" fill=\"${color}\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Minimize Icon (for minimizing the chat window)\n */\nexport function getMinimizeIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n        <rect x=\"2\" y=\"3\" width=\"12\" height=\"10\" rx=\"2\" stroke=\"${color}\"/>\n        <rect x=\"8\" y=\"4\" width=\"5\" height=\"8\" rx=\"1\" fill=\"${color}\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Loading/Spinner Icon (for loading states)\n */\nexport function getLoadingIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className} me-agent-spin\">\n      <path d=\"M12 2V6M12 18V22M6 12H2M22 12H18M19.07 4.93L16.24 7.76M7.76 16.24L4.93 19.07M19.07 19.07L16.24 16.24M7.76 7.76L4.93 4.93\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Check/Success Icon (for success states)\n */\nexport function getCheckIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n      <path d=\"M20 6L9 17L4 12\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Error/Alert Icon (for error states)\n */\nexport function getErrorIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n      <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"${color}\" stroke-width=\"2\"/>\n      <path d=\"M12 8V12M12 16H12.01\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Gift/Rewards Icon (for rewards/offers)\n */\nexport function getGiftIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n      <rect x=\"3\" y=\"8\" width=\"18\" height=\"4\" rx=\"1\" stroke=\"${color}\" stroke-width=\"2\"/>\n      <rect x=\"5\" y=\"12\" width=\"14\" height=\"9\" rx=\"1\" stroke=\"${color}\" stroke-width=\"2\"/>\n      <path d=\"M12 8V21M9 8C9 6.34315 7.65685 5 6 5C4.34315 5 3 6.34315 3 8M15 8C15 6.34315 16.3431 5 18 5C19.6569 5 21 6.34315 21 8\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * User Avatar Icon (GitHub-style)\n */\nexport function getUserAvatarIcon(options: IconOptions = {}): string {\n  const {\n    width = 32,\n    height = 32,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n      <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"#667eea\"/>\n      <path d=\"M16 16C18.2091 16 20 14.2091 20 12C20 9.79086 18.2091 8 16 8C13.7909 8 12 9.79086 12 12C12 14.2091 13.7909 16 16 16Z\" fill=\"white\"/>\n      <path d=\"M16 18C11.5817 18 8 20.6863 8 24V26H24V24C24 20.6863 20.4183 18 16 18Z\" fill=\"white\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Assistant Avatar Icon (Bot)\n */\nexport function getAssistantAvatarIcon(options: IconOptions = {}): string {\n  const { width = 32, height = 32, color = \"white\", className = \"\" } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n        <rect width=\"${width}\" height=\"${height}\" rx=\"16\" fill=\"#0F0F0F\"/>\n        <path d=\"M18.5513 15.9277V17.3563M12.7656 15.9277V17.3563M13.4888 21.642C13.4888 21.642 14.2121 22.3563 15.6585 22.3563C17.1049 22.3563 17.8281 21.642 17.8281 21.642M14.9353 15.9277V19.4992H15.6585\" stroke=\"${color}\" stroke-width=\"1.6\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        <path d=\"M23.5625 15.4375C23.8111 15.4375 24.0496 15.3387 24.2254 15.1629C24.4012 14.9871 24.5 14.7486 24.5 14.5V12.625C24.5 12.3764 24.4012 12.1379 24.2254 11.9621C24.0496 11.7863 23.8111 11.6875 23.5625 11.6875H8.5625C8.31386 11.6875 8.0754 11.7863 7.89959 11.9621C7.72377 12.1379 7.625 12.3764 7.625 12.625V14.5C7.625 14.7486 7.72377 14.9871 7.89959 15.1629C8.0754 15.3387 8.31386 15.4375 8.5625 15.4375\" stroke=\"${color}\" stroke-width=\"1.6\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        <path d=\"M11.8437 11.6879C11.2221 11.6879 10.626 11.441 10.1865 11.0014C9.74693 10.5619 9.5 9.96576 9.5 9.34416C9.5 8.72256 9.74693 8.12642 10.1865 7.68688C10.626 7.24734 11.2221 7.00041 11.8437 7.00041C12.7481 6.98465 13.6344 7.42347 14.3869 8.25962C15.1395 9.09578 15.7234 10.2905 16.0625 11.6879C16.4016 10.2905 16.9855 9.09578 17.7381 8.25962C18.4906 7.42347 19.3769 6.98465 20.2812 7.00041C20.9028 7.00041 21.499 7.24734 21.9385 7.68688C22.3781 8.12642 22.625 8.72256 22.625 9.34416C22.625 9.96576 22.3781 10.5619 21.9385 11.0014C21.499 11.441 20.9028 11.6879 20.2812 11.6879\" stroke=\"${color}\" stroke-width=\"1.6\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        <path d=\"M23.6931 15.3577C23.6931 15.3577 23.005 15.394 22.7288 15.6791C22.4583 15.9584 22.4341 16.63 22.4341 16.63V23.1256C22.4341 23.6228 22.2366 24.0998 21.885 24.4514C21.5333 24.803 21.0564 25.0006 20.5592 25.0006L11.1842 25.0006C10.6869 25.0006 10.21 24.803 9.85833 24.4514C9.5067 24.0998 9.30915 23.6228 9.30915 23.1256V16.63C9.30915 16.63 9.27141 16.0437 8.90737 15.6791C8.55244 15.3237 8.02344 15.2773 8.02344 15.2773\" stroke=\"${color}\" stroke-width=\"1.6\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Search Icon (for quick actions)\n */\nexport function getSearchIcon(options: IconOptions = {}): string {\n  const {\n    width = 20,\n    height = 20,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n      <circle cx=\"11\" cy=\"11\" r=\"8\" stroke=\"${color}\" stroke-width=\"2\"/>\n      <path d=\"M21 21L16.5 16.5\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Sparkles Icon (for AI suggestions)\n */\nexport function getSparklesIcon(options: IconOptions = {}): string {\n  const {\n    width = 20,\n    height = 20,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n      <path d=\"M12 3L13.5 8.5L19 10L13.5 11.5L12 17L10.5 11.5L5 10L10.5 8.5L12 3Z\" stroke=\"${color}\" stroke-width=\"2\" stroke-linejoin=\"round\"/>\n      <path d=\"M19 3L19.5 5L21.5 5.5L19.5 6L19 8L18.5 6L16.5 5.5L18.5 5L19 3Z\" stroke=\"${color}\" stroke-width=\"2\" stroke-linejoin=\"round\"/>\n      <path d=\"M19 16L19.5 18L21.5 18.5L19.5 19L19 21L18.5 19L16.5 18.5L18.5 18L19 16Z\" stroke=\"${color}\" stroke-width=\"2\" stroke-linejoin=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Chat Icon (for chat title)\n */\nexport function getChatIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n        <path d=\"M17 4.16667V13.5C17 13.8094 16.8784 14.1062 16.662 14.325C16.4457 14.5437 16.1522 14.6667 15.8462 14.6667H6.25482L3.90386 16.72L3.89737 16.7251C3.68967 16.9031 3.42612 17.0005 3.15386 17C2.98459 16.9997 2.81744 16.9619 2.6642 16.8892C2.46488 16.7963 2.29624 16.6473 2.17845 16.4601C2.06066 16.2728 1.99872 16.0552 2.00002 15.8333V4.16667C2.00002 3.85725 2.12159 3.5605 2.33797 3.34171C2.55436 3.12292 2.84785 3 3.15386 3H15.8462C16.1522 3 16.4457 3.12292 16.662 3.34171C16.8784 3.5605 17 3.85725 17 4.16667Z\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Arrow Right Icon (for card list button)\n */\nexport function getArrowRightIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n  <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n    <path d=\"M13.3281 8L1.66146 8M13.3281 8L8.32813 3M13.3281 8L8.32813 13\" stroke=\"${color}\" stroke-width=\"1.6\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n  </svg>\n`.trim();\n}\n\n/**\n * User Icon (for \"Sign up for a brand\" action)\n */\nexport function getUserIcon(options: IconOptions = {}): string {\n  const {\n    width = 20,\n    height = 20,\n    color = \"#999999\",\n    className = \"\",\n  } = options;\n\n  return `\n  <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n    <path d=\"M9.5 2C5.35775 2 2 5.35775 2 9.5C2 13.6422 5.35775 17 9.5 17C13.6422 17 17 13.6422 17 9.5C17 5.35775 13.6422 2 9.5 2Z\" stroke=\"${color}\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    <path d=\"M3.70312 14.2605C3.70312 14.2605 5.37488 12.126 9.49988 12.126C13.6249 12.126 15.2974 14.2605 15.2974 14.2605M9.49988 9.50098C10.0966 9.50098 10.6689 9.26392 11.0909 8.84197C11.5128 8.42001 11.7499 7.84771 11.7499 7.25098C11.7499 6.65424 11.5128 6.08194 11.0909 5.65999C10.6689 5.23803 10.0966 5.00098 9.49988 5.00098C8.90314 5.00098 8.33084 5.23803 7.90888 5.65999C7.48693 6.08194 7.24988 6.65424 7.24988 7.25098C7.24988 7.84771 7.48693 8.42001 7.90888 8.84197C8.33084 9.26392 8.90314 9.50098 9.49988 9.50098Z\" stroke=\"${color}\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n  </svg>\n`.trim();\n}\n\n/**\n * Money Icon (for \"Purchase from a brand\" action)\n */\nexport function getMoneyIcon(options: IconOptions = {}): string {\n  const {\n    width = 20,\n    height = 20,\n    color = \"#999999\",\n    className = \"\",\n  } = options;\n\n  return `\n  <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n    <path d=\"M14.75 9.7315C14.501 9.69578 14.2509 9.66901 14 9.65125M5 11.0988C4.744 11.0808 4.494 11.054 4.25 11.0185M11.375 10.375C11.375 10.8723 11.1775 11.3492 10.8258 11.7008C10.4742 12.0525 9.99728 12.25 9.5 12.25C9.00272 12.25 8.52581 12.0525 8.17417 11.7008C7.82254 11.3492 7.625 10.8723 7.625 10.375C7.625 9.87772 7.82254 9.40081 8.17417 9.04917C8.52581 8.69754 9.00272 8.5 9.5 8.5C9.99728 8.5 10.4742 8.69754 10.8258 9.04917C11.1775 9.40081 11.375 9.87772 11.375 10.375Z\" stroke=\"${color}\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    <path d=\"M9.5 16C8.501 16.4665 7.18775 16.75 5.75 16.75C4.9505 16.75 4.19 16.6623 3.5 16.5048C2.375 16.2468 2 15.5695 2 14.4145V6.3355C2 5.59675 2.78 5.08975 3.5 5.25475C4.19 5.41225 4.9505 5.5 5.75 5.5C7.18775 5.5 8.501 5.2165 9.5 4.75C10.499 4.2835 11.8122 4 13.25 4C14.0495 4 14.81 4.08775 15.5 4.24525C16.6865 4.5175 17 5.215 17 6.3355V14.4145C17 15.1532 16.22 15.6602 15.5 15.4952C14.81 15.3377 14.0495 15.25 13.25 15.25C11.8122 15.25 10.499 15.5335 9.5 16Z\" stroke=\"${color}\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n  </svg>\n`.trim();\n}\n\n/**\n * External link icon\n */\nexport function getExternalLinkIcon(options: IconOptions = {}): string {\n  const {\n    width = 12,\n    height = 12,\n    color = \"#0F0F0F\",\n    className = \"\",\n  } = options;\n\n  return `\n  <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n    <path d=\"M8.25 1.125H10.875V3.75M10.3125 1.6875L7.5 4.5M6.375 1.875H3C2.70163 1.875 2.41548 1.99353 2.2045 2.2045C1.99353 2.41548 1.875 2.70163 1.875 3V9C1.875 9.29837 1.99353 9.58452 2.2045 9.7955C2.41548 10.0065 2.70163 10.125 3 10.125H9C9.29837 10.125 9.58452 10.0065 9.7955 9.7955C10.0065 9.58452 10.125 9.29837 10.125 9V5.625\" stroke=\"${color}\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n  </svg>\n`.trim();\n}\n\n/**\n * Award icon (for Must Haves category)\n */\nexport function getAwardIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n  return `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\"><circle cx=\"12\" cy=\"8\" r=\"6\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M15.477 12.89L17 22L12 19L7 22L8.523 12.89\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>`.trim();\n}\n\n/**\n * Shirt icon (for Cosmetics category)\n */\nexport function getShirtIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n  return `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\"><path d=\"M20.38 3.46L16 2L13 8H11L9 8C9 6 7 2L2.62 3.46C2.22 3.6 2 4 2 4.42V9.58C2 10.02 2.22 10.42 2.58 10.58L7 12V22H17V12L21.42 10.58C21.78 10.42 22 10.02 22 9.58V4.42C22 4 21.78 3.6 21.38 3.46Z\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>`.trim();\n}\n\n/**\n * Heart pulse icon (for Travel category)\n */\nexport function getHeartPulseIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n  return `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\"><path d=\"M19 14C20.49 12.54 22 10.79 22 8.5C22 7.04131 21.4205 5.64236 20.3891 4.61091C19.3576 3.57946 17.9587 3 16.5 3C14.74 3 13.5 3.5 12 5C10.5 3.5 9.26 3 7.5 3C6.04131 3 4.64236 3.57946 3.61091 4.61091C2.57946 5.64236 2 7.04131 2 8.5C2 10.8 3.5 12.55 5 14\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M12 21L5 14H9L11 9L13 15L15 14H19L12 21Z\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>`.trim();\n}\n\n/**\n * Sofa icon (for Sneakers category)\n */\nexport function getSofaIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n  return `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\"><path d=\"M20 9V6C20 4.89543 19.1046 4 18 4H6C4.89543 4 4 4.89543 4 6V9\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M2 11V16C2 17.1046 2.89543 18 4 18H5\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M22 11V16C22 17.1046 21.1046 18 20 18H19\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M4 11C4 9.89543 4.89543 9 6 9H18C19.1046 9 20 9.89543 20 11V16H4V11Z\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M5 18V20\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M19 18V20\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>`.trim();\n}\n\n/**\n * Tag icon (for Food & Beverages category)\n */\nexport function getTagIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n  return `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\"><path d=\"M12 2L2 7L12 12L22 7L12 2Z\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M2 17L12 22L22 17\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M2 12L12 17L22 12\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>`.trim();\n}\n\n/**\n * Layout grid icon (for Deals & Sports category)\n */\nexport function getLayoutGridIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n  return `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\"><rect x=\"3\" y=\"3\" width=\"7\" height=\"7\" rx=\"1\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><rect x=\"14\" y=\"3\" width=\"7\" height=\"7\" rx=\"1\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><rect x=\"14\" y=\"14\" width=\"7\" height=\"7\" rx=\"1\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><rect x=\"3\" y=\"14\" width=\"7\" height=\"7\" rx=\"1\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>`.trim();\n}\n\n/**\n * Laptop icon (for Gadgets & Electronics category)\n */\nexport function getLaptopIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n  return `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\"><path d=\"M20 16V7C20 5.89543 19.1046 5 18 5H6C4.89543 5 4 5.89543 4 7V16\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M2 16H22\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M2 16L3 19H21L22 16\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>`.trim();\n}\n\n/**\n * Book open icon (for Art & Collectibles category)\n */\nexport function getBookOpenIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n  return `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\"><path d=\"M2 3H8C9.06087 3 10.0783 3.42143 10.8284 4.17157C11.5786 4.92172 12 5.93913 12 7V21C12 20.2044 11.6839 19.4413 11.1213 18.8787C10.5587 18.3161 9.79565 18 9 18H2V3Z\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M22 3H16C14.9391 3 13.9217 3.42143 13.1716 4.17157C12.4214 4.92172 12 5.93913 12 7V21C12 20.2044 12.3161 19.4413 12.8787 18.8787C13.4413 18.3161 14.2044 18 15 18H22V3Z\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>`.trim();\n}\n","import { getBotIcon } from \"./icons\";\n\n/**\n * Floating Button Component\n */\n\nexport class FloatingButton {\n  private element: HTMLButtonElement;\n  private position: \"bottom-right\" | \"bottom-left\";\n  private onClick: () => void;\n\n  constructor(position: \"bottom-right\" | \"bottom-left\", onClick: () => void) {\n    this.position = position;\n    this.onClick = onClick;\n    this.element = this.create();\n  }\n\n  /**\n   * Create the button element\n   */\n  private create(): HTMLButtonElement {\n    const button = document.createElement(\"button\");\n    button.className = `me-agent-button ${this.position}`;\n    button.setAttribute(\"aria-label\", \"Open chat\");\n\n    // Add bot icon\n    button.innerHTML = getBotIcon({\n      width: 32,\n      height: 35,\n      className: \"me-agent-button-icon\",\n    });\n\n    button.addEventListener(\"click\", this.onClick);\n\n    return button;\n  }\n\n  /**\n   * Mount the button to the DOM\n   */\n  mount(): void {\n    document.body.appendChild(this.element);\n  }\n\n  /**\n   * Remove the button from the DOM\n   */\n  unmount(): void {\n    this.element.remove();\n  }\n\n  /**\n   * Get the button element\n   */\n  getElement(): HTMLButtonElement {\n    return this.element;\n  }\n\n  /**\n   * Hide the button\n   */\n  hide(): void {\n    this.element.classList.add(\"hidden\");\n  }\n\n  /**\n   * Show the button\n   */\n  show(): void {\n    this.element.classList.remove(\"hidden\");\n  }\n}\n","import { Message } from \"../../types\";\nimport { getUserAvatarIcon, getAssistantAvatarIcon } from \"../icons\";\n\n/**\n * Message Component - Renders individual chat messages\n */\nexport class MessageComponent {\n  /**\n   * Parse markdown-style content and convert to HTML\n   */\n  private static parseMarkdown(content: string): string {\n    if (!content) return \"\";\n\n    // Convert markdown links [text](url) to HTML links\n    // Special handling for offer links\n    let html = content.replace(\n      /\\[([^\\]]+)\\]\\((https?:\\/\\/[^\\)]+)\\)/g,\n      (match, text, url) => {\n        // Check if this is an offer link\n        const offerMatch = url.match(/\\/offer\\/([^\\/\\s]+)/);\n        if (offerMatch) {\n          const offerCode = offerMatch[1];\n          return `<a href=\"#\" class=\"me-agent-offer-link\" data-offer-code=\"${offerCode}\">${text}</a>`;\n        }\n        // Regular external link\n        return `<a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\">${text}</a>`;\n      }\n    );\n\n    // Convert bold **text** to <strong>\n    html = html.replace(/\\*\\*([^\\*]+)\\*\\*/g, \"<strong>$1</strong>\");\n\n    // Convert italic *text* to <em>\n    html = html.replace(/\\*([^\\*]+)\\*/g, \"<em>$1</em>\");\n\n    // Convert line breaks to <br>\n    html = html.replace(/\\n/g, \"<br>\");\n\n    return html;\n  }\n\n  /**\n   * Get avatar for message role\n   */\n  private static getAvatar(role: string): string {\n    if (role === \"user\") {\n      return getUserAvatarIcon({\n        width: 32,\n        height: 32,\n        className: \"me-agent-message-avatar\",\n      });\n    }\n    // Default to assistant avatar for \"assistant\" and \"system\" roles\n    return getAssistantAvatarIcon({\n      width: 32,\n      height: 32,\n      className: \"me-agent-message-avatar\",\n    });\n  }\n\n  /**\n   * Create a message element\n   */\n  static create(\n    message: Message,\n    onOfferClick?: (offerCode: string) => void\n  ): HTMLDivElement {\n    const messageDiv = document.createElement(\"div\");\n    messageDiv.className = `me-agent-message ${message.role}`;\n    messageDiv.setAttribute(\"data-message-id\", message.id);\n\n    // Avatar\n    const avatarDiv = document.createElement(\"div\");\n    avatarDiv.className = \"me-agent-message-avatar-wrapper\";\n    avatarDiv.innerHTML = this.getAvatar(message.role);\n\n    // Content wrapper\n    const contentWrapper = document.createElement(\"div\");\n    contentWrapper.className = \"me-agent-message-content-wrapper\";\n\n    const contentDiv = document.createElement(\"div\");\n    contentDiv.className = \"me-agent-message-content\";\n\n    // Parse markdown and set as HTML\n    contentDiv.innerHTML = this.parseMarkdown(message.content);\n\n    // Add click handlers for offer links\n    if (onOfferClick) {\n      const offerLinks = contentDiv.querySelectorAll(\".me-agent-offer-link\");\n      offerLinks.forEach((link) => {\n        link.addEventListener(\"click\", (e) => {\n          e.preventDefault();\n          const offerCode = (link as HTMLElement).getAttribute(\n            \"data-offer-code\"\n          );\n          if (offerCode) {\n            onOfferClick(offerCode);\n          }\n        });\n      });\n    }\n\n    contentWrapper.appendChild(contentDiv);\n    messageDiv.appendChild(avatarDiv);\n    messageDiv.appendChild(contentWrapper);\n\n    return messageDiv;\n  }\n\n  /**\n   * Create a loading indicator\n   */\n  static createLoading(): HTMLDivElement {\n    const loadingDiv = document.createElement(\"div\");\n    loadingDiv.className = \"me-agent-message assistant\";\n    loadingDiv.setAttribute(\"data-loading\", \"true\");\n\n    // Avatar\n    const avatarDiv = document.createElement(\"div\");\n    avatarDiv.className = \"me-agent-message-avatar-wrapper\";\n    avatarDiv.innerHTML = this.getAvatar(\"assistant\");\n\n    // Content wrapper\n    const contentWrapper = document.createElement(\"div\");\n    contentWrapper.className = \"me-agent-message-content-wrapper\";\n\n    const contentDiv = document.createElement(\"div\");\n    contentDiv.className = \"me-agent-message-content\";\n\n    const loadingIndicator = document.createElement(\"div\");\n    loadingIndicator.className = \"me-agent-loading\";\n    loadingIndicator.innerHTML = `\n      <span class=\"me-agent-loading-text\">Typing</span>\n      <span class=\"me-agent-loading-dots\">\n        <span class=\"me-agent-loading-dot\"></span>\n        <span class=\"me-agent-loading-dot\"></span>\n        <span class=\"me-agent-loading-dot\"></span>\n      </span>\n    `;\n\n    contentDiv.appendChild(loadingIndicator);\n    contentWrapper.appendChild(contentDiv);\n    loadingDiv.appendChild(avatarDiv);\n    loadingDiv.appendChild(contentWrapper);\n\n    return loadingDiv;\n  }\n\n  /**\n   * Update message content (for streaming)\n   */\n  static updateContent(\n    element: HTMLElement,\n    content: string,\n    onOfferClick?: (offerCode: string) => void\n  ): void {\n    const contentDiv = element.querySelector(\".me-agent-message-content\");\n    if (contentDiv) {\n      // Parse markdown and update HTML\n      contentDiv.innerHTML = this.parseMarkdown(content);\n\n      // Re-attach click handlers for offer links\n      if (onOfferClick) {\n        const offerLinks = contentDiv.querySelectorAll(\".me-agent-offer-link\");\n        offerLinks.forEach((link) => {\n          link.addEventListener(\"click\", (e) => {\n            e.preventDefault();\n            const offerCode = (link as HTMLElement).getAttribute(\n              \"data-offer-code\"\n            );\n            if (offerCode) {\n              onOfferClick(offerCode);\n            }\n          });\n        });\n      }\n    }\n  }\n\n  /**\n   * Append a card list or other element to a message's content wrapper\n   */\n  static appendToMessage(\n    messageElement: HTMLElement,\n    element: HTMLElement\n  ): void {\n    const contentWrapper = messageElement.querySelector(\n      \".me-agent-message-content-wrapper\"\n    ) as HTMLElement;\n    if (contentWrapper) {\n      contentWrapper.appendChild(element);\n    }\n  }\n}\n","import { QuickAction } from \"../../types\";\nimport {\n  getSearchIcon,\n  getTagIcon,\n  getGiftIcon,\n  getSparklesIcon,\n  getUserIcon,\n  getMoneyIcon,\n} from \"../icons\";\n\n/**\n * Quick Actions Component - Renders a list of actionable items\n */\nexport class QuickActionsComponent {\n  /**\n   * Get icon for action type\n   */\n  private static getIconForAction(action: QuickAction): string {\n    const iconMap: Record<string, () => string> = {\n      search: () =>\n        getSearchIcon({\n          width: 18,\n          height: 18,\n          className: \"me-agent-quick-action-icon\",\n        }),\n      offers: () =>\n        getGiftIcon({\n          width: 18,\n          height: 18,\n          className: \"me-agent-quick-action-icon\",\n        }),\n      tags: () =>\n        getTagIcon({\n          width: 18,\n          height: 18,\n          className: \"me-agent-quick-action-icon\",\n        }),\n      suggestions: () =>\n        getSparklesIcon({\n          width: 18,\n          height: 18,\n          className: \"me-agent-quick-action-icon\",\n        }),\n      user: () =>\n        getUserIcon({\n          width: 18,\n          height: 18,\n          className: \"me-agent-quick-action-icon\",\n        }),\n      money: () =>\n        getMoneyIcon({\n          width: 18,\n          height: 18,\n          className: \"me-agent-quick-action-icon\",\n        }),\n    };\n\n    // Use icon from action if specified, otherwise use type-based icon\n    if (action.icon && iconMap[action.icon]) {\n      return iconMap[action.icon]();\n    }\n\n    // Default to sparkles icon\n    return getSparklesIcon({\n      width: 18,\n      height: 18,\n      className: \"me-agent-quick-action-icon\",\n    });\n  }\n\n  /**\n   * Create quick actions list\n   */\n  static create(\n    actions: QuickAction[],\n    onClick: (action: QuickAction) => void\n  ): HTMLDivElement {\n    const container = document.createElement(\"div\");\n    container.className = \"me-agent-quick-actions\";\n\n    actions.forEach((action) => {\n      const button = document.createElement(\"button\");\n      button.className = \"me-agent-quick-action-button\";\n      button.setAttribute(\"data-action-id\", action.id);\n\n      const icon = this.getIconForAction(action);\n      button.innerHTML = `\n        ${icon}\n        <span class=\"me-agent-quick-action-text\">${action.label}</span>\n      `;\n\n      button.addEventListener(\"click\", () => onClick(action));\n\n      container.appendChild(button);\n    });\n\n    return container;\n  }\n\n  /**\n   * Create a message with quick actions\n   */\n  static createMessageWithActions(\n    content: string,\n    actions: QuickAction[],\n    messageId: string,\n    onActionClick: (action: QuickAction) => void\n  ): HTMLDivElement {\n    const wrapper = document.createElement(\"div\");\n    wrapper.className = \"me-agent-message-with-actions\";\n    wrapper.setAttribute(\"data-message-id\", messageId);\n\n    // Message content\n    const contentDiv = document.createElement(\"div\");\n    contentDiv.className = \"me-agent-message-actions-content\";\n    contentDiv.textContent = content;\n\n    // Quick actions\n    const actionsContainer = this.create(actions, onActionClick);\n\n    wrapper.appendChild(contentDiv);\n    wrapper.appendChild(actionsContainer);\n\n    return wrapper;\n  }\n}\n","/**\n * Card List Component - Reusable component for displaying lists in chat\n * Can be used for offers, earnings, recommendations, etc.\n */\n\nimport { getArrowRightIcon } from \"../icons\";\n\nexport interface CardListItem {\n  id: string;\n  image?: string;\n  title: string;\n  subtitle?: string;\n  icon?: string;\n}\n\nexport interface CardListConfig {\n  items: CardListItem[];\n  title?: string;\n  actionLabel?: string;\n  onAction?: () => void;\n  onItemClick?: (item: CardListItem) => void;\n}\n\nexport class CardList {\n  /**\n   * Create a card list element\n   */\n  static create(config: CardListConfig): HTMLDivElement {\n    const container = document.createElement(\"div\");\n    container.className = \"me-agent-card-list\";\n\n    // Create preview with avatars (show up to 3, plus a 4th with count if more)\n    const maxVisible = 3;\n    const previewItems = config.items.slice(0, maxVisible);\n    const remainingCount = config.items.length - maxVisible;\n\n    const avatarGroup = previewItems\n      .map((item, index) => {\n        const imageUrl =\n          item.image || `https://via.placeholder.com/40x40?text=${index + 1}`;\n        return `<div class=\"me-agent-card-avatar\" style=\"background-image: url('${imageUrl}'); z-index: ${\n          index + 1\n        };\"></div>`;\n      })\n      .join(\"\");\n\n    // Add overlay avatar if there are more items\n    const overlayAvatar =\n      remainingCount > 0\n        ? (() => {\n            // Get the next image (4th item) to show as background\n            const nextItem = config.items[maxVisible];\n            const overlayImage =\n              nextItem?.image ||\n              `https://via.placeholder.com/40x40?text=${maxVisible + 1}`;\n            return `<div class=\"me-agent-card-avatar me-agent-card-avatar-overlay\" style=\"background-image: url('${overlayImage}'); z-index: ${\n              maxVisible + 1\n            };\">\n            <span class=\"me-agent-card-avatar-count\">+${\n              remainingCount > 99 ? \"99+\" : remainingCount\n            }</span>\n           </div>`;\n          })()\n        : \"\";\n\n    container.innerHTML = `\n      <div class=\"me-agent-card-list-content\">\n        <div class=\"me-agent-card-avatars\">\n          ${avatarGroup}\n          ${overlayAvatar}\n        </div>\n        <div class=\"me-agent-card-list-text\">\n          <p class=\"me-agent-card-list-title\">${\n            config.title || `${config.items.length} items found`\n          }</p>\n          ${\n            config.actionLabel\n              ? `<button class=\"me-agent-card-list-button\">${\n                  config.actionLabel\n                }${getArrowRightIcon({\n                  width: 16,\n                  height: 16,\n                  color: \"#0F0F0F\",\n                })}</button>`\n              : \"\"\n          }\n        </div>\n      </div>\n    `;\n\n    // Add event listener for action button\n    if (config.onAction) {\n      const button = container.querySelector(\".me-agent-card-list-button\");\n      button?.addEventListener(\"click\", config.onAction);\n    }\n\n    return container;\n  }\n}\n","import { Offer } from \"../../types\";\nimport { CardList, CardListItem } from \"./card-list\";\n\n/**\n * Offer Preview Card - Shows in chat after AI response\n * Uses the generic CardList component\n */\nexport class OfferPreviewCard {\n  /**\n   * Create offer preview card element\n   */\n  static create(\n    offers: Offer[],\n    onViewOffers: (offers: Offer[]) => void\n  ): HTMLDivElement {\n    // Convert offers to card list items\n    const items: CardListItem[] = offers.map((offer) => ({\n      id: offer.offerCode || offer.id,\n      image: offer.image,\n      title: offer.name,\n      subtitle: offer.brandName,\n    }));\n\n    // Use the generic CardList component\n    return CardList.create({\n      items,\n      title: `Here are ${offers.length} ${\n        offers.length === 1 ? \"offer\" : \"offers\"\n      } we found for you`,\n      actionLabel: \"View offers\",\n      onAction: () => onViewOffers(offers),\n    });\n  }\n}\n","import { RedeemManager } from \"../../../redeem/manager\";\nimport { getCloseIcon, getChevronLeftIcon } from \"../../icons\";\n\n/**\n * OTP Verification View Component\n */\nexport class OTPView {\n  /**\n   * Render OTP verification view\n   */\n  static render(\n    onBack: () => void,\n    onClose: () => void,\n    onSuccess: () => void,\n    redeemManager: RedeemManager,\n    autoSendOTP: boolean = false\n  ): string {\n    const configEmail = redeemManager.getEmail() || \"\";\n    const isEmailPreFilled = !!configEmail;\n\n    return `\n      <div class=\"me-agent-offers-header\">\n        <button class=\"me-agent-offers-back\" aria-label=\"Back\">\n          ${getChevronLeftIcon({ width: 20, height: 20 })}\n          <span>Back</span>\n        </button>\n        <h3 class=\"me-agent-offers-title\">Verify Email</h3>\n        <button class=\"me-agent-offers-close\" aria-label=\"Close offers\">${getCloseIcon(\n          { width: 20, height: 20 }\n        )}</button>\n      </div>\n      <div class=\"me-agent-otp-container\">\n        <p class=\"me-agent-otp-description\">${\n          autoSendOTP\n            ? \"Please check your email for the one-time password we just sent.\"\n            : \"We'll send a one-time password to your email to verify your identity.\"\n        }</p>\n        \n        <div class=\"me-agent-otp-form\" style=\"${\n          autoSendOTP ? \"display: none;\" : \"\"\n        }\">\n          <input \n            type=\"email\" \n            class=\"me-agent-otp-email-input\" \n            placeholder=\"Enter your email address\"\n            value=\"${configEmail}\"\n            ${isEmailPreFilled ? \"readonly\" : \"\"}\n            required\n          />\n          <button class=\"me-agent-otp-send-button\">Send OTP</button>\n        </div>\n\n        <div class=\"me-agent-otp-status\" style=\"display: ${\n          autoSendOTP ? \"block\" : \"none\"\n        };\">${\n      autoSendOTP\n        ? \"OTP sent! Please check your email and complete verification.\"\n        : \"\"\n    }</div>\n      </div>\n    `;\n  }\n\n  /**\n   * Setup event listeners for OTP view\n   */\n  static setupListeners(\n    element: HTMLElement,\n    onBack: () => void,\n    onClose: () => void,\n    onSuccess: () => void,\n    redeemManager: RedeemManager,\n    autoSendOTP: boolean = false\n  ): void {\n    const backBtn = element.querySelector(\".me-agent-offers-back\");\n    backBtn?.addEventListener(\"click\", onBack);\n\n    const closeBtn = element.querySelector(\".me-agent-offers-close\");\n    closeBtn?.addEventListener(\"click\", onClose);\n\n    const emailInput = element.querySelector(\n      \".me-agent-otp-email-input\"\n    ) as HTMLInputElement;\n    const sendBtn = element.querySelector(\n      \".me-agent-otp-send-button\"\n    ) as HTMLButtonElement;\n    const statusDiv = element.querySelector(\n      \".me-agent-otp-status\"\n    ) as HTMLDivElement;\n\n    // If auto-send is enabled, start polling for authentication immediately\n    if (autoSendOTP) {\n      this.startAuthPolling(redeemManager, onSuccess);\n      return;\n    }\n\n    // Manual OTP send\n    if (sendBtn) {\n      sendBtn.addEventListener(\"click\", async () => {\n        const email = emailInput?.value.trim();\n        if (!email) {\n          this.showStatus(\n            statusDiv,\n            \"Please enter a valid email address\",\n            \"error\"\n          );\n          return;\n        }\n\n        try {\n          sendBtn.disabled = true;\n          sendBtn.textContent = \"Sending...\";\n          statusDiv.style.display = \"none\";\n\n          await redeemManager.sendOTP(email);\n          this.showStatus(\n            statusDiv,\n            \"OTP sent! Please check your email and complete verification.\",\n            \"success\"\n          );\n\n          // Start polling for authentication\n          this.startAuthPolling(redeemManager, onSuccess);\n        } catch (error: any) {\n          console.error(\"Error sending OTP:\", error);\n          this.showStatus(\n            statusDiv,\n            error.message || \"Failed to send OTP. Please try again.\",\n            \"error\"\n          );\n          sendBtn.disabled = false;\n          sendBtn.textContent = \"Send OTP\";\n        }\n      });\n    }\n  }\n\n  /**\n   * Start polling for authentication status\n   */\n  private static startAuthPolling(\n    redeemManager: RedeemManager,\n    onSuccess: () => void\n  ): void {\n    const pollInterval = setInterval(async () => {\n      try {\n        const isAuthenticated = await redeemManager.isAuthenticated();\n        if (isAuthenticated) {\n          clearInterval(pollInterval);\n          onSuccess();\n        }\n      } catch (error) {\n        console.error(\"Error checking authentication:\", error);\n      }\n    }, 2000); // Poll every 2 seconds\n\n    // Stop polling after 5 minutes\n    setTimeout(() => {\n      clearInterval(pollInterval);\n    }, 300000);\n  }\n\n  /**\n   * Show status message\n   */\n  private static showStatus(\n    element: HTMLDivElement,\n    message: string,\n    type: \"success\" | \"error\"\n  ): void {\n    element.textContent = message;\n    element.className = `me-agent-otp-status me-agent-otp-status-${type}`;\n    element.style.display = \"block\";\n  }\n}\n","import { RewardBalance } from \"../../../types\";\nimport { getCloseIcon, getChevronLeftIcon } from \"../../icons\";\n\n/**\n * Reward Selection View Component\n */\nexport class RewardSelectionView {\n  /**\n   * Render reward selection view\n   */\n  static render(balances: RewardBalance[]): string {\n    return `\n      <div class=\"me-agent-offers-header\">\n        <button class=\"me-agent-offers-back\" aria-label=\"Back\">\n          ${getChevronLeftIcon({ width: 20, height: 20 })}\n          <span>Back</span>\n        </button>\n        <h3 class=\"me-agent-offers-title\">Select Reward</h3>\n        <button class=\"me-agent-offers-close\" aria-label=\"Close offers\">${getCloseIcon(\n          { width: 20, height: 20 }\n        )}</button>\n      </div>\n      <div class=\"me-agent-rewards-container\">\n        <p class=\"me-agent-rewards-description\">Choose a reward to redeem this offer:</p>\n        \n        <div class=\"me-agent-rewards-list\">\n          ${balances\n            .map((balance, index) => this.renderRewardItem(balance, index))\n            .join(\"\")}\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Render individual reward item\n   */\n  private static renderRewardItem(\n    balance: RewardBalance,\n    index: number\n  ): string {\n    const imageUrl =\n      balance.reward.image || \"https://via.placeholder.com/60x60?text=Reward\";\n\n    return `\n      <div class=\"me-agent-reward-item\" data-index=\"${index}\">\n        <div class=\"me-agent-reward-image\" style=\"background-image: url('${imageUrl}')\"></div>\n        <div class=\"me-agent-reward-info\">\n          <h4 class=\"me-agent-reward-name\">${balance.reward.name}</h4>\n          <p class=\"me-agent-reward-symbol\">${balance.reward.symbol}</p>\n          <p class=\"me-agent-reward-balance\">Balance: ${balance.balance.toLocaleString()}</p>\n        </div>\n        <button class=\"me-agent-reward-select-button\">Select</button>\n      </div>\n    `;\n  }\n\n  /**\n   * Setup event listeners\n   */\n  static setupListeners(\n    element: HTMLElement,\n    balances: RewardBalance[],\n    onBack: () => void,\n    onClose: () => void,\n    onSelect: (reward: RewardBalance) => void\n  ): void {\n    const backBtn = element.querySelector(\".me-agent-offers-back\");\n    backBtn?.addEventListener(\"click\", onBack);\n\n    const closeBtn = element.querySelector(\".me-agent-offers-close\");\n    closeBtn?.addEventListener(\"click\", onClose);\n\n    const selectButtons = element.querySelectorAll(\n      \".me-agent-reward-select-button\"\n    );\n    selectButtons.forEach((btn, index) => {\n      btn.addEventListener(\"click\", () => onSelect(balances[index]));\n    });\n  }\n}\n","import { RewardBalance } from \"../../../types\";\nimport { getCloseIcon, getChevronLeftIcon } from \"../../icons\";\n\n/**\n * Affordability Error View Component\n */\nexport class AffordabilityErrorView {\n  /**\n   * Render error view\n   */\n  static render(reward: RewardBalance, amountNeeded: number): string {\n    return `\n      <div class=\"me-agent-offers-header\">\n        <button class=\"me-agent-offers-back\" aria-label=\"Back\">\n          ${getChevronLeftIcon({ width: 20, height: 20 })}\n          <span>Back</span>\n        </button>\n        <h3 class=\"me-agent-offers-title\">Insufficient Balance</h3>\n        <button class=\"me-agent-offers-close\" aria-label=\"Close offers\">${getCloseIcon(\n          { width: 20, height: 20 }\n        )}</button>\n      </div>\n      <div class=\"me-agent-error-container\">\n        <div class=\"me-agent-error-icon\">⚠️</div>\n        <h3>Cannot Afford This Offer</h3>\n        <p>You need <strong>${amountNeeded.toFixed(2)} ${\n      reward.reward.symbol\n    }</strong> to redeem this offer.</p>\n        <p>Your current balance: <strong>${reward.balance.toFixed(2)} ${\n      reward.reward.symbol\n    }</strong></p>\n        <p>Please select a different reward or earn more to continue.</p>\n        <button class=\"me-agent-error-back-button\">Select Different Reward</button>\n      </div>\n    `;\n  }\n\n  /**\n   * Setup event listeners\n   */\n  static setupListeners(\n    element: HTMLElement,\n    onBack: () => void,\n    onClose: () => void\n  ): void {\n    const backBtn = element.querySelector(\".me-agent-offers-back\");\n    backBtn?.addEventListener(\"click\", onBack);\n\n    const closeBtn = element.querySelector(\".me-agent-offers-close\");\n    closeBtn?.addEventListener(\"click\", onClose);\n\n    const errorBackBtn = element.querySelector(\".me-agent-error-back-button\");\n    errorBackBtn?.addEventListener(\"click\", onBack);\n  }\n}\n","import { RewardBalance, OfferDetail } from \"../../../types\";\nimport { getCloseIcon, getChevronLeftIcon } from \"../../icons\";\n\n/**\n * Confirmation View Component\n */\nexport class ConfirmationView {\n  /**\n   * Render confirmation view\n   */\n  static render(\n    reward: RewardBalance,\n    swapAmount: any,\n    offerDetail: OfferDetail\n  ): string {\n    return `\n      <div class=\"me-agent-offers-header\">\n        <button class=\"me-agent-offers-back\" aria-label=\"Back\">\n          ${getChevronLeftIcon({ width: 20, height: 20 })}\n          <span>Back</span>\n        </button>\n        <h3 class=\"me-agent-offers-title\">Confirm Redemption</h3>\n        <button class=\"me-agent-offers-close\" aria-label=\"Close offers\">${getCloseIcon(\n          { width: 20, height: 20 }\n        )}</button>\n      </div>\n      <div class=\"me-agent-confirm-container\">\n        <div class=\"me-agent-confirm-summary\">\n          <h3>Redemption Summary</h3>\n          \n          <div class=\"me-agent-confirm-item\">\n            <span>Offer:</span>\n            <strong>${offerDetail.name}</strong>\n          </div>\n          \n          <div class=\"me-agent-confirm-item\">\n            <span>Reward Used:</span>\n            <strong>${reward.reward.name} (${reward.reward.symbol})</strong>\n          </div>\n          \n          <div class=\"me-agent-confirm-item\">\n            <span>Amount Required:</span>\n            <strong>${swapAmount.amountNeeded.toFixed(2)} ${\n      reward.reward.symbol\n    }</strong>\n          </div>\n          \n          <div class=\"me-agent-confirm-item\">\n            <span>Your Balance After:</span>\n            <strong>${(reward.balance - swapAmount.amountNeeded).toFixed(2)} ${\n      reward.reward.symbol\n    }</strong>\n          </div>\n          \n          <div class=\"me-agent-confirm-item\">\n            <span>You Save:</span>\n            <strong class=\"me-agent-confirm-savings\">$${swapAmount.usdDiscount.toFixed(\n              2\n            )}</strong>\n          </div>\n        </div>\n        \n        <button class=\"me-agent-confirm-button\">Continue to Redemption</button>\n      </div>\n    `;\n  }\n\n  /**\n   * Setup event listeners\n   */\n  static setupListeners(\n    element: HTMLElement,\n    onBack: () => void,\n    onClose: () => void,\n    onConfirm: () => void\n  ): void {\n    const backBtn = element.querySelector(\".me-agent-offers-back\");\n    backBtn?.addEventListener(\"click\", onBack);\n\n    const closeBtn = element.querySelector(\".me-agent-offers-close\");\n    closeBtn?.addEventListener(\"click\", onClose);\n\n    const confirmBtn = element.querySelector(\".me-agent-confirm-button\");\n    confirmBtn?.addEventListener(\"click\", onConfirm);\n  }\n}\n","import { RedeemManager } from \"../../../redeem/manager\";\n\n/**\n * Loading View Component\n * Shows a loading state while user is being authenticated to ME Protocol\n */\nexport class OnboardingView {\n  /**\n   * Render loading view\n   */\n  static render(): string {\n    return `\n      <div class=\"me-agent-offers-header\">\n        <h3 class=\"me-agent-offers-title\">Please wait</h3>\n      </div>\n      <div class=\"me-agent-onboarding-container\">\n        <div class=\"me-agent-onboarding-spinner\"></div>\n        <h3 class=\"me-agent-onboarding-title\">Setting up your account...</h3>\n        <p class=\"me-agent-onboarding-description\">\n          This will only take a moment.\n        </p>\n        <div class=\"me-agent-onboarding-status\">Please wait...</div>\n      </div>\n    `;\n  }\n\n  /**\n   * Start login process\n   */\n  static async startOnboarding(\n    element: HTMLElement,\n    redeemManager: RedeemManager,\n    onSuccess: () => void,\n    onError: (error: string) => void\n  ): Promise<void> {\n    const statusDiv = element.querySelector(\n      \".me-agent-onboarding-status\"\n    ) as HTMLDivElement;\n\n    try {\n      if (statusDiv) {\n        statusDiv.textContent = \"Authenticating...\";\n      }\n\n      // Login to ME Protocol (creates account if new user)\n      await redeemManager.loginToMEProtocol();\n\n      if (statusDiv) {\n        statusDiv.textContent = \"Almost done...\";\n      }\n\n      // Small delay to show success\n      await new Promise((resolve) => setTimeout(resolve, 500));\n\n      onSuccess();\n    } catch (error: any) {\n      console.error(\"Login error:\", error);\n      onError(error.message || \"Failed to authenticate. Please try again.\");\n    }\n  }\n}\n","import {\n  Offer,\n  Brand,\n  Category,\n  OfferDetail,\n  OfferVariant,\n  RewardBalance,\n  SwapAmountResponse,\n  MeAgentConfig,\n} from \"../types\";\nimport { RedeemManager } from \"../redeem/manager\";\nimport { APIClient } from \"../api/client\";\nimport { OTPView } from \"./components/redemption/otp-view\";\nimport { RewardSelectionView } from \"./components/redemption/reward-selection-view\";\nimport { AffordabilityErrorView } from \"./components/redemption/error-view\";\nimport { ConfirmationView } from \"./components/redemption/confirmation-view\";\nimport { OnboardingView } from \"./components/redemption/onboarding-view\";\nimport {\n  getCloseIcon,\n  getChevronLeftIcon,\n  getExternalLinkIcon,\n  getAwardIcon,\n  getShirtIcon,\n  getHeartPulseIcon,\n  getSofaIcon,\n  getTagIcon,\n  getLayoutGridIcon,\n  getLaptopIcon,\n  getBookOpenIcon,\n} from \"./icons\";\n\n/**\n * Detail Panel Component - Handles side panel for offers, earnings, redemption, etc.\n */\nexport class DetailPanel {\n  private element: HTMLDivElement;\n  private currentView:\n    | \"grid\"\n    | \"detail\"\n    | \"brands\"\n    | \"categories\"\n    | \"otp-verify\"\n    | \"onboarding\"\n    | \"reward-select\"\n    | \"confirm\" = \"grid\";\n  private offers: Offer[] = [];\n  private brands: Brand[] = [];\n  private categories: Category[] = [];\n  private onClose: () => void;\n  private onOfferClick: (offerCode: string) => void;\n  private apiClient: APIClient;\n  private redeemManager: RedeemManager | null = null;\n  private currentOfferDetail: OfferDetail | null = null;\n  private selectedVariant: OfferVariant | null = null;\n  private selectedReward: RewardBalance | null = null;\n  private swapAmount: SwapAmountResponse | null = null;\n  private config: MeAgentConfig;\n  private likedOffers: Record<string, boolean> = {};\n\n  constructor(\n    onClose: () => void,\n    onOfferClick: (offerCode: string) => void,\n    config: MeAgentConfig,\n    apiClient: APIClient,\n    redeemManager?: RedeemManager\n  ) {\n    this.onClose = onClose;\n    this.onOfferClick = onOfferClick;\n    this.config = config;\n    this.apiClient = apiClient;\n    this.likedOffers = config.likedOffers || {};\n    this.redeemManager = redeemManager || null;\n    this.element = this.create();\n  }\n\n  /**\n   * Create the offers panel element\n   */\n  private create(): HTMLDivElement {\n    const panel = document.createElement(\"div\");\n    panel.className = \"me-agent-detail-panel\";\n    return panel;\n  }\n\n  /**\n   * Show offers grid\n   */\n  showGrid(offers: Offer[]): void {\n    this.offers = offers;\n    this.currentView = \"grid\";\n\n    this.element.innerHTML = `\n      <div class=\"me-agent-offers-header\">\n        <h3 class=\"me-agent-offers-title\">Available Offers</h3>\n        <button class=\"me-agent-offers-close\" aria-label=\"Close offers\">${getCloseIcon(\n          { width: 20, height: 20 }\n        )}</button>\n      </div>\n      <div class=\"me-agent-offers-grid\">\n        ${offers.map((offer) => this.createOfferCard(offer)).join(\"\")}\n      </div>\n    `;\n\n    // Add event listeners\n    const closeBtn = this.element.querySelector(\".me-agent-offers-close\");\n    closeBtn?.addEventListener(\"click\", this.onClose);\n\n    const cards = this.element.querySelectorAll(\".me-agent-offer-card\");\n    cards.forEach((card, index) => {\n      card.addEventListener(\"click\", () => {\n        this.onOfferClick(offers[index].offerCode);\n      });\n    });\n  }\n\n  /**\n   * Show brands detail list\n   */\n  showBrandsDetail(brands: Brand[]): void {\n    this.brands = brands;\n    this.currentView = \"brands\";\n\n    const brandCardsHtml = brands\n      .map((brand) => this.createBrandCard(brand))\n      .join(\"\");\n\n    this.element.innerHTML = `\n      <div class=\"me-agent-offers-header\">\n        <h3 class=\"me-agent-offers-title\">Brands</h3>\n        <button class=\"me-agent-offers-close\" aria-label=\"Close\">${getCloseIcon(\n          { width: 20, height: 20 }\n        )}</button>\n      </div>\n      <div class=\"me-agent-brands-list\">\n        ${brandCardsHtml}\n      </div>\n    `;\n\n    // Add event listeners\n    const closeBtn = this.element.querySelector(\".me-agent-offers-close\");\n    closeBtn?.addEventListener(\"click\", this.onClose);\n\n    // Show the panel\n    this.show();\n  }\n\n  /**\n   * Format number with commas\n   */\n  private formatNumber(num: number): string {\n    return num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  }\n\n  /**\n   * Create a brand card HTML\n   */\n  private createBrandCard(brand: Brand): string {\n    const logoUrl =\n      brand.logoUrl ||\n      `https://via.placeholder.com/80x80?text=${brand.name.charAt(0)}`;\n\n    // Get reward details\n    const points = brand.rewardDetails?.rules?.[0]?.points || 0;\n    const formattedPoints = this.formatNumber(points);\n    const rewardSymbol = brand.rewardDetails?.rewardInfo?.rewardSymbol || \"\";\n    const rewardOriginalValue = parseFloat(\n      brand.rewardDetails?.rewardInfo?.rewardOriginalValue || \"0\"\n    );\n\n    // Create conversion rate display (1 SYMBOL = $X.XX)\n    const conversionRate =\n      rewardOriginalValue > 0\n        ? `1 ${rewardSymbol} = $${rewardOriginalValue.toFixed(2)}`\n        : \"\";\n\n    // Create callback URL with current origin\n    const currentOrigin =\n      typeof window !== \"undefined\" ? window.location.origin : \"\";\n    const callbackUrl = encodeURIComponent(\n      `${currentOrigin}?brand=${brand.id}&action=signup`\n    );\n\n    // Construct signup URL - use shopifyStoreUrl if available, otherwise websiteUrl\n    let signupUrl = \"#\";\n    if (brand.shopifyStoreUrl) {\n      // For Shopify stores, add https:// if not present and append callback\n      const shopifyUrl = brand.shopifyStoreUrl.startsWith(\"http\")\n        ? brand.shopifyStoreUrl\n        : `https://${brand.shopifyStoreUrl}`;\n      signupUrl = `${shopifyUrl}?return_to=${callbackUrl}`;\n    } else if (brand.websiteUrl) {\n      signupUrl = `${brand.websiteUrl}?return_to=${callbackUrl}`;\n    }\n\n    return `\n      <div class=\"me-agent-brand-card\" data-brand-id=\"${brand.id}\">\n        <div class=\"me-agent-brand-logo-container\">\n          <img src=\"${logoUrl}\" alt=\"${\n      brand.name\n    }\" class=\"me-agent-brand-logo\" />\n        </div>\n        <div class=\"me-agent-brand-info\">\n          <h4 class=\"me-agent-brand-name\">${brand.name}</h4>\n          ${\n            conversionRate\n              ? `<p class=\"me-agent-brand-conversion\">${conversionRate}</p>`\n              : \"\"\n          }\n        </div>\n        <div class=\"me-agent-brand-actions\">\n          ${\n            points\n              ? `<div class=\"me-agent-brand-reward-amount\">${formattedPoints} <span class=\"me-agent-brand-reward-symbol\">${rewardSymbol}</span></div>`\n              : \"\"\n          }\n          <a href=\"${signupUrl}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"me-agent-brand-signup-button\">\n            <span>Sign Up & Earn</span>\n            ${getExternalLinkIcon({ width: 12, height: 12, color: \"#0F0F0F\" })}\n          </a>\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Show categories detail with 3-column grid\n   */\n  showCategoriesDetail(categories: Category[]): void {\n    this.categories = categories;\n    this.currentView = \"categories\";\n\n    const categoryCardsHtml = categories\n      .map((category) => this.createCategoryCard(category))\n      .join(\"\");\n\n    this.element.innerHTML = `\n      <div class=\"me-agent-offers-header\">\n        <h3 class=\"me-agent-offers-title\">Categories</h3>\n        <button class=\"me-agent-offers-close\" aria-label=\"Close\">${getCloseIcon(\n          { width: 20, height: 20 }\n        )}</button>\n      </div>\n      <div class=\"me-agent-categories-grid\">\n        ${categoryCardsHtml}\n      </div>\n    `;\n\n    // Add event listeners\n    const closeBtn = this.element.querySelector(\".me-agent-offers-close\");\n    closeBtn?.addEventListener(\"click\", this.onClose);\n\n    // Add click listeners to category cards\n    const categoryCards = this.element.querySelectorAll(\n      \".me-agent-category-card\"\n    );\n    categoryCards.forEach((card) => {\n      card.addEventListener(\"click\", async () => {\n        const categoryId = card.getAttribute(\"data-category-id\");\n        if (categoryId) {\n          await this.handleCategoryClick(categoryId);\n        }\n      });\n    });\n\n    // Show the panel\n    this.show();\n  }\n\n  /**\n   * Handle category card click - fetch brands and offers\n   */\n  private async handleCategoryClick(categoryId: string): Promise<void> {\n    try {\n      // Show loading state\n      this.element.innerHTML = `\n        <div class=\"me-agent-offers-header\">\n          <button class=\"me-agent-offers-back\" aria-label=\"Back\">${getChevronLeftIcon(\n            { width: 20, height: 20 }\n          )}</button>\n          <h3 class=\"me-agent-offers-title\">Loading...</h3>\n          <button class=\"me-agent-offers-close\" aria-label=\"Close\">${getCloseIcon(\n            { width: 20, height: 20 }\n          )}</button>\n        </div>\n        <div class=\"me-agent-brands-list\">\n          <div class=\"me-agent-loading\">Loading brands...</div>\n        </div>\n      `;\n\n      // Fetch brands with purchase earning methods for this category\n      const brands = await this.apiClient.fetchBrandsByCategoryId(categoryId);\n\n      // Fetch offers for each brand in parallel\n      const brandsWithOffers = await Promise.all(\n        brands.map(async (brand: any) => {\n          try {\n            const offers = await this.apiClient.fetchOffersByBrandId(brand.id);\n            return { ...brand, offers };\n          } catch (error) {\n            console.error(\n              `Error fetching offers for brand ${brand.id}:`,\n              error\n            );\n            return { ...brand, offers: [] };\n          }\n        })\n      );\n\n      // Filter out brands with no offers\n      const brandsWithProducts = brandsWithOffers.filter(\n        (brand) => brand.offers && brand.offers.length > 0\n      );\n\n      // Show brands with offers\n      this.showBrandsWithOffers(brandsWithProducts, categoryId);\n    } catch (error) {\n      console.error(\"Error handling category click:\", error);\n      // Show error state\n      this.element.innerHTML = `\n        <div class=\"me-agent-offers-header\">\n          <button class=\"me-agent-offers-back\" aria-label=\"Back\">${getChevronLeftIcon(\n            { width: 20, height: 20 }\n          )}</button>\n          <h3 class=\"me-agent-offers-title\">Error</h3>\n          <button class=\"me-agent-offers-close\" aria-label=\"Close\">${getCloseIcon(\n            { width: 20, height: 20 }\n          )}</button>\n        </div>\n        <div class=\"me-agent-brands-list\">\n          <p>Failed to load brands. Please try again.</p>\n        </div>\n      `;\n    }\n  }\n\n  /**\n   * Show brands with their offers\n   */\n  private showBrandsWithOffers(\n    brandsWithOffers: any[],\n    categoryId: string\n  ): void {\n    const brandsHtml = brandsWithOffers\n      .map((brand) => this.createBrandWithOffersCard(brand))\n      .join(\"\");\n\n    this.element.innerHTML = `\n      <div class=\"me-agent-offers-header\">\n        <button class=\"me-agent-offers-back\" aria-label=\"Back\">${getChevronLeftIcon(\n          { width: 20, height: 20 }\n        )}</button>\n        <h3 class=\"me-agent-offers-title\">Brands & Offers</h3>\n        <button class=\"me-agent-offers-close\" aria-label=\"Close\">${getCloseIcon(\n          { width: 20, height: 20 }\n        )}</button>\n      </div>\n      <div class=\"me-agent-brands-offers-list\">\n        ${\n          brandsHtml ||\n          '<p class=\"me-agent-empty-state\">No brands found with available offers.</p>'\n        }\n      </div>\n    `;\n\n    // Add event listeners\n    const backBtn = this.element.querySelector(\".me-agent-offers-back\");\n    backBtn?.addEventListener(\"click\", () => {\n      this.showCategoriesDetail(this.categories);\n    });\n\n    const closeBtn = this.element.querySelector(\".me-agent-offers-close\");\n    closeBtn?.addEventListener(\"click\", this.onClose);\n\n    // Add click listeners to offer cards\n    const offerCards = this.element.querySelectorAll(\n      \".me-agent-brand-offer-card\"\n    );\n    offerCards.forEach((card) => {\n      card.addEventListener(\"click\", () => {\n        const productUrl = card.getAttribute(\"data-product-url\");\n        if (productUrl) {\n          // Open product URL in new tab\n          window.open(productUrl, \"_blank\", \"noopener,noreferrer\");\n        }\n      });\n    });\n  }\n\n  /**\n   * Create a brand card with horizontal offers\n   */\n  private createBrandWithOffersCard(brand: any): string {\n    const logoUrl =\n      brand.logoUrl ||\n      `https://via.placeholder.com/60x60?text=${brand.name.charAt(0)}`;\n\n    // Calculate earning amount (percentage of purchase)\n    const earningPercentage =\n      brand.rewardDetails?.rules?.[0]?.earningPercentage || 0;\n    const rewardSymbol = brand.rewardDetails?.rewardInfo?.rewardSymbol || \"PTS\";\n    const rewardOriginalValue = parseFloat(\n      brand.rewardDetails?.rewardInfo?.rewardOriginalValue || \"0\"\n    );\n\n    // Format earning display\n    const earningDisplay =\n      rewardOriginalValue > 0\n        ? `Earn ${earningPercentage}% back (1 ${rewardSymbol} = $${rewardOriginalValue.toFixed(\n            2\n          )})`\n        : `Earn ${earningPercentage}% back in ${rewardSymbol}`;\n\n    // Create offers HTML\n    const offersHtml = brand.offers\n      .slice(0, 10) // Limit to 10 offers per brand\n      .map((offer: any) => this.createBrandOfferCard(offer))\n      .join(\"\");\n\n    return `\n      <div class=\"me-agent-brand-offers-section\">\n        <div class=\"me-agent-brand-offers-header\">\n          <div class=\"me-agent-brand-offers-info\">\n            <img src=\"${logoUrl}\" alt=\"${brand.name}\" class=\"me-agent-brand-offers-logo\" />\n            <h4 class=\"me-agent-brand-offers-name\">${brand.name}</h4>\n          </div>\n          <div class=\"me-agent-brand-earning-amount\">${earningDisplay}</div>\n        </div>\n        <div class=\"me-agent-brand-offers-scroll\">\n          ${offersHtml}\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Create an offer card for brand offers view\n   */\n  private createBrandOfferCard(offer: any): string {\n    const imageUrl =\n      offer.coverImage || \"https://via.placeholder.com/200x200?text=No+Image\";\n    const discountPercentage = parseFloat(offer.discountPercentage || \"0\");\n    const originalPrice = parseFloat(offer.originalPrice || \"0\");\n    const discountedPrice = originalPrice * (1 - discountPercentage / 100);\n    \n    // Extract product URL from the offer\n    const productUrl = offer.product?.productUrl || \"\";\n    const fullProductUrl = productUrl && !productUrl.startsWith(\"http\") \n      ? `https://${productUrl}` \n      : productUrl;\n\n    return `\n      <div class=\"me-agent-brand-offer-card\" data-offer-code=\"${\n        offer.offerCode\n      }\" data-product-url=\"${fullProductUrl}\">\n        <div class=\"me-agent-brand-offer-image-container\">\n          <img src=\"${imageUrl}\" alt=\"${\n      offer.name\n    }\" class=\"me-agent-brand-offer-image\" />\n          ${\n            discountPercentage > 0\n              ? `<div class=\"me-agent-brand-offer-badge\">${discountPercentage.toFixed(\n                  0\n                )}% OFF</div>`\n              : \"\"\n          }\n        </div>\n        <div class=\"me-agent-brand-offer-info\">\n          <h5 class=\"me-agent-brand-offer-name\">${offer.name}</h5>\n          <div class=\"me-agent-brand-offer-pricing\">\n            ${\n              discountPercentage > 0\n                ? `\n              <span class=\"me-agent-brand-offer-price\">$${discountedPrice.toFixed(\n                2\n              )}</span>\n              <span class=\"me-agent-brand-offer-original-price\">$${originalPrice.toFixed(\n                2\n              )}</span>\n            `\n                : `<span class=\"me-agent-brand-offer-price\">$${originalPrice.toFixed(\n                    2\n                  )}</span>`\n            }\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Create a category card HTML\n   */\n  private createCategoryCard(category: Category): string {\n    const iconMap: Record<string, () => string> = {\n      award: () => getAwardIcon({ width: 16, height: 16, color: \"white\" }),\n      shirt: () => getShirtIcon({ width: 24, height: 24, color: \"white\" }),\n      heartPulse: () =>\n        getHeartPulseIcon({ width: 16, height: 16, color: \"white\" }),\n      sofa: () => getSofaIcon({ width: 16, height: 16, color: \"white\" }),\n      tag: () => getTagIcon({ width: 16, height: 16, color: \"white\" }),\n      layoutGrid: () =>\n        getLayoutGridIcon({ width: 16, height: 16, color: \"white\" }),\n      laptop: () => getLaptopIcon({ width: 16, height: 16, color: \"white\" }),\n      bookOpen: () =>\n        getBookOpenIcon({ width: 16, height: 16, color: \"white\" }),\n    };\n\n    const iconSvg =\n      category.icon && iconMap[category.icon] ? iconMap[category.icon]() : \"\";\n    const title = (category.title || category.categoryName).replace(\n      /\\n/g,\n      \"<br>\"\n    );\n    const brandCountText = `${category.brandCount} ${\n      category.brandCount === 1 ? \"Brand\" : \"Brands\"\n    }`;\n\n    return `\n      <div class=\"me-agent-category-card\" data-category-id=\"${category.categoryId}\">\n        <div class=\"me-agent-category-icon-overlay\">\n          ${iconSvg}\n        </div>\n        <div class=\"me-agent-category-info\">\n          <h4 class=\"me-agent-category-title\">${title}</h4>\n          <p class=\"me-agent-category-brand-count\">${brandCountText}</p>\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Create an offer card HTML\n   */\n  private createOfferCard(offer: Offer): string {\n    const imageUrl =\n      offer.image || \"https://via.placeholder.com/300x200?text=No+Image\";\n\n    const discountedPrice = (\n      offer.price *\n      (1 - offer.discountPercentage / 100)\n    ).toFixed(2);\n\n    return `\n      <div class=\"me-agent-offer-card\" data-offer-code=\"${offer.offerCode}\">\n        <div class=\"me-agent-offer-image-container\">\n          <div class=\"me-agent-offer-image\" style=\"background-image: url('${imageUrl}')\"></div>\n          <span class=\"me-agent-offer-badge\">${\n            offer.discountPercentage\n          }% Off</span>\n        </div>\n        <div class=\"me-agent-offer-info\">\n          <h4 class=\"me-agent-offer-name\">${offer.name}</h4>\n          <div class=\"me-agent-offer-pricing\">\n            <span class=\"me-agent-offer-price\">$${discountedPrice}</span>\n            <span class=\"me-agent-offer-original-price\">$${offer.price.toFixed(\n              2\n            )}</span>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Show loading state\n   */\n  showLoading(message: string = \"Loading Offer...\"): void {\n    this.element.innerHTML = `\n      <div class=\"me-agent-offers-header\">\n        <h3 class=\"me-agent-offers-title\">${message}</h3>\n        <button class=\"me-agent-offers-close\" aria-label=\"Close offers\">${getCloseIcon(\n          { width: 20, height: 20 }\n        )}</button>\n      </div>\n      <div class=\"me-agent-offers-loading\">\n        <div class=\"me-agent-loading\">\n          <div class=\"me-agent-loading-dot\"></div>\n          <div class=\"me-agent-loading-dot\"></div>\n          <div class=\"me-agent-loading-dot\"></div>\n        </div>\n      </div>\n    `;\n\n    const closeBtn = this.element.querySelector(\".me-agent-offers-close\");\n    closeBtn?.addEventListener(\"click\", this.onClose);\n  }\n\n  /**\n   * Render header with back button\n   */\n  private renderHeader(backText: string = \"Back\"): string {\n    return `\n      <div class=\"me-agent-offers-header\">\n        <button class=\"me-agent-offers-back\" aria-label=\"Back\">\n          ${getChevronLeftIcon({ width: 20, height: 20 })}\n          <span>${backText}</span>\n        </button>\n        <button class=\"me-agent-offers-close\" aria-label=\"Close\">${getCloseIcon(\n          { width: 20, height: 20 }\n        )}</button>\n      </div>\n    `;\n  }\n\n  /**\n   * Show offer details\n   */\n  showDetail(detail: OfferDetail): void {\n    this.currentView = \"detail\";\n    this.currentOfferDetail = detail;\n\n    // Auto-select first variant by default\n    if (detail.offerVariants && detail.offerVariants.length > 0) {\n      this.selectedVariant = detail.offerVariants[0];\n    }\n\n    const finalPrice = this.calculateFinalPrice(detail);\n    const discountPercentage =\n      detail.redemptionMethod.discountPercentage || \"20\";\n    const isLiked = this.likedOffers[detail.id] || false;\n\n    // Prepare images for carousel\n    const images =\n      detail.offerImages?.length > 0\n        ? detail.offerImages.map((img) => img.url)\n        : [\n            detail.coverImage ||\n              \"https://via.placeholder.com/600x400?text=No+Image\",\n          ];\n\n    // Render variants if available\n    const variantsHtml = this.renderVariantSelector(detail.offerVariants);\n\n    // Action buttons\n    const hasCallbacks = !!(\n      this.config.onAddToCart ||\n      this.config.onShare ||\n      this.config.onLikeUnlike\n    );\n    const actionButtonsHtml = hasCallbacks\n      ? `\n      ${\n        this.config.onAddToCart\n          ? '<button class=\"me-agent-action-button me-agent-add-to-cart\">Add To Cart</button>'\n          : \"\"\n      }\n      ${\n        this.config.onLikeUnlike\n          ? `<button class=\"me-agent-action-icon ${\n              isLiked ? \"liked\" : \"\"\n            }\" data-action=\"like\">\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"${\n          isLiked ? \"currentColor\" : \"none\"\n        }\" stroke=\"currentColor\" stroke-width=\"2\">\n          <path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z\"></path>\n        </svg>\n      </button>`\n          : \"\"\n      }\n      ${\n        this.config.onShare\n          ? `<button class=\"me-agent-action-icon\" data-action=\"share\">\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <path d=\"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8\"></path>\n          <polyline points=\"16 6 12 2 8 6\"></polyline>\n          <line x1=\"12\" y1=\"2\" x2=\"12\" y2=\"15\"></line>\n        </svg>\n      </button>`\n          : \"\"\n      }\n    `\n      : \"\";\n\n    this.element.innerHTML = `\n      ${this.renderHeader(\"Product details\")}\n      <div class=\"me-agent-offer-detail\">\n        <div class=\"me-agent-offer-detail-scroll\">\n          <!-- Image Carousel -->\n          <div class=\"me-agent-image-carousel\">\n            ${images\n              .map(\n                (img, i) => `\n              <div class=\"me-agent-carousel-image ${\n                i === 0 ? \"active\" : \"\"\n              }\" style=\"background-image: url('${img}')\"></div>\n            `\n              )\n              .join(\"\")}\n          </div>\n\n          <!-- Product Info -->\n          <div class=\"me-agent-detail-info\">\n            <h3 class=\"me-agent-detail-title\">${detail.name}${\n      this.selectedVariant ? ` - ${this.selectedVariant.variant.name}` : \"\"\n    }</h3>\n            \n            <div class=\"me-agent-detail-pricing\">\n              <span class=\"me-agent-detail-price\">$${finalPrice}</span>\n              <span class=\"me-agent-detail-original-price\">$${\n                detail.originalPrice\n              }</span>\n            </div>\n\n            <div class=\"me-agent-detail-badge\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\"/>\n              </svg>\n              ${discountPercentage}% Off With Coupon\n            </div>\n\n            <p class=\"me-agent-detail-shipping\">Ships To Texas, United State Of America</p>\n\n            ${variantsHtml}\n\n            <!-- Quantity Selector -->\n            <div class=\"me-agent-quantity-section\">\n              <label class=\"me-agent-section-label\">Quantity</label>\n              <div class=\"me-agent-quantity-selector\">\n                <button class=\"me-agent-quantity-btn\" data-action=\"decrease\">−</button>\n                <input type=\"number\" class=\"me-agent-quantity-input\" value=\"0\" min=\"0\" />\n                <button class=\"me-agent-quantity-btn\" data-action=\"increase\">+</button>\n              </div>\n            </div>\n\n            <!-- Description & Reviews Tabs -->\n            <div class=\"me-agent-tabs\">\n              <button class=\"me-agent-tab active\" data-tab=\"description\">Description</button>\n              <button class=\"me-agent-tab\" data-tab=\"reviews\">Reviews</button>\n            </div>\n\n            <div class=\"me-agent-tab-content\">\n              <div class=\"me-agent-tab-pane active\" data-pane=\"description\">\n                <p class=\"me-agent-description-text\">${\n                  detail.description || \"No description available\"\n                }</p>\n              </div>\n              <div class=\"me-agent-tab-pane\" data-pane=\"reviews\">\n                ${this.renderReviews()}\n              </div>\n            </div>\n          </div>\n\n          <!-- Redemption Info -->\n          <div class=\"me-agent-redemption-info\">\n            <p>Redeem this offer to get a unique coupon code, then enter the code on checkout and the discount will be applied to your total before payment.</p>\n          </div>\n        </div>\n\n        <!-- Bottom Actions -->\n        <div class=\"me-agent-detail-actions\">\n          <button class=\"me-agent-redeem-button\">Redeem Offer</button>\n          ${\n            hasCallbacks\n              ? `<div class=\"me-agent-secondary-actions\">${actionButtonsHtml}</div>`\n              : \"\"\n          }\n        </div>\n      </div>\n    `;\n\n    this.setupDetailListeners();\n  }\n\n  /**\n   * Render variant selector with images\n   */\n  private renderVariantSelector(offerVariants?: OfferVariant[]): string {\n    if (!offerVariants || offerVariants.length === 0) {\n      return \"\";\n    }\n\n    return `\n      <div class=\"me-agent-variant-section\">\n        <label class=\"me-agent-section-label\">Variant</label>\n        <div class=\"me-agent-variant-grid\">\n          ${offerVariants\n            .map((offerVariant, index) => {\n              const variant = offerVariant.variant;\n              const image =\n                variant.productImages?.[0]?.url ||\n                \"https://via.placeholder.com/80x80\";\n              const discountPct = offerVariant.discountPercentage || \"0\";\n              const isOutOfStock = offerVariant.inventory <= 0;\n\n              return `\n              <button \n                class=\"me-agent-variant-card ${index === 0 ? \"active\" : \"\"} ${\n                isOutOfStock ? \"disabled\" : \"\"\n              }\" \n                data-variant-index=\"${index}\"\n                ${isOutOfStock ? \"disabled\" : \"\"}\n              >\n                <div class=\"me-agent-variant-image\" style=\"background-image: url('${image}')\">\n                  ${\n                    !isOutOfStock\n                      ? `<span class=\"me-agent-variant-discount\">\n                    <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                      <path d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\"/>\n                    </svg>\n                    ${discountPct}% Off\n                  </span>`\n                      : \"\"\n                  }\n                </div>\n              </button>\n            `;\n            })\n            .join(\"\")}\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Render dummy reviews section\n   */\n  private renderReviews(): string {\n    const dummyReviews = [\n      {\n        name: \"John Doe\",\n        rating: 4,\n        text: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat\",\n      },\n      {\n        name: \"Jane Smith\",\n        rating: 5,\n        text: \"Great product! Highly recommend. Lorem ipsum dolor sit amet, consectetur adipiscing elit.\",\n      },\n      {\n        name: \"Bob Johnson\",\n        rating: 4,\n        text: \"Good quality and fast shipping. Lorem ipsum dolor sit amet, consectetur adipiscing elit.\",\n      },\n    ];\n\n    const ratings = [\n      { stars: 5, count: 20 },\n      { stars: 4, count: 50 },\n      { stars: 3, count: 20 },\n      { stars: 2, count: 6 },\n      { stars: 1, count: 4 },\n    ];\n\n    const totalReviews = ratings.reduce((sum, r) => sum + r.count, 0);\n    const avgRating = (\n      ratings.reduce((sum, r) => sum + r.stars * r.count, 0) / totalReviews\n    ).toFixed(1);\n\n    return `\n      <div class=\"me-agent-reviews\">\n        <div class=\"me-agent-reviews-summary\">\n          <div class=\"me-agent-reviews-bars\">\n            ${ratings\n              .map(\n                (r) => `\n              <div class=\"me-agent-rating-row\">\n                <div class=\"me-agent-stars-small\">\n                  ${Array(5)\n                    .fill(0)\n                    .map(\n                      (_, i) =>\n                        `<span class=\"${i < r.stars ? \"filled\" : \"\"}\">★</span>`\n                    )\n                    .join(\"\")}\n                </div>\n                <div class=\"me-agent-rating-bar\">\n                  <div class=\"me-agent-rating-fill\" style=\"width: ${\n                    (r.count / totalReviews) * 100\n                  }%\"></div>\n                </div>\n                <span class=\"me-agent-rating-count\">${r.count}</span>\n              </div>\n            `\n              )\n              .join(\"\")}\n          </div>\n          <div class=\"me-agent-reviews-score\">\n            <div class=\"me-agent-score-number\">${avgRating} <span>/ 5</span></div>\n            <div class=\"me-agent-stars-large\">\n              ${Array(5)\n                .fill(0)\n                .map(\n                  (_, i) =>\n                    `<span class=\"${\n                      i < Math.floor(parseFloat(avgRating)) ? \"filled\" : \"\"\n                    }\">★</span>`\n                )\n                .join(\"\")}\n            </div>\n            <div class=\"me-agent-review-count\">${totalReviews} Reviews</div>\n          </div>\n        </div>\n\n        <div class=\"me-agent-reviews-list\">\n          ${dummyReviews\n            .map(\n              (review) => `\n            <div class=\"me-agent-review-item\">\n              <div class=\"me-agent-review-header\">\n                <div class=\"me-agent-reviewer-avatar\"></div>\n                <div>\n                  <div class=\"me-agent-reviewer-name\">${review.name}</div>\n                  <div class=\"me-agent-review-stars\">\n                    ${Array(5)\n                      .fill(0)\n                      .map(\n                        (_, i) =>\n                          `<span class=\"${\n                            i < review.rating ? \"filled\" : \"\"\n                          }\">★</span>`\n                      )\n                      .join(\"\")}\n                  </div>\n                </div>\n              </div>\n              <p class=\"me-agent-review-text\">${review.text}</p>\n            </div>\n          `\n            )\n            .join(\"\")}\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Setup detail page event listeners\n   */\n  private setupDetailListeners(): void {\n    // Back button\n    const backBtn = this.element.querySelector(\".me-agent-offers-back\");\n    backBtn?.addEventListener(\"click\", () => this.showGrid(this.offers));\n\n    // Close button\n    const closeBtn = this.element.querySelector(\".me-agent-offers-close\");\n    closeBtn?.addEventListener(\"click\", this.onClose);\n\n    // Redeem button\n    const redeemBtn = this.element.querySelector(\".me-agent-redeem-button\");\n    redeemBtn?.addEventListener(\"click\", () => this.handleClaimOffer());\n\n    // Quantity controls\n    const quantityInput = this.element.querySelector(\n      \".me-agent-quantity-input\"\n    ) as HTMLInputElement;\n    const decreaseBtn = this.element.querySelector('[data-action=\"decrease\"]');\n    const increaseBtn = this.element.querySelector('[data-action=\"increase\"]');\n\n    decreaseBtn?.addEventListener(\"click\", () => {\n      const val = parseInt(quantityInput.value || \"0\");\n      if (val > 0) quantityInput.value = String(val - 1);\n    });\n\n    increaseBtn?.addEventListener(\"click\", () => {\n      const val = parseInt(quantityInput.value || \"0\");\n      quantityInput.value = String(val + 1);\n    });\n\n    // Tab switching\n    const tabs = this.element.querySelectorAll(\".me-agent-tab\");\n    const panes = this.element.querySelectorAll(\".me-agent-tab-pane\");\n\n    tabs.forEach((tab) => {\n      tab.addEventListener(\"click\", () => {\n        const tabName = tab.getAttribute(\"data-tab\");\n        tabs.forEach((t) => t.classList.remove(\"active\"));\n        panes.forEach((p) => p.classList.remove(\"active\"));\n        tab.classList.add(\"active\");\n        const activePane = this.element.querySelector(\n          `[data-pane=\"${tabName}\"]`\n        );\n        activePane?.classList.add(\"active\");\n      });\n    });\n\n    // Variant selection\n    const variantCards = this.element.querySelectorAll(\n      \".me-agent-variant-card\"\n    );\n    variantCards.forEach((card, index) => {\n      card.addEventListener(\"click\", () => {\n        variantCards.forEach((c) => c.classList.remove(\"active\"));\n        card.classList.add(\"active\");\n        if (this.currentOfferDetail?.offerVariants) {\n          this.selectedVariant = this.currentOfferDetail.offerVariants[index];\n        }\n      });\n    });\n\n    // Action buttons\n    if (this.config.onAddToCart && this.currentOfferDetail) {\n      const addToCartBtn = this.element.querySelector(\".me-agent-add-to-cart\");\n      addToCartBtn?.addEventListener(\"click\", () => {\n        if (this.currentOfferDetail && this.config.onAddToCart) {\n          this.config.onAddToCart(this.currentOfferDetail);\n        }\n      });\n    }\n\n    if (this.config.onShare && this.currentOfferDetail) {\n      const shareBtn = this.element.querySelector('[data-action=\"share\"]');\n      shareBtn?.addEventListener(\"click\", () => {\n        if (this.currentOfferDetail && this.config.onShare) {\n          this.config.onShare(this.currentOfferDetail);\n        }\n      });\n    }\n\n    if (this.config.onLikeUnlike && this.currentOfferDetail) {\n      const likeBtn = this.element.querySelector('[data-action=\"like\"]');\n      likeBtn?.addEventListener(\"click\", () => {\n        if (this.currentOfferDetail && this.config.onLikeUnlike) {\n          const isLiked = !this.likedOffers[this.currentOfferDetail.id];\n          this.likedOffers[this.currentOfferDetail.id] = isLiked;\n          likeBtn.classList.toggle(\"liked\", isLiked);\n          this.config.onLikeUnlike(this.currentOfferDetail, isLiked);\n        }\n      });\n    }\n  }\n\n  /**\n   * Setup variant selection listeners\n   */\n  private setupVariantListeners(): void {\n    if (!this.currentOfferDetail?.offerVariants) return;\n\n    const variantButtons = this.element.querySelectorAll(\n      \".me-agent-variant-chip\"\n    );\n    variantButtons.forEach((btn) => {\n      btn.addEventListener(\"click\", (e) => {\n        const target = e.currentTarget as HTMLElement;\n        const index = parseInt(\n          target.getAttribute(\"data-variant-index\") || \"0\"\n        );\n\n        // Update active state\n        variantButtons.forEach((b) => b.classList.remove(\"active\"));\n        target.classList.add(\"active\");\n\n        // Update selected variant\n        if (this.currentOfferDetail?.offerVariants) {\n          this.selectedVariant = this.currentOfferDetail.offerVariants[index];\n        }\n      });\n    });\n  }\n\n  /**\n   * Calculate final price\n   */\n  private calculateFinalPrice(detail: OfferDetail): string {\n    const original = parseFloat(detail.originalPrice);\n\n    if (detail.redemptionMethod.discountPercentage) {\n      const discount = parseFloat(detail.redemptionMethod.discountPercentage);\n      return (original * (1 - discount / 100)).toFixed(2);\n    } else if (detail.redemptionMethod.discountAmount) {\n      const discount = parseFloat(detail.redemptionMethod.discountAmount);\n      return (original - discount).toFixed(2);\n    }\n\n    return original.toFixed(2);\n  }\n\n  /**\n   * Handle claim offer button click\n   */\n  private async handleClaimOffer(): Promise<void> {\n    if (!this.redeemManager || !this.redeemManager.isMagicConfigured()) {\n      alert(\"Redemption is not configured. Please contact support.\");\n      return;\n    }\n\n    if (!this.currentOfferDetail) {\n      return;\n    }\n\n    // Show loading on the claim button\n    const claimBtn = this.element.querySelector(\n      \".me-agent-offer-claim-button\"\n    ) as HTMLButtonElement;\n    if (claimBtn) {\n      claimBtn.disabled = true;\n      claimBtn.textContent = \"Processing...\";\n    }\n\n    try {\n      // Update Magic with brand's network if needed\n      if (this.currentOfferDetail.brand.network) {\n        await this.redeemManager.updateNetwork(\n          this.currentOfferDetail.brand.network\n        );\n      }\n\n      // Proceed to authentication check (variant already selected from horizontal list)\n      await this.proceedToAuthentication();\n    } catch (error) {\n      console.error(\"Error handling claim offer:\", error);\n      alert(\"Failed to process claim. Please try again.\");\n\n      // Reset button state on error\n      if (claimBtn) {\n        claimBtn.disabled = false;\n        claimBtn.textContent = \"Claim Offer\";\n      }\n    }\n  }\n\n  /**\n   * Proceed to authentication check\n   */\n  private async proceedToAuthentication(): Promise<void> {\n    if (!this.redeemManager) return;\n\n    try {\n      // Check if user is already authenticated\n      const isAuthenticated = await this.redeemManager.isAuthenticated();\n\n      if (isAuthenticated) {\n        // Already authenticated with Magic, check ME Protocol onboarding\n        await this.checkAndHandleOnboarding();\n      } else {\n        // Show OTP verification view\n        this.showOTPView();\n      }\n    } catch (error) {\n      console.error(\"Error in authentication:\", error);\n      alert(\"Failed to verify authentication. Please try again.\");\n    }\n  }\n\n  /**\n   * Check ME Protocol login and handle accordingly\n   */\n  private async checkAndHandleOnboarding(): Promise<void> {\n    if (!this.redeemManager) {\n      return;\n    }\n\n    try {\n      // Clear any cached wallet address to force refresh from Magic\n      this.redeemManager.clearWalletAddressCache();\n\n      // Check if already logged in to ME Protocol\n      if (this.redeemManager.isMEProtocolLoggedIn()) {\n        // Already logged in, proceed to reward selection\n        await this.fetchAndShowRewardSelection();\n        return;\n      }\n\n      // Show loading view and login to ME Protocol\n      await this.showAndExecuteLogin();\n    } catch (error) {\n      console.error(\"Error in ME Protocol login:\", error);\n      alert(\"Failed to authenticate. Please try again.\");\n      if (this.currentOfferDetail) {\n        this.showDetail(this.currentOfferDetail);\n      }\n    }\n  }\n\n  /**\n   * Show loading view and execute ME Protocol login\n   */\n  private async showAndExecuteLogin(): Promise<void> {\n    if (!this.redeemManager) {\n      return;\n    }\n\n    this.currentView = \"onboarding\";\n    this.element.innerHTML = OnboardingView.render();\n\n    // Start login process (creates account if new user)\n    await OnboardingView.startOnboarding(\n      this.element,\n      this.redeemManager,\n      () => {\n        // Login successful, proceed to reward selection\n        this.fetchAndShowRewardSelection();\n      },\n      (error: string) => {\n        // Login failed\n        alert(error);\n        if (this.currentOfferDetail) {\n          this.showDetail(this.currentOfferDetail);\n        }\n      }\n    );\n  }\n\n  /**\n   * Show OTP verification view\n   */\n  private async showOTPView(): Promise<void> {\n    this.currentView = \"otp-verify\";\n\n    if (!this.redeemManager) return;\n\n    const email = this.redeemManager.getEmail();\n    let autoSendOTP = false;\n\n    // Show loading while sending OTP\n    if (email) {\n      this.showLoading(\"Sending verification code...\");\n\n      try {\n        await this.redeemManager.sendOTP(email);\n        autoSendOTP = true;\n      } catch (error) {\n        console.error(\"Error auto-sending OTP:\", error);\n        // If auto-send fails, show the form\n        autoSendOTP = false;\n      }\n    }\n\n    this.element.innerHTML = OTPView.render(\n      () => {\n        if (this.currentOfferDetail) {\n          this.showDetail(this.currentOfferDetail);\n        }\n      },\n      this.onClose,\n      () => this.checkAndHandleOnboarding(), // Check onboarding after OTP success\n      this.redeemManager,\n      autoSendOTP\n    );\n\n    OTPView.setupListeners(\n      this.element,\n      () => {\n        if (this.currentOfferDetail) {\n          this.showDetail(this.currentOfferDetail);\n        }\n      },\n      this.onClose,\n      () => this.checkAndHandleOnboarding(), // Check onboarding after OTP success\n      this.redeemManager,\n      autoSendOTP\n    );\n  }\n\n  /**\n   * Fetch balances and show reward selection\n   */\n  private async fetchAndShowRewardSelection(): Promise<void> {\n    if (!this.redeemManager) {\n      return;\n    }\n\n    try {\n      this.showLoading();\n      const balances = await this.redeemManager.fetchBalances();\n\n      if (balances.length === 0) {\n        alert(\"You don't have any rewards yet. Please earn rewards first.\");\n        if (this.currentOfferDetail) {\n          this.showDetail(this.currentOfferDetail);\n        }\n        return;\n      }\n\n      this.showRewardSelection(balances);\n    } catch (error) {\n      console.error(\"Error fetching balances:\", error);\n      alert(\"Failed to fetch your rewards. Please try again.\");\n      if (this.currentOfferDetail) {\n        this.showDetail(this.currentOfferDetail);\n      }\n    }\n  }\n\n  /**\n   * Show reward selection view\n   */\n  private showRewardSelection(balances: RewardBalance[]): void {\n    this.currentView = \"reward-select\";\n\n    this.element.innerHTML = RewardSelectionView.render(balances);\n\n    RewardSelectionView.setupListeners(\n      this.element,\n      balances,\n      () => {\n        if (this.currentOfferDetail) {\n          this.showDetail(this.currentOfferDetail);\n        }\n      },\n      this.onClose,\n      (reward) => this.handleRewardSelect(reward)\n    );\n  }\n\n  /**\n   * Handle reward selection\n   */\n  private async handleRewardSelect(reward: RewardBalance): Promise<void> {\n    if (!this.redeemManager || !this.currentOfferDetail) {\n      return;\n    }\n\n    this.selectedReward = reward;\n\n    try {\n      this.showLoading();\n\n      // Calculate swap amount with selected variant\n      const swapAmount = await this.redeemManager.calculateSwapAmount(\n        reward.reward.contractAddress,\n        this.currentOfferDetail,\n        this.selectedVariant?.id\n      );\n\n      this.swapAmount = swapAmount;\n\n      // Check affordability\n      const canAfford = this.redeemManager.canAffordOffer(\n        reward,\n        swapAmount.amountNeeded\n      );\n\n      if (!canAfford) {\n        this.showAffordabilityError(reward, swapAmount.amountNeeded);\n      } else {\n        this.showConfirmation(reward, swapAmount);\n      }\n    } catch (error) {\n      console.error(\"Error calculating swap amount:\", error);\n      alert(\"Failed to calculate redemption amount. Please try again.\");\n      this.fetchAndShowRewardSelection();\n    }\n  }\n\n  /**\n   * Show affordability error\n   */\n  private showAffordabilityError(\n    reward: RewardBalance,\n    amountNeeded: number\n  ): void {\n    this.element.innerHTML = AffordabilityErrorView.render(\n      reward,\n      amountNeeded\n    );\n\n    AffordabilityErrorView.setupListeners(\n      this.element,\n      () => this.fetchAndShowRewardSelection(),\n      this.onClose\n    );\n  }\n\n  /**\n   * Show confirmation view\n   */\n  private showConfirmation(\n    reward: RewardBalance,\n    swapAmount: SwapAmountResponse\n  ): void {\n    if (!this.currentOfferDetail) return;\n\n    this.currentView = \"confirm\";\n\n    this.element.innerHTML = ConfirmationView.render(\n      reward,\n      swapAmount,\n      this.currentOfferDetail\n    );\n\n    ConfirmationView.setupListeners(\n      this.element,\n      () => this.fetchAndShowRewardSelection(),\n      this.onClose,\n      async () => {\n        // Execute blockchain redemption transaction\n        // This will be implemented when transaction logic is added\n        alert(\"Redemption confirmed! Processing transaction...\");\n        this.onClose();\n      }\n    );\n  }\n\n  /**\n   * Get the panel element\n   */\n  getElement(): HTMLDivElement {\n    return this.element;\n  }\n\n  /**\n   * Show the panel\n   */\n  show(): void {\n    this.element.classList.add(\"visible\");\n  }\n\n  /**\n   * Hide the panel\n   */\n  hide(): void {\n    this.element.classList.remove(\"visible\");\n  }\n}\n","import {\n  Message,\n  QuickAction,\n  Offer,\n  Brand,\n  Category,\n  MeAgentConfig,\n} from \"../types\";\nimport { MessageComponent } from \"./components/message\";\nimport { QuickActionsComponent } from \"./components/quick-actions\";\nimport { OfferPreviewCard } from \"./components/offer-preview\";\nimport { CardList, CardListItem } from \"./components/card-list\";\nimport { DetailPanel } from \"./detail-panel\";\nimport { RedeemManager } from \"../redeem/manager\";\nimport { APIClient } from \"../api/client\";\nimport {\n  getCloseIcon,\n  getMaximizeIcon,\n  getMinimizeIcon,\n  getSendIcon,\n  getAssistantAvatarIcon,\n  getChatIcon,\n} from \"./icons\";\n\n/**\n * Chat Popup Component\n */\nexport class ChatPopup {\n  private element: HTMLDivElement;\n  private messagesContainer: HTMLDivElement;\n  private inputElement: HTMLInputElement;\n  private sendButton: HTMLButtonElement;\n  private maximizeButton: HTMLButtonElement;\n  private position: \"bottom-right\" | \"bottom-left\";\n  private onSendMessage: (message: string) => void;\n  private onClose: () => void;\n  private welcomeElement: HTMLDivElement | null = null;\n  private isMaximized: boolean = false;\n  private detailPanel: DetailPanel | null = null;\n  private currentOffers: Offer[] = [];\n  private sessionId: string = \"\";\n  private apiClient: APIClient;\n  private redeemManager: RedeemManager | null = null;\n  private config: MeAgentConfig;\n\n  constructor(\n    position: \"bottom-right\" | \"bottom-left\",\n    onSendMessage: (message: string) => void,\n    onClose: () => void,\n    apiClient: APIClient,\n    sessionId: string,\n    config: MeAgentConfig,\n    redeemManager?: RedeemManager\n  ) {\n    this.position = position;\n    this.onSendMessage = onSendMessage;\n    this.onClose = onClose;\n    this.apiClient = apiClient;\n    this.sessionId = sessionId;\n    this.config = config;\n    this.redeemManager = redeemManager || null;\n    this.element = this.create();\n    this.messagesContainer = this.element.querySelector(\".me-agent-messages\")!;\n    this.inputElement = this.element.querySelector(\".me-agent-input\")!;\n    this.sendButton = this.element.querySelector(\".me-agent-send-button\")!;\n    this.maximizeButton = this.element.querySelector(\n      \".me-agent-maximize-button\"\n    )!;\n\n    // Initialize detail panel\n    this.detailPanel = new DetailPanel(\n      () => this.hideDetailPanel(),\n      (offerCode) => this.handleOfferClick(offerCode),\n      config,\n      this.apiClient,\n      this.redeemManager || undefined\n    );\n\n    // Mount detail panel inside chat\n    const detailWrapper = this.element.querySelector(\n      \".me-agent-detail-panel-wrapper\"\n    )!;\n    detailWrapper.appendChild(this.detailPanel.getElement());\n\n    this.setupEventListeners();\n  }\n\n  /**\n   * Create the chat popup element\n   */\n  private create(): HTMLDivElement {\n    const chat = document.createElement(\"div\");\n    chat.className = `me-agent-chat ${this.position}`;\n\n    chat.innerHTML = `\n      <div class=\"me-agent-chat-content\">\n        <div class=\"me-agent-chat-header\">\n          <div class=\"me-agent-chat-title-container\">\n            ${getChatIcon({\n              width: 20,\n              height: 20,\n              className: \"me-agent-chat-icon\",\n              color: \"#999999\",\n            })}\n            <h3 class=\"me-agent-chat-title\">Chats</h3>\n          </div>\n          <div class=\"me-agent-header-buttons\">\n            <button class=\"me-agent-maximize-button\" aria-label=\"Maximize chat\">\n              <span class=\"me-agent-maximize-icon\">${getMaximizeIcon({\n                width: 16,\n                height: 16,\n              })}</span>\n              <span class=\"me-agent-minimize-icon\" style=\"display:none;\">${getMinimizeIcon(\n                { width: 16, height: 16 }\n              )}</span>\n            </button>\n            <button class=\"me-agent-close-button\" aria-label=\"Close chat\">${getCloseIcon(\n              { width: 20, height: 20 }\n            )}</button>\n          </div>\n        </div>\n        <div class=\"me-agent-messages\"></div>\n        <div class=\"me-agent-input-container\">\n          <div class=\"me-agent-input-content\">\n            <input \n              type=\"text\" \n              class=\"me-agent-input\" \n              placeholder=\"Ask or search anything...\"\n              aria-label=\"Message input\"\n            />\n            <button class=\"me-agent-send-button\" aria-label=\"Send message\">${getSendIcon(\n              { width: 18, height: 18 }\n            )}</button>\n          </div>\n        </div>\n      </div>\n      <div class=\"me-agent-detail-panel-wrapper\"></div>\n    `;\n\n    return chat;\n  }\n\n  /**\n   * Setup event listeners\n   */\n  private setupEventListeners(): void {\n    // Close button\n    const closeButton = this.element.querySelector(\".me-agent-close-button\");\n    closeButton?.addEventListener(\"click\", this.onClose);\n\n    // Maximize button\n    this.maximizeButton.addEventListener(\"click\", () => this.toggleMaximize());\n\n    // Send button\n    this.sendButton.addEventListener(\"click\", () => this.handleSend());\n\n    // Enter key to send\n    this.inputElement.addEventListener(\"keypress\", (e) => {\n      if (e.key === \"Enter\" && !e.shiftKey) {\n        e.preventDefault();\n        this.handleSend();\n      }\n    });\n\n    // Monitor input changes to enable/disable send button\n    this.inputElement.addEventListener(\"input\", () => {\n      this.updateSendButtonState();\n    });\n\n    // Set initial send button state\n    this.updateSendButtonState();\n  }\n\n  /**\n   * Update send button state based on input value\n   */\n  private updateSendButtonState(): void {\n    const hasText = this.inputElement.value.trim().length > 0;\n    this.sendButton.disabled = !hasText;\n  }\n\n  /**\n   * Handle send message\n   */\n  private handleSend(): void {\n    const message = this.inputElement.value.trim();\n    if (message) {\n      this.hideWelcome(); // Remove quick actions when user sends a message\n      this.onSendMessage(message);\n      this.inputElement.value = \"\";\n      this.updateSendButtonState(); // Disable button after clearing input\n    }\n  }\n\n  /**\n   * Show welcome message with quick actions\n   */\n  showWelcome(): void {\n    this.welcomeElement = document.createElement(\"div\");\n    this.welcomeElement.className =\n      \"me-agent-message assistant me-agent-welcome-message\";\n\n    const quickActions: QuickAction[] = [\n      {\n        id: \"search\",\n        label: \"Search for an offer\",\n        value: \"Search for an offer\",\n        icon: \"search\",\n      },\n      {\n        id: \"offers\",\n        label: \"Earn a reward\",\n        value: \"Earn a reward\",\n        icon: \"offers\",\n      },\n      { id: \"rewards\", label: \"My rewards\", value: \"My rewards\", icon: \"tags\" },\n    ];\n\n    // Avatar\n    const avatarDiv = document.createElement(\"div\");\n    avatarDiv.className = \"me-agent-message-avatar-wrapper\";\n    avatarDiv.innerHTML = getAssistantAvatarIcon({\n      width: 32,\n      height: 32,\n      className: \"me-agent-message-avatar\",\n    });\n\n    // Content wrapper\n    const contentWrapper = document.createElement(\"div\");\n    contentWrapper.className = \"me-agent-message-content-wrapper\";\n\n    // Message content\n    const contentDiv = document.createElement(\"div\");\n    contentDiv.className = \"me-agent-message-content\";\n    contentDiv.innerHTML = `\n      <div>👋</div>\n      <div>Hi there! Welcome, I am Meely. How would you like me to help you today?</div>\n    `;\n\n    // Quick actions\n    const actionsContainer = QuickActionsComponent.create(\n      quickActions,\n      (action) => {\n        // Hide only the quick actions, not the entire message\n        actionsContainer.remove();\n        this.onSendMessage(action.value);\n      }\n    );\n\n    contentWrapper.appendChild(contentDiv);\n    contentWrapper.appendChild(actionsContainer);\n    this.welcomeElement.appendChild(avatarDiv);\n    this.welcomeElement.appendChild(contentWrapper);\n\n    this.messagesContainer.appendChild(this.welcomeElement);\n  }\n\n  /**\n   * Hide welcome message (but keep the message, just remove quick actions)\n   */\n  hideWelcome(): void {\n    if (this.welcomeElement) {\n      // Just hide the quick actions, keep the welcome message visible\n      const actionsContainer = this.welcomeElement.querySelector(\n        \".me-agent-quick-actions\"\n      );\n      if (actionsContainer) {\n        actionsContainer.remove();\n      }\n    }\n  }\n\n  /**\n   * Add a message to the chat\n   */\n  addMessage(message: Message): void {\n    const messageElement = MessageComponent.create(message, (offerCode) => {\n      this.handleOfferClick(offerCode);\n    });\n    this.messagesContainer.appendChild(messageElement);\n    this.scrollToBottom();\n  }\n\n  /**\n   * Show loading indicator\n   */\n  showLoading(): HTMLDivElement {\n    const loadingElement = MessageComponent.createLoading();\n    this.messagesContainer.appendChild(loadingElement);\n    this.scrollToBottom();\n    return loadingElement;\n  }\n\n  /**\n   * Remove loading indicator\n   */\n  removeLoading(): void {\n    const loadingElement = this.messagesContainer.querySelector(\n      '[data-loading=\"true\"]'\n    );\n    if (loadingElement) {\n      loadingElement.remove();\n    }\n  }\n\n  /**\n   * Update last message content (for streaming)\n   */\n  updateLastMessage(content: string): void {\n    const messages = this.messagesContainer.querySelectorAll(\n      \".me-agent-message.assistant\"\n    );\n    const lastMessage = messages[messages.length - 1] as HTMLElement;\n    if (lastMessage) {\n      MessageComponent.updateContent(lastMessage, content, (offerCode) => {\n        this.handleOfferClick(offerCode);\n      });\n      this.scrollToBottom();\n    }\n  }\n\n  /**\n   * Scroll to bottom of messages\n   */\n  private scrollToBottom(): void {\n    this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;\n  }\n\n  /**\n   * Toggle maximize/minimize\n   */\n  toggleMaximize(): void {\n    this.isMaximized = !this.isMaximized;\n\n    if (this.isMaximized) {\n      // Maximizing\n      this.element.classList.add(\"maximized\");\n      const maximizeIcon = this.maximizeButton.querySelector(\n        \".me-agent-maximize-icon\"\n      ) as HTMLElement;\n      const minimizeIcon = this.maximizeButton.querySelector(\n        \".me-agent-minimize-icon\"\n      ) as HTMLElement;\n      maximizeIcon.style.display = \"none\";\n      minimizeIcon.style.display = \"block\";\n      this.maximizeButton.setAttribute(\"aria-label\", \"Restore chat\");\n\n      // Scroll to bottom after animation\n      setTimeout(() => this.scrollToBottom(), 300);\n    } else {\n      // Minimizing - hide detail panel first\n      this.hideDetailPanel();\n\n      // Trigger slide out animation\n      this.element.classList.add(\"minimizing\");\n\n      const maximizeIcon = this.maximizeButton.querySelector(\n        \".me-agent-maximize-icon\"\n      ) as HTMLElement;\n      const minimizeIcon = this.maximizeButton.querySelector(\n        \".me-agent-minimize-icon\"\n      ) as HTMLElement;\n\n      // Wait for slide out animation to complete\n      setTimeout(() => {\n        // Remove maximized state and minimizing class\n        this.element.classList.remove(\"maximized\");\n        this.element.classList.remove(\"minimizing\");\n\n        // Temporarily remove visible class to prepare for slide-in animation\n        this.element.classList.remove(\"visible\");\n\n        // Update icons\n        maximizeIcon.style.display = \"block\";\n        minimizeIcon.style.display = \"none\";\n        this.maximizeButton.setAttribute(\"aria-label\", \"Maximize chat\");\n\n        // Trigger slide-in animation from bottom\n        setTimeout(() => {\n          this.element.classList.add(\"visible\");\n          setTimeout(() => this.scrollToBottom(), 100);\n        }, 50);\n      }, 300);\n    }\n  }\n\n  /**\n   * Show the chat popup\n   */\n  show(): void {\n    this.element.classList.add(\"visible\");\n    this.inputElement.focus();\n  }\n\n  /**\n   * Hide the chat popup\n   */\n  hide(): void {\n    this.element.classList.remove(\"visible\");\n    this.hideDetailPanel(); // Hide detail panel when closing chat\n    if (this.isMaximized) {\n      this.toggleMaximize(); // Reset to normal size when closing\n    }\n  }\n\n  /**\n   * Set loading state for input\n   */\n  setLoading(loading: boolean): void {\n    this.inputElement.disabled = loading;\n    this.sendButton.disabled = loading;\n  }\n\n  /**\n   * Clear all messages\n   */\n  clearMessages(): void {\n    this.messagesContainer.innerHTML = \"\";\n    this.showWelcome();\n  }\n\n  /**\n   * Show offer preview card - appends to the last assistant message\n   */\n  showOfferPreview(offers: Offer[]): void {\n    // Create preview card with its own offers bound to the click handler\n    const previewCard = OfferPreviewCard.create(offers, () =>\n      this.showDetailPanel(offers)\n    );\n\n    // Find the last assistant message and append the card to its content wrapper\n    const messages = this.messagesContainer.querySelectorAll(\n      \".me-agent-message.assistant\"\n    );\n    const lastMessage = messages[messages.length - 1] as HTMLElement;\n\n    if (lastMessage) {\n      MessageComponent.appendToMessage(lastMessage, previewCard);\n    } else {\n      // Fallback: append to messages container if no assistant message found\n      this.messagesContainer.appendChild(previewCard);\n    }\n\n    this.scrollToBottom();\n  }\n\n  /**\n   * Show brand preview card - appends to the last assistant message\n   */\n  showBrandPreview(brands: Brand[]): void {\n    // Convert brands to CardListItem format\n    const brandItems: CardListItem[] = brands.slice(0, 10).map((brand) => ({\n      id: brand.id,\n      title: brand.name,\n      image:\n        brand.logoUrl ||\n        `https://via.placeholder.com/40x40?text=${brand.name.charAt(0)}`,\n    }));\n\n    // Create card list\n    const brandCard = CardList.create({\n      title: \"List of brands that offer sign up rewards\",\n      items: brandItems,\n      actionLabel: \"View All\",\n      onAction: () => this.showBrandsDetail(brands),\n    });\n\n    // Find the last assistant message and append the card to its content wrapper\n    const messages = this.messagesContainer.querySelectorAll(\n      \".me-agent-message.assistant\"\n    );\n    const lastMessage = messages[messages.length - 1] as HTMLElement;\n\n    if (lastMessage) {\n      MessageComponent.appendToMessage(lastMessage, brandCard);\n    } else {\n      // Fallback: append to messages container if no assistant message found\n      this.messagesContainer.appendChild(brandCard);\n    }\n\n    this.scrollToBottom();\n  }\n\n  /**\n   * Show brands detail panel with full list\n   */\n  private showBrandsDetail(brands: Brand[]): void {\n    if (this.isMaximized) {\n      this.detailPanel?.showBrandsDetail(brands);\n      this.element.classList.add(\"has-detail-panel\");\n    } else {\n      this.toggleMaximize();\n      // Wait for maximize animation\n      setTimeout(() => {\n        this.detailPanel?.showBrandsDetail(brands);\n        this.element.classList.add(\"has-detail-panel\");\n      }, 300);\n    }\n  }\n\n  /**\n   * Show category preview with card list\n   */\n  showCategoryPreview(categories: Category[]): void {\n    const categoryItems: CardListItem[] = categories\n      .slice(0, 10)\n      .map((category) => ({\n        id: category.categoryId,\n        title: category.title || category.categoryName,\n        image:\n          category.image ||\n          `https://via.placeholder.com/40x40?text=${(\n            category.title || category.categoryName\n          ).charAt(0)}`,\n      }));\n\n    const categoryCard = CardList.create({\n      title: \"List of category that offer purchase rewards\",\n      items: categoryItems,\n      actionLabel: \"View All\",\n      onAction: () => this.showCategoriesDetail(categories),\n    });\n\n    const messages = this.messagesContainer.querySelectorAll(\n      \".me-agent-message.assistant\"\n    );\n    const lastMessage = messages[messages.length - 1] as HTMLElement;\n    if (lastMessage) {\n      MessageComponent.appendToMessage(lastMessage, categoryCard);\n    } else {\n      this.messagesContainer.appendChild(categoryCard);\n    }\n\n    this.scrollToBottom();\n  }\n\n  /**\n   * Show categories detail panel with grid\n   */\n  private showCategoriesDetail(categories: Category[]): void {\n    if (this.isMaximized) {\n      this.detailPanel?.showCategoriesDetail(categories);\n      this.element.classList.add(\"has-detail-panel\");\n    } else {\n      this.toggleMaximize();\n      // Wait for maximize animation\n      setTimeout(() => {\n        this.detailPanel?.showCategoriesDetail(categories);\n        this.element.classList.add(\"has-detail-panel\");\n      }, 300);\n    }\n  }\n\n  /**\n   * Show ways to earn quick actions\n   */\n  showWaysToEarnActions(): void {\n    const actions: QuickAction[] = [\n      {\n        id: \"sign_up_brand\",\n        label: \"Sign up for a brand\",\n        value: \"Sign up for a brand\",\n        icon: \"user\",\n      },\n      {\n        id: \"purchase_brand\",\n        label: \"Purchase from a brand\",\n        value: \"Purchase from a brand\",\n        icon: \"money\",\n      },\n    ];\n\n    const quickActionsElement = QuickActionsComponent.create(\n      actions,\n      (action) => {\n        // Send the action label as a message\n        this.onSendMessage(action.label);\n      }\n    );\n\n    // Find the last assistant message and append the quick actions\n    const messages = this.messagesContainer.querySelectorAll(\n      \".me-agent-message.assistant\"\n    );\n    const lastMessage = messages[messages.length - 1] as HTMLElement;\n\n    if (lastMessage) {\n      MessageComponent.appendToMessage(lastMessage, quickActionsElement);\n    } else {\n      // Fallback: append to messages container if no assistant message found\n      this.messagesContainer.appendChild(quickActionsElement);\n    }\n\n    this.scrollToBottom();\n  }\n\n  /**\n   * Show detail panel with offers\n   */\n  private showDetailPanel(offers: Offer[]): void {\n    // Store the offers that are being displayed\n    this.currentOffers = offers;\n\n    // Auto-maximize when showing offers\n    if (!this.isMaximized) {\n      this.toggleMaximize();\n    }\n\n    this.element.classList.add(\"has-detail-panel\");\n    this.detailPanel?.showGrid(offers);\n    this.detailPanel?.show();\n  }\n\n  /**\n   * Hide detail panel\n   */\n  private hideDetailPanel(): void {\n    this.element.classList.remove(\"has-detail-panel\");\n    this.detailPanel?.hide();\n  }\n\n  /**\n   * Handle offer click\n   */\n  private async handleOfferClick(offerCode: string): Promise<void> {\n    try {\n      // Maximize widget if not already maximized\n      if (!this.isMaximized) {\n        this.toggleMaximize();\n      }\n\n      // Show the detail panel\n      this.element.classList.add(\"has-detail-panel\");\n      this.detailPanel?.show();\n\n      // Fetch and display offer details\n      this.detailPanel?.showLoading();\n      const offerDetail = await this.apiClient.fetchOfferDetails(\n        offerCode,\n        this.sessionId\n      );\n      this.detailPanel?.showDetail(offerDetail);\n    } catch (error) {\n      console.error(\"Error fetching offer details:\", error);\n      alert(\"Failed to load offer details. Please try again.\");\n    }\n  }\n\n  /**\n   * Mount the chat to the DOM\n   */\n  mount(): void {\n    document.body.appendChild(this.element);\n  }\n\n  /**\n   * Remove the chat from the DOM\n   */\n  unmount(): void {\n    this.element.remove();\n  }\n\n  /**\n   * Get the chat element\n   */\n  getElement(): HTMLDivElement {\n    return this.element;\n  }\n}\n","/**\n * Styles - Scoped CSS for SDK components\n */\n\nexport const styles = `\n  /* Import Clash Display font */\n  @import url('https://fonts.googleapis.com/css2?family=Clash+Display:wght@400;500;600;700&display=swap');\n\n  /* Container for all SDK elements */\n  .me-agent-container * {\n    box-sizing: border-box;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n  }\n\n  /* Floating Button */\n  .me-agent-button {\n    position: fixed;\n    bottom: 24px;\n    width: 64px;\n    height: 64px;\n    border-radius: 50%;\n    background: #0F0F0F;\n    outline: 1px #4D4D4D solid;\n    cursor: pointer;\n    box-shadow: 0px 16px 40px rgba(255, 255, 255, 0.24);\n    z-index: 999999;\n    transition: transform 0.2s ease, box-shadow 0.2s ease;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .me-agent-button:hover {\n    transform: scale(1.05);\n    box-shadow: 0px 16px 40px rgba(255, 255, 255, 0.24);\n  }\n\n  .me-agent-button.bottom-right {\n    right: 24px;\n  }\n\n  .me-agent-button.bottom-left {\n    left: 24px;\n  }\n\n  /* Hidden state for button when chat is open */\n  .me-agent-button.hidden {\n    opacity: 0;\n    transform: translateY(100px);\n    pointer-events: none;\n  }\n\n  .me-agent-button-icon {\n    display: block;\n  }\n\n  /* Chat Container */\n  .me-agent-chat {\n    position: fixed;\n    bottom: 20px;\n    width: 672px;\n    height: 602px;\n    background: rgba(250, 250, 250, 0.8);\n    outline: 1px #E6E6E6 solid;\n    border-radius: 16px;\n    box-shadow: 0px 24px 40px rgba(0, 0, 0, 0.08);\n    z-index: 999999;\n    display: flex;\n    flex-direction: row;\n    overflow: hidden;\n    opacity: 0;\n    transform: translateY(20px);\n    pointer-events: none;\n    transition: opacity 0.3s ease, transform 0.3s ease;\n    backdrop-filter: blur(32px);\n  }\n\n  .me-agent-chat.visible {\n    opacity: 1;\n    transform: translateY(0);\n    pointer-events: auto;\n  }\n\n  .me-agent-chat.bottom-right {\n    right: 24px;\n  }\n\n  .me-agent-chat.bottom-left {\n    left: 24px;\n  }\n\n  /* Chat Content (left side) */\n  .me-agent-chat-content {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n  }\n\n  /* Detail Panel Wrapper (right side) */\n  .me-agent-detail-panel-wrapper {\n    width: 0;\n    height: 100%;\n    overflow: hidden;\n    transition: width 0.3s ease;\n  }\n\n  .me-agent-chat.has-detail-panel .me-agent-detail-panel-wrapper {\n    width: 672px;\n    border-left: 1px solid #999999;\n  }\n\n  /* Maximized State */\n  .me-agent-chat.maximized {\n    width: 672px !important;\n    height: 100vh !important;\n    top: 0 !important;\n    bottom: 0 !important;\n    right: 0 !important;\n    left: auto !important;\n    border-radius: 0;\n    animation: slideInFromRight 0.3s ease;\n  }\n\n  /* Maximized with detail panel */\n  .me-agent-chat.maximized.has-detail-panel {\n    width: 1272px !important;\n  }\n\n  .me-agent-chat.minimizing {\n    animation: slideOutToRight 0.3s ease;\n  }\n\n  @keyframes slideInFromRight {\n    from {\n      transform: translateX(100%);\n      opacity: 0;\n    }\n    to {\n      transform: translateX(0);\n      opacity: 1;\n    }\n  }\n\n  @keyframes slideOutToRight {\n    from {\n      transform: translateX(0);\n      opacity: 1;\n    }\n    to {\n      transform: translateX(100%);\n      opacity: 0;\n    }\n  }\n\n  /* Chat Header */\n  .me-agent-chat-header {\n    padding: 20px;\n    background: transparent;\n    color: #0F0F0F;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n\n  .me-agent-chat-title-container {\n    display: flex;\n    align-items: center;\n    gap: 4px;\n  }\n\n  .me-agent-chat-title {\n    font-size: 16px;\n    font-weight: 600;\n    margin: 0;\n  }\n\n  .me-agent-header-buttons {\n    display: flex;\n    gap: 8px;\n    align-items: center;\n  }\n\n  .me-agent-maximize-button,\n  .me-agent-close-button {\n    background: white;\n    border: none;\n    color: #000000;\n    cursor: pointer;\n    padding: 0;\n    width: 32px;\n    height: 32px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 50%;\n    transition: background 0.2s ease;\n  }\n\n  .me-agent-maximize-button {\n    font-size: 16px;\n  }\n\n  .me-agent-maximize-button svg,\n  .me-agent-close-button svg {\n    display: block;\n  }\n\n  .me-agent-close-button {\n    font-size: 24px;\n  }\n\n  .me-agent-maximize-button:hover,\n  .me-agent-close-button:hover {\n    background: rgba(255, 255, 255, 0.5);\n  }\n\n  /* Messages Container */\n  .me-agent-messages {\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n    background: transparent;\n  }\n\n  /* Welcome Message */\n  .me-agent-welcome {\n    text-align: center;\n    padding: 20px 0;\n  }\n\n  .me-agent-welcome-title {\n    font-size: 20px;\n    font-weight: 600;\n    color: #1f2937;\n    margin: 0 0 20px 0;\n  }\n\n  /* Quick Actions */\n  .me-agent-quick-actions {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    margin-top: 10px;\n  }\n\n  .me-agent-quick-action {\n    background: white;\n    border: 1px solid #e5e7eb;\n    padding: 12px 16px;\n    border-radius: 8px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    font-size: 14px;\n    color: #374151;\n    text-align: left;\n  }\n\n  .me-agent-quick-action:hover {\n    background: #f3f4f6;\n    border-color: #667eea;\n    transform: translateX(2px);\n  }\n\n  /* Message Bubble */\n  .me-agent-message {\n    display: flex;\n    gap: 10px;\n    animation: slideIn 0.3s ease;\n    margin-bottom: 16px;\n  }\n\n  @keyframes slideIn {\n    from {\n      opacity: 0;\n      transform: translateY(10px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  .me-agent-message.user {\n    flex-direction: row-reverse;\n  }\n\n  /* Avatar */\n  .me-agent-message-avatar-wrapper {\n    flex-shrink: 0;\n    width: 32px;\n    height: 32px;\n  }\n\n  .me-agent-message-avatar {\n    width: 100%;\n    height: 100%;\n    display: block;\n  }\n\n  /* Content Wrapper */\n  .me-agent-message-content-wrapper {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    flex: 1;\n    min-width: 0;\n  }\n\n  .me-agent-message-content {\n    max-width: 400px;\n    width: fit-content;\n    padding: 12px 16px;\n    border-radius: 16px;\n    font-size: 16px;\n    line-height: 1.5;\n    word-wrap: break-word;\n    word-break: break-word;\n  }\n\n  .me-agent-message.user .me-agent-message-content {\n    background: #000000;\n    color: white;\n    border-top-right-radius: 0px;\n    margin-left: auto;\n  }\n\n  .me-agent-message.assistant .me-agent-message-content {\n    background: white;\n    color: #1f2937;\n    border-top-left-radius: 0px;\n  }\n\n  /* Links in message content */\n  .me-agent-message-content a {\n    color: #999999;\n    text-decoration: none;\n    font-weight: 500;\n    transition: color 0.2s ease;\n  }\n\n  .me-agent-message-content a:hover {\n    color: #000000;\n    text-decoration: underline;\n  }\n\n  /* Offer links - special styling */\n  .me-agent-message-content .me-agent-offer-link {\n    color: #999999;\n    font-weight: 600;\n    cursor: pointer;\n    border-bottom: 1px dashed #999999;\n    padding-bottom: 1px;\n  }\n\n  .me-agent-message-content .me-agent-offer-link:hover {\n    color: #999999;\n    border-bottom-color: #999999;\n    text-decoration: none;\n  }\n\n  /* Bold and italic text */\n  .me-agent-message-content strong {\n    font-weight: 600;\n  }\n\n  .me-agent-message-content em {\n    font-style: italic;\n  }\n\n  /* Quick Actions */\n  .me-agent-quick-actions {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    align-items: flex-start;\n  }\n\n  .me-agent-quick-action-button {\n    display: inline-flex;\n    align-items: center;\n    gap: 8px;\n    background: none;\n    border-radius: 10px;\n    font-size: 14px;\n    font-weight: 500;\n    color: #1f2937;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    text-align: left;\n    border: none;\n    padding: 8px 0px;\n    white-space: nowrap;\n  }\n\n  .me-agent-quick-action-button:hover {\n    transform: translateX(5px);\n  }\n\n  .me-agent-quick-action-icon {\n    flex-shrink: 0;\n    color: #999999;\n  }\n\n  .me-agent-quick-action-text {\n    flex-shrink: 0;\n  }\n\n  /* Welcome Message Specific Styles */\n  .me-agent-welcome-message .me-agent-message-content {\n    max-width: 400px;\n    line-height: 1.6;\n  }\n\n  .me-agent-welcome-message .me-agent-message-content > div {\n    margin-bottom: 4px;\n  }\n\n  .me-agent-welcome-message .me-agent-message-content > div:first-child {\n    font-size: 20px;\n    margin-bottom: 8px;\n  }\n\n  /* Input Container */\n  .me-agent-input-container {\n    padding: 20px;\n  }\n\n  .me-agent-input-content {\n    padding: 16px 20px;\n    background: white;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    border-radius: 16px;\n  }\n\n  .me-agent-input {\n    flex: 1;\n    padding: 12px 2px;\n    font-size: 16px;\n    outline: none;\n    border: none;\n  }\n\n  .me-agent-send-button {\n    width: 32px;\n    height: 32px;\n    background: #000000;\n    color: white;\n    border: none;\n    border-radius: 100px;\n    font-size: 14px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: transform 0.2s ease;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .me-agent-send-button svg {\n    display: block;\n  }\n\n  .me-agent-send-button:hover:not(:disabled) {\n    transform: scale(1.02);\n  }\n\n  .me-agent-send-button:disabled {\n    opacity: 0.3;\n    cursor: not-allowed;\n  }\n\n  .me-agent-send-button:hover:not(:disabled) {\n    background: #999999;\n  }\n\n  /* Loading Indicator */\n  .me-agent-loading {\n    display: flex;\n    align-items: center;\n    gap: 4px;\n  }\n\n  .me-agent-loading-text {\n    color: #6b7280;\n    font-size: 14px;\n  }\n\n  .me-agent-loading-dots {\n    display: flex;\n    align-items: flex-end;\n    gap: 2px;\n    height: 14px;\n  }\n\n  .me-agent-loading-dot {\n    width: 4px;\n    height: 4px;\n    border-radius: 50%;\n    background: #9ca3af;\n    animation: bounce 1.4s infinite ease-in-out both;\n  }\n\n  .me-agent-loading-dot:nth-child(1) {\n    animation-delay: -0.32s;\n  }\n\n  .me-agent-loading-dot:nth-child(2) {\n    animation-delay: -0.16s;\n  }\n\n  .me-agent-loading-dot:nth-child(3) {\n    animation-delay: 0s;\n  }\n\n  @keyframes bounce {\n    0%, 60%, 100% {\n      transform: translateY(0);\n      opacity: 0.4;\n    }\n    30% {\n      transform: translateY(-4px);\n      opacity: 1;\n    }\n  }\n\n  /* Card List Component (for offers, earnings, etc.) */\n  .me-agent-card-list {\n    background: #CCD3FF;\n    border: 1px solid #8899FF;\n    border-radius: 16px;\n    padding: 16px;\n    margin-top: 8px;\n    animation: slideIn 0.3s ease;\n  }\n\n  .me-agent-card-list-content {\n    display: flex;\n    gap: 12px;\n    align-items: center;\n  }\n\n  .me-agent-card-avatars {\n    display: flex;\n    position: relative;\n    min-width: fit-content;\n  }\n\n  .me-agent-card-avatar {\n    width: 48px;\n    height: 48px;\n    border-radius: 12px;\n    border: 2px solid #CCD3FF;\n    background-size: cover;\n    background-position: center;\n    background-color: white;\n    margin-left: -8px;\n    flex-shrink: 0;\n  }\n\n  .me-agent-card-avatar:first-child {\n    margin-left: 0;\n  }\n\n  .me-agent-card-avatar-overlay {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: relative;\n  }\n\n  .me-agent-card-avatar-overlay::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.6);\n    border-radius: 12px;\n    z-index: 1;\n  }\n\n  .me-agent-card-avatar-count {\n    color: white;\n    font-size: 14px;\n    font-weight: 700;\n    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n    position: relative;\n    z-index: 2;\n  }\n\n  .me-agent-card-list-text {\n    flex: 1;\n  }\n\n  .me-agent-card-list-title {\n    font-size: 14px;\n    color: #374151;\n    font-weight: 500;\n  }\n\n  .me-agent-card-list-button {\n    color: #0F0F0F;\n    border: none;\n    font-size: 14px;\n    font-weight: 600;\n    cursor: pointer;\n    padding: 0px;\n    margin: 0px;\n    transition: opacity 0.2s ease;\n    background: none;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 4px;\n  }\n\n  .me-agent-card-list-button:hover {\n    opacity: 0.8;\n  }\n\n  /* Detail Panel */\n  .me-agent-detail-panel {\n    width: 100%;\n    height: 100%;\n    background: white;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n    opacity: 0;\n    pointer-events: none;\n    transition: opacity 0.3s ease;\n  }\n\n  .me-agent-detail-panel.visible {\n    opacity: 1;\n    pointer-events: auto;\n  }\n\n  .me-agent-offers-header {\n    padding: 20px;\n    background: white;\n    color: #0f0f0f;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    min-height: 76px;\n  }\n\n  .me-agent-offers-title {\n    font-size: 18px;\n    font-weight: 600;\n    margin: 0;\n    flex: 1;\n  }\n\n  .me-agent-offers-back,\n  .me-agent-offers-close {\n    background: none;\n    border: none;\n    color: #0f0f0f;\n    cursor: pointer;\n    padding: 8px;\n    border-radius: 4px;\n    transition: background 0.2s ease;\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    font-size: 14px;\n    font-weight: 500;\n  }\n\n  .me-agent-offers-back {\n    margin-right: auto;\n  }\n\n  .me-agent-offers-back svg,\n  .me-agent-offers-close svg {\n    display: inline-block;\n    vertical-align: middle;\n  }\n\n  .me-agent-offers-close {\n    font-size: 24px;\n    width: 32px;\n    height: 32px;\n    justify-content: center;\n  }\n\n  .me-agent-offers-back:hover,\n  .me-agent-offers-close:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n\n  /* Offers Grid */\n  .me-agent-offers-grid {\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    gap: 16px;\n    align-content: start;\n  }\n\n  /* Brands List */\n  .me-agent-brands-list {\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n  }\n\n  .me-agent-brand-card {\n    display: flex;\n    align-items: center;\n    gap: 16px;\n    padding: 16px 20px;\n    background: #FAFAFA;\n    border: 1px solid #F5F5F5;\n    border-radius: 16px;\n    transition: all 0.2s ease;\n  }\n\n  .me-agent-brand-card:hover {\n  }\n\n  .me-agent-brand-logo-container {\n    flex-shrink: 0;\n    width: 64px;\n    height: 64px;\n    border-radius: 12px;\n    overflow: hidden;\n    background: #000000;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .me-agent-brand-logo {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n\n  .me-agent-brand-info {\n    flex: 1;\n    min-width: 0;\n  }\n\n  .me-agent-brand-name {\n    font-family: 'Clash Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    font-size: 24px;\n    font-weight: 600;\n    color: #000000;\n    margin: 0 0 2px 0;\n  }\n\n  .me-agent-brand-conversion {\n    font-size: 14px;\n    color: #6B7280;\n    margin: 0;\n  }\n\n  .me-agent-brand-actions {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n    gap: 8px;\n  }\n\n  .me-agent-brand-reward-amount {\n    font-family: 'Clash Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    font-size: 24px;\n    font-weight: 600;\n    color: #000000;\n    text-align: right;\n  }\n\n  .me-agent-brand-reward-symbol {\n    font-size: 12px;\n    color: #000000;\n    font-weight: 500;\n  }\n\n  .me-agent-brand-signup-button {\n    flex-shrink: 0;\n    padding: 8px 12px;\n    background: transparent;\n    color: #000000;\n    border: 1px solid #E6E6E6;\n    border-radius: 8px;\n    font-size: 12px;\n    font-weight: 400;\n    cursor: pointer;\n    text-decoration: none;\n    display: inline-flex;\n    align-items: center;\n    gap: 8px;\n    transition: all 0.2s ease;\n  }\n\n  .me-agent-brand-signup-button:hover {\n    background: #F9FAFB;\n    border-color: #D1D5DB;\n  }\n\n  .me-agent-brand-signup-button svg {\n    flex-shrink: 0;\n  }\n\n  /* Category Grid Styles */\n  .me-agent-categories-grid {\n    overflow-y: auto;\n    padding: 20px;\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    gap: 16px;\n  }\n\n  .me-agent-category-card {\n    background: white;\n    border-radius: 12px;\n    overflow: hidden;\n    cursor: pointer;\n    transition: transform 0.2s ease, box-shadow 0.2s ease;\n    border: 1px solid #F5F5F5;\n    height: 162px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    padding: 16px;\n  }\n\n  .me-agent-category-card:hover {\n    transform: scale(1.02);\n  }\n\n  .me-agent-category-image-container {\n    position: relative;\n    width: 100%;\n    padding-top: 100%;\n    overflow: hidden;\n  }\n\n  .me-agent-category-image {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n\n  .me-agent-category-icon-overlay {\n    width: 24px;\n    height: 24px;\n    background: black;\n    border-radius: 4px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .me-agent-category-info {\n    // padding: 16px;\n  }\n\n  .me-agent-category-title {\n    font-family: 'Clash Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    font-size: 18px;\n    font-weight: 600;\n    color: #000000;\n    margin: 0 0 8px 0;\n    line-height: 1.3;\n  }\n\n  .me-agent-category-brand-count {\n    font-size: 14px;\n    color: #6B7280;\n    margin: 0;\n  }\n\n  /* Brand Offers List Styles */\n  .me-agent-brands-offers-list {\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n    display: flex;\n    flex-direction: column;\n    gap: 24px;\n  }\n\n  .me-agent-brand-offers-section {\n    background: white;\n    border-radius: 16px;\n    border: 1px solid #F5F5F5;\n  }\n\n  .me-agent-brand-offers-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 16px;\n  }\n\n  .me-agent-brand-offers-info {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    flex: 1;\n    min-width: 0;\n  }\n\n  .me-agent-brand-offers-logo {\n    width: 44px;\n    height: 44px;\n    border-radius: 50%;\n    object-fit: cover;\n    flex-shrink: 0;\n    background: #F9FAFB;\n  }\n\n  .me-agent-brand-offers-name {\n    font-family: 'Clash Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    font-size: 24px;\n    font-weight: 600;\n    color: #000000;\n    margin: 0;\n  }\n\n  .me-agent-brand-earning-amount {\n    font-size: 12px;\n    font-weight: 500;\n    color: #ffffff;\n    text-align: right;\n    flex-shrink: 0;\n    padding: 8px 16px;\n    background: #000000;\n    border-radius: 8px;\n  }\n\n  .me-agent-brand-offers-scroll {\n    display: flex;\n    gap: 16px;\n    overflow-x: auto;\n    overflow-y: hidden;\n    padding: 4px 0;\n    -webkit-overflow-scrolling: touch;\n    scrollbar-width: thin;\n    scrollbar-color: #E5E7EB #F9FAFB;\n  }\n\n  .me-agent-brand-offers-scroll::-webkit-scrollbar {\n    height: 6px;\n  }\n\n  .me-agent-brand-offers-scroll::-webkit-scrollbar-track {\n    background: #F9FAFB;\n    border-radius: 3px;\n  }\n\n  .me-agent-brand-offers-scroll::-webkit-scrollbar-thumb {\n    background: #E5E7EB;\n    border-radius: 3px;\n  }\n\n  .me-agent-brand-offers-scroll::-webkit-scrollbar-thumb:hover {\n    background: #D1D5DB;\n  }\n\n  .me-agent-brand-offer-card {\n    min-width: 200px;\n    max-width: 200px;\n    background: #FAFAFA;\n    border: 1px solid #F5F5F5;\n    border-radius: 12px;\n    overflow: hidden;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    flex-shrink: 0;\n  }\n\n  .me-agent-brand-offer-card:hover {\n    transform: scale(1.02);\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  }\n\n  .me-agent-brand-offer-image-container {\n    position: relative;\n    width: 100%;\n    padding-top: 100%;\n    overflow: hidden;\n    background: white;\n  }\n\n  .me-agent-brand-offer-image {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n\n  .me-agent-brand-offer-badge {\n    position: absolute;\n    top: 8px;\n    right: 8px;\n    background: #000000;\n    color: white;\n    padding: 4px 8px;\n    border-radius: 4px;\n    font-size: 12px;\n    font-weight: 600;\n  }\n\n  .me-agent-brand-offer-info {\n    padding: 12px;\n  }\n\n  .me-agent-brand-offer-name {\n    font-size: 14px;\n    font-weight: 500;\n    color: #000000;\n    margin: 0 0 8px 0;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n\n  .me-agent-brand-offer-pricing {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n\n  .me-agent-brand-offer-price {\n    font-size: 16px;\n    font-weight: 600;\n    color: #000000;\n  }\n\n  .me-agent-brand-offer-original-price {\n    font-size: 14px;\n    color: #9CA3AF;\n    text-decoration: line-through;\n  }\n\n  .me-agent-empty-state {\n    text-align: center;\n    padding: 40px 20px;\n    color: #6B7280;\n    font-size: 16px;\n  }\n\n  .me-agent-offer-card {\n    background: #FAFAFA;\n    border-radius: 12px;\n    overflow: hidden;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    border: 1px solid #F5F5F5;\n  }\n\n  .me-agent-offer-card:hover {\n    transform: scale(1.02);\n  }\n\n  .me-agent-offer-image-container {\n    position: relative;\n    width: 100%;\n    padding-top: 100%;\n    overflow: hidden;\n  }\n\n  .me-agent-offer-image {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-size: cover;\n    background-position: center;\n    background-color: #f3f4f6;\n  }\n\n  .me-agent-offer-badge {\n    position: absolute;\n    top: 12px;\n    right: 12px;\n    background: #000000;\n    color: white;\n    padding: 6px 12px;\n    border-radius: 20px;\n    font-size: 12px;\n    font-weight: 500;\n    z-index: 1;\n  }\n\n  .me-agent-offer-info {\n    padding: 16px;\n  }\n\n  .me-agent-offer-name {\n    font-size: 14px;\n    font-weight: 600;\n    color: #0f0f0f;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n  .me-agent-offer-pricing {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n\n  .me-agent-offer-price {\n    font-size: 14px;\n    color: #0f0f0f;\n    font-weight: 700;\n  }\n\n  .me-agent-offer-original-price {\n    font-size: 14px;\n    color: #9ca3af;\n    font-weight: 400;\n    text-decoration: line-through;\n  }\n\n  /* Offers Loading */\n  .me-agent-offers-loading {\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  /* Offer Detail */\n  .me-agent-offer-detail {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    background: white;\n    height: 100%;\n    overflow: hidden;\n  }\n\n  .me-agent-offer-detail-scroll {\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n    min-height: 0;\n  }\n\n  /* Image Carousel */\n  .me-agent-image-carousel {\n    display: flex;\n    gap: 12px;\n    margin-bottom: 24px;\n    overflow-x: auto;\n  }\n\n  .me-agent-carousel-image {\n    flex-shrink: 0;\n    width: 280px;\n    height: 280px;\n    background-size: cover;\n    background-position: center;\n    background-color: #f3f4f6;\n    border-radius: 12px;\n  }\n\n  .me-agent-carousel-image.active {\n    border: 2px solid #0f0f0f;\n  }\n\n  /* Product Info */\n  .me-agent-detail-info {\n    margin-bottom: 24px;\n  }\n\n  .me-agent-detail-title {\n    font-size: 18px;\n    font-weight: 600;\n    color: #0f0f0f;\n    margin: 0 0 12px 0;\n  }\n\n  .me-agent-detail-pricing {\n    display: flex;\n    gap: 8px;\n    align-items: baseline;\n    margin-bottom: 12px;\n  }\n\n  .me-agent-detail-price {\n    font-size: 20px;\n    font-weight: 700;\n    color: #0f0f0f;\n  }\n\n  .me-agent-detail-original-price {\n    font-size: 18px;\n    color: #9ca3af;\n    text-decoration: line-through;\n  }\n\n  .me-agent-detail-badge {\n    display: inline-flex;\n    align-items: center;\n    gap: 6px;\n    padding: 8px 12px;\n    background: #000000;\n    color: white;\n    border-radius: 20px;\n    font-size: 13px;\n    font-weight: 500;\n    margin-bottom: 16px;\n  }\n\n  .me-agent-detail-shipping {\n    font-size: 14px;\n    color: #6b7280;\n    margin: 0 0 20px 0;\n  }\n\n  /* Section Label */\n  .me-agent-section-label {\n    font-size: 14px;\n    font-weight: 600;\n    color: #0f0f0f;\n    display: block;\n    margin-bottom: 12px;\n  }\n\n  /* Variant Section */\n  .me-agent-variant-section {\n    margin-bottom: 20px;\n  }\n\n  .me-agent-variant-grid {\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    gap: 12px;\n  }\n\n  .me-agent-variant-card {\n    background: none;\n    border: 2px solid #e5e7eb;\n    border-radius: 12px;\n    cursor: pointer;\n    padding: 0;\n    overflow: hidden;\n    transition: all 0.2s ease;\n  }\n\n  .me-agent-variant-card:hover:not(.disabled) {\n    border-color: #0f0f0f;\n  }\n\n  .me-agent-variant-card.active {\n    border-color: #0f0f0f;\n    box-shadow: 0 0 0 1px #0f0f0f;\n  }\n\n  .me-agent-variant-card.disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  .me-agent-variant-image {\n    position: relative;\n    width: 100%;\n    padding-top: 100%;\n    background-size: cover;\n    background-position: center;\n    background-color: #f3f4f6;\n  }\n\n  .me-agent-variant-discount {\n    position: absolute;\n    bottom: 8px;\n    left: 8px;\n    right: 8px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 4px;\n    padding: 4px 8px;\n    background: #000000;\n    color: white;\n    border-radius: 12px;\n    font-size: 11px;\n    font-weight: 500;\n  }\n\n  /* Quantity Section */\n  .me-agent-quantity-section {\n    margin-bottom: 20px;\n  }\n\n  .me-agent-quantity-selector {\n    display: flex;\n    align-items: center;\n    gap: 16px;\n    max-width: 200px;\n  }\n\n  .me-agent-quantity-btn {\n    width: 40px;\n    height: 40px;\n    border: 1px solid #e5e7eb;\n    background: white;\n    border-radius: 8px;\n    cursor: pointer;\n    font-size: 20px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: all 0.2s ease;\n  }\n\n  .me-agent-quantity-btn:hover {\n    background: #f9fafb;\n    border-color: #d1d5db;\n  }\n\n  .me-agent-quantity-input {\n    flex: 1;\n    height: 40px;\n    border: 1px solid #e5e7eb;\n    border-radius: 8px;\n    text-align: center;\n    font-size: 16px;\n    font-weight: 500;\n  }\n\n  .me-agent-quantity-input:focus {\n    outline: none;\n    border-color: #0f0f0f;\n  }\n\n  /* Tabs */\n  .me-agent-tabs {\n    display: flex;\n    gap: 8px;\n    margin-bottom: 20px;\n    border-bottom: 1px solid #e5e7eb;\n  }\n\n  .me-agent-tab {\n    padding: 12px 24px;\n    background: none;\n    border: none;\n    border-bottom: 2px solid transparent;\n    cursor: pointer;\n    font-size: 14px;\n    font-weight: 500;\n    color: #6b7280;\n    transition: all 0.2s ease;\n  }\n\n  .me-agent-tab.active {\n    color: #0f0f0f;\n    border-bottom-color: #0f0f0f;\n  }\n\n  .me-agent-tab-content {\n    min-height: 200px;\n  }\n\n  .me-agent-tab-pane {\n    display: none;\n  }\n\n  .me-agent-tab-pane.active {\n    display: block;\n  }\n\n  .me-agent-description-text {\n    font-size: 14px;\n    color: #4b5563;\n    line-height: 1.6;\n    margin: 0;\n  }\n\n  /* Reviews */\n  .me-agent-reviews {\n    display: flex;\n    flex-direction: column;\n    gap: 24px;\n  }\n\n  .me-agent-reviews-summary {\n    display: flex;\n    gap: 32px;\n    align-items: flex-start;\n  }\n\n  .me-agent-reviews-bars {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n  }\n\n  .me-agent-rating-row {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n  }\n\n  .me-agent-stars-small {\n    display: flex;\n    gap: 2px;\n    color: #d1d5db;\n  }\n\n  .me-agent-stars-small span.filled {\n    color: #f59e0b;\n  }\n\n  .me-agent-rating-bar {\n    flex: 1;\n    height: 6px;\n    background: #e5e7eb;\n    border-radius: 3px;\n    overflow: hidden;\n  }\n\n  .me-agent-rating-fill {\n    height: 100%;\n    background: #f59e0b;\n  }\n\n  .me-agent-rating-count {\n    font-size: 14px;\n    color: #6b7280;\n    min-width: 30px;\n    text-align: right;\n  }\n\n  .me-agent-reviews-score {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 8px;\n  }\n\n  .me-agent-score-number {\n    font-size: 48px;\n    font-weight: 700;\n    color: #0f0f0f;\n    line-height: 1;\n  }\n\n  .me-agent-score-number span {\n    font-size: 24px;\n    color: #9ca3af;\n  }\n\n  .me-agent-stars-large {\n    display: flex;\n    gap: 4px;\n    font-size: 20px;\n    color: #d1d5db;\n  }\n\n  .me-agent-stars-large span.filled {\n    color: #f59e0b;\n  }\n\n  .me-agent-review-count {\n    font-size: 14px;\n    color: #6b7280;\n  }\n\n  .me-agent-reviews-list {\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n  }\n\n  .me-agent-review-item {\n    padding: 16px;\n    border: 1px solid #e5e7eb;\n    border-radius: 12px;\n  }\n\n  .me-agent-review-header {\n    display: flex;\n    gap: 12px;\n    align-items: center;\n    margin-bottom: 12px;\n  }\n\n  .me-agent-reviewer-avatar {\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  }\n\n  .me-agent-reviewer-name {\n    font-size: 14px;\n    font-weight: 600;\n    color: #0f0f0f;\n    margin-bottom: 4px;\n  }\n\n  .me-agent-review-stars {\n    display: flex;\n    gap: 2px;\n    font-size: 14px;\n    color: #d1d5db;\n  }\n\n  .me-agent-review-stars span.filled {\n    color: #f59e0b;\n  }\n\n  .me-agent-review-text {\n    font-size: 14px;\n    color: #4b5563;\n    line-height: 1.6;\n    margin: 0;\n  }\n\n  /* Redemption Info */\n  .me-agent-redemption-info {\n    margin-top: 24px;\n    padding: 16px;\n    background: #f9fafb;\n    border-radius: 12px;\n    font-size: 14px;\n    color: #4b5563;\n    line-height: 1.6;\n  }\n\n  .me-agent-redemption-info p {\n    margin: 0;\n  }\n\n  /* Bottom Actions */\n  .me-agent-detail-actions {\n    position: sticky;\n    bottom: 0;\n    background: white;\n    padding: 16px 20px;\n    border-top: 1px solid #e5e7eb;\n    display: flex;\n    gap: 12px;\n    align-items: center;\n  }\n\n  .me-agent-redeem-button {\n    flex: 1;\n    padding: 14px 24px;\n    background: #000000;\n    color: white;\n    border: none;\n    border-radius: 8px;\n    font-size: 16px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: all 0.2s ease;\n  }\n\n  .me-agent-redeem-button:hover {\n    background: #1f1f1f;\n  }\n\n  .me-agent-secondary-actions {\n    display: flex;\n    gap: 8px;\n    align-items: center;\n  }\n\n  .me-agent-action-button {\n    padding: 14px 20px;\n    background: white;\n    color: #0f0f0f;\n    border: 1px solid #e5e7eb;\n    border-radius: 8px;\n    font-size: 14px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    white-space: nowrap;\n  }\n\n  .me-agent-action-button:hover {\n    background: #f9fafb;\n    border-color: #d1d5db;\n  }\n\n  .me-agent-action-icon {\n    width: 48px;\n    height: 48px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: white;\n    border: 1px solid #e5e7eb;\n    border-radius: 8px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    color: #0f0f0f;\n  }\n\n  .me-agent-action-icon:hover {\n    background: #f9fafb;\n    border-color: #d1d5db;\n  }\n\n  .me-agent-action-icon.liked {\n    color: #ef4444;\n  }\n\n  .me-agent-offer-detail-header {\n    display: flex;\n    gap: 12px;\n    align-items: center;\n    margin-bottom: 20px;\n  }\n\n  .me-agent-offer-brand-logo {\n    width: 60px;\n    height: 60px;\n    border-radius: 8px;\n    object-fit: cover;\n    border: 1px solid #e5e7eb;\n  }\n\n  .me-agent-offer-detail-name {\n    font-size: 20px;\n    font-weight: 600;\n    color: #1f2937;\n    margin: 0 0 4px 0;\n  }\n\n  .me-agent-offer-detail-brand {\n    font-size: 14px;\n    color: #6b7280;\n    margin: 0;\n  }\n\n  .me-agent-offer-detail-pricing {\n    background: #f9fafb;\n    padding: 16px;\n    border-radius: 8px;\n    margin-bottom: 20px;\n  }\n\n  .me-agent-offer-detail-discount {\n    display: inline-block;\n    background: #dcfce7;\n    color: #166534;\n    padding: 6px 12px;\n    border-radius: 6px;\n    font-size: 14px;\n    font-weight: 600;\n    margin-bottom: 12px;\n  }\n\n  .me-agent-offer-detail-price {\n    display: flex;\n    gap: 12px;\n    align-items: baseline;\n  }\n\n  .me-agent-offer-detail-original {\n    font-size: 18px;\n    color: #9ca3af;\n    text-decoration: line-through;\n  }\n\n  .me-agent-offer-detail-final {\n    font-size: 28px;\n    color: #1f2937;\n    font-weight: 700;\n  }\n\n  .me-agent-offer-detail-description h4 {\n    font-size: 16px;\n    font-weight: 600;\n    color: #1f2937;\n    margin: 0 0 8px 0;\n  }\n\n  .me-agent-offer-detail-description p {\n    font-size: 14px;\n    color: #4b5563;\n    line-height: 1.6;\n    margin: 0 0 20px 0;\n  }\n\n  .me-agent-offer-detail-code {\n    background: #fef3c7;\n    padding: 12px;\n    border-radius: 8px;\n    margin-bottom: 20px;\n    font-size: 14px;\n    color: #92400e;\n  }\n\n  .me-agent-offer-detail-code strong {\n    font-weight: 600;\n  }\n\n  .me-agent-offer-claim-button {\n    width: 100%;\n    padding: 14px;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    border: none;\n    border-radius: 8px;\n    font-size: 16px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: transform 0.2s ease;\n  }\n\n  .me-agent-offer-claim-button:hover {\n    transform: scale(1.02);\n  }\n\n  /* OTP Container */\n  .me-agent-otp-container {\n    padding: 32px 24px;\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n  }\n\n  .me-agent-otp-description {\n    font-size: 14px;\n    color: #6b7280;\n    line-height: 1.6;\n    margin: 0;\n  }\n\n  .me-agent-otp-form {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n  }\n\n  .me-agent-otp-email-input {\n    width: 100%;\n    padding: 12px 16px;\n    border: 1px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 14px;\n    outline: none;\n    transition: border-color 0.2s ease;\n  }\n\n  .me-agent-otp-email-input:focus {\n    border-color: #667eea;\n  }\n\n  .me-agent-otp-send-button {\n    width: 100%;\n    padding: 12px;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    border: none;\n    border-radius: 8px;\n    font-size: 14px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: transform 0.2s ease;\n  }\n\n  .me-agent-otp-send-button:hover:not(:disabled) {\n    transform: scale(1.02);\n  }\n\n  .me-agent-otp-send-button:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n\n  .me-agent-otp-status {\n    padding: 12px;\n    border-radius: 8px;\n    font-size: 14px;\n    line-height: 1.5;\n  }\n\n  .me-agent-otp-status-success {\n    background: #dcfce7;\n    color: #166534;\n    border: 1px solid #86efac;\n  }\n\n  .me-agent-otp-status-error {\n    background: #fee2e2;\n    color: #991b1b;\n    border: 1px solid #fca5a5;\n  }\n\n  /* Variants Selector (Horizontal) */\n  .me-agent-variants-selector {\n    margin: 12px 0;\n    padding: 12px 0;\n    border-top: 1px solid #e5e7eb;\n    border-bottom: 1px solid #e5e7eb;\n  }\n\n  .me-agent-variants-list-horizontal {\n    display: flex;\n    gap: 8px;\n    overflow-x: auto;\n    padding: 4px 0;\n    scrollbar-width: thin;\n    scrollbar-color: #d1d5db #f3f4f6;\n  }\n\n  .me-agent-variants-list-horizontal::-webkit-scrollbar {\n    height: 6px;\n  }\n\n  .me-agent-variants-list-horizontal::-webkit-scrollbar-track {\n    background: #f3f4f6;\n    border-radius: 3px;\n  }\n\n  .me-agent-variants-list-horizontal::-webkit-scrollbar-thumb {\n    background: #d1d5db;\n    border-radius: 3px;\n  }\n\n  .me-agent-variants-list-horizontal::-webkit-scrollbar-thumb:hover {\n    background: #9ca3af;\n  }\n\n  .me-agent-variant-chip {\n    display: inline-flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 2px;\n    padding: 10px 16px;\n    background: white;\n    border: 2px solid #e5e7eb;\n    border-radius: 8px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    white-space: nowrap;\n    flex-shrink: 0;\n    font-size: 13px;\n  }\n\n  .me-agent-variant-chip:hover:not(:disabled) {\n    border-color: #667eea;\n    background: #f9fafb;\n  }\n\n  .me-agent-variant-chip.active {\n    border-color: #667eea;\n    background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);\n    box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);\n  }\n\n  .me-agent-variant-chip.out-of-stock {\n    opacity: 0.5;\n    cursor: not-allowed;\n    background: #f3f4f6;\n  }\n\n  .me-agent-variant-chip:disabled {\n    cursor: not-allowed;\n  }\n\n  .me-agent-variant-chip-name {\n    font-weight: 600;\n    color: #1f2937;\n  }\n\n  .me-agent-variant-chip.active .me-agent-variant-chip-name {\n    color: #667eea;\n  }\n\n  .me-agent-variant-chip-options {\n    font-size: 11px;\n    color: #6b7280;\n  }\n\n  .me-agent-variant-chip-stock {\n    font-size: 10px;\n    color: #dc2626;\n    font-weight: 500;\n  }\n\n  /* Rewards Container */\n  .me-agent-rewards-container {\n    padding: 24px;\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n  }\n\n  .me-agent-rewards-description {\n    font-size: 14px;\n    color: #6b7280;\n    margin: 0;\n  }\n\n  .me-agent-rewards-list {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n  }\n\n  .me-agent-reward-item {\n    display: flex;\n    align-items: center;\n    gap: 16px;\n    padding: 16px;\n    background: white;\n    border: 1px solid #e5e7eb;\n    border-radius: 12px;\n    transition: all 0.2s ease;\n  }\n\n  .me-agent-reward-item:hover {\n    border-color: #667eea;\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);\n  }\n\n  .me-agent-reward-image {\n    width: 60px;\n    height: 60px;\n    border-radius: 12px;\n    background-size: cover;\n    background-position: center;\n    background-color: #f3f4f6;\n    flex-shrink: 0;\n  }\n\n  .me-agent-reward-info {\n    flex: 1;\n  }\n\n  .me-agent-reward-name {\n    font-size: 16px;\n    font-weight: 600;\n    color: #1f2937;\n    margin: 0 0 4px 0;\n  }\n\n  .me-agent-reward-symbol {\n    font-size: 12px;\n    color: #6b7280;\n    margin: 0 0 6px 0;\n  }\n\n  .me-agent-reward-balance {\n    font-size: 14px;\n    color: #374151;\n    font-weight: 500;\n    margin: 0;\n  }\n\n  .me-agent-reward-select-button {\n    padding: 10px 20px;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    border: none;\n    border-radius: 8px;\n    font-size: 14px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: transform 0.2s ease;\n    flex-shrink: 0;\n  }\n\n  .me-agent-reward-select-button:hover {\n    transform: scale(1.05);\n  }\n\n  /* Error Container */\n  .me-agent-error-container {\n    padding: 48px 32px;\n    text-align: center;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 16px;\n  }\n\n  .me-agent-error-icon {\n    font-size: 64px;\n    margin-bottom: 8px;\n  }\n\n  .me-agent-error-container h3 {\n    font-size: 20px;\n    font-weight: 600;\n    color: #1f2937;\n    margin: 0 0 8px 0;\n  }\n\n  .me-agent-error-container p {\n    font-size: 14px;\n    color: #6b7280;\n    line-height: 1.6;\n    margin: 0;\n    max-width: 400px;\n  }\n\n  .me-agent-error-container strong {\n    color: #1f2937;\n    font-weight: 600;\n  }\n\n  .me-agent-error-back-button {\n    margin-top: 16px;\n    padding: 12px 24px;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    border: none;\n    border-radius: 8px;\n    font-size: 14px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: transform 0.2s ease;\n  }\n\n  .me-agent-error-back-button:hover {\n    transform: scale(1.05);\n  }\n\n  /* Onboarding Container */\n  .me-agent-onboarding-container {\n    padding: 40px 24px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n    gap: 20px;\n  }\n\n  .me-agent-onboarding-spinner {\n    width: 60px;\n    height: 60px;\n    border: 4px solid #e5e7eb;\n    border-top-color: #667eea;\n    border-radius: 50%;\n    animation: me-agent-spin 1s linear infinite;\n  }\n\n  @keyframes me-agent-spin {\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  .me-agent-onboarding-title {\n    font-size: 20px;\n    font-weight: 700;\n    color: #1f2937;\n    margin: 0;\n  }\n\n  .me-agent-onboarding-description {\n    font-size: 14px;\n    color: #6b7280;\n    line-height: 1.5;\n    max-width: 400px;\n    margin: 0;\n  }\n\n  .me-agent-onboarding-status {\n    font-size: 13px;\n    color: #667eea;\n    font-weight: 500;\n    padding: 8px 16px;\n    background: rgba(102, 126, 234, 0.1);\n    border-radius: 20px;\n  }\n\n  /* Confirmation Container */\n  .me-agent-confirm-container {\n    padding: 24px;\n    display: flex;\n    flex-direction: column;\n    gap: 24px;\n  }\n\n  .me-agent-confirm-summary {\n    background: #f9fafb;\n    padding: 24px;\n    border-radius: 12px;\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n  }\n\n  .me-agent-confirm-summary h3 {\n    font-size: 18px;\n    font-weight: 600;\n    color: #1f2937;\n    margin: 0 0 8px 0;\n    padding-bottom: 16px;\n    border-bottom: 1px solid #e5e7eb;\n  }\n\n  .me-agent-confirm-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 14px;\n  }\n\n  .me-agent-confirm-item span {\n    color: #6b7280;\n  }\n\n  .me-agent-confirm-item strong {\n    color: #1f2937;\n    font-weight: 600;\n  }\n\n  .me-agent-confirm-savings {\n    color: #16a34a !important;\n    font-size: 18px !important;\n  }\n\n  .me-agent-confirm-button {\n    width: 100%;\n    padding: 14px;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    border: none;\n    border-radius: 8px;\n    font-size: 16px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: transform 0.2s ease;\n  }\n\n  .me-agent-confirm-button:hover {\n    transform: scale(1.02);\n  }\n\n  /* Tablet Responsive */\n  @media (max-width: 1024px) {\n    .me-agent-offers-grid {\n      grid-template-columns: repeat(3, 1fr);\n      gap: 16px;\n    }\n  }\n\n  /* Mobile Responsive */\n  @media (max-width: 768px) {\n    .me-agent-offers-grid {\n      grid-template-columns: repeat(2, 1fr);\n      gap: 12px;\n    }\n  }\n\n  @media (max-width: 480px) {\n    .me-agent-chat {\n      width: calc(100vw - 32px) !important;\n      height: calc(100vh - 40px) !important;\n      bottom: 20px !important;\n    }\n\n    .me-agent-button {\n      bottom: 16px;\n    }\n\n    .me-agent-chat.bottom-right,\n    .me-agent-chat.bottom-left {\n      left: 16px !important;\n      right: 16px !important;\n    }\n\n    .me-agent-chat.maximized {\n      width: 100vw !important;\n      height: 100vh !important;\n      top: 0 !important;\n      bottom: 0 !important;\n      left: 0 !important;\n      right: 0 !important;\n      border-radius: 0;\n    }\n\n    .me-agent-chat.maximized.has-detail-panel {\n      width: 100vw !important;\n    }\n\n    .me-agent-button.bottom-right {\n      right: 16px;\n    }\n\n    .me-agent-button.bottom-left {\n      left: 16px;\n    }\n\n    /* Mobile Detail Panel - Full overlay */\n    .me-agent-chat.has-detail-panel .me-agent-detail-panel-wrapper {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      width: 100%;\n      z-index: 10;\n      border-left: none;\n    }\n\n    .me-agent-offers-grid {\n      padding: 12px;\n    }\n\n    .me-agent-card-list-content {\n      flex-direction: column;\n      align-items: flex-start;\n    }\n  }\n`;\n\n/**\n * Inject styles into the document\n */\nexport function injectStyles(): void {\n  const styleId = \"me-agent-sdk-styles\";\n\n  // Check if styles already exist\n  if (document.getElementById(styleId)) {\n    return;\n  }\n\n  const styleElement = document.createElement(\"style\");\n  styleElement.id = styleId;\n  styleElement.textContent = styles;\n  document.head.appendChild(styleElement);\n}\n","/**\n * Magic Link Client Wrapper\n * Handles authentication and wallet operations\n */\n\ndeclare global {\n  interface Window {\n    Magic: any;\n  }\n}\n\nexport interface MagicConfig {\n  apiKey: string;\n  chainId: string;\n  rpcUrl: string;\n}\n\nexport class MagicClient {\n  private magic: any = null;\n  private initialized = false;\n  private config: MagicConfig;\n\n  constructor(config: MagicConfig) {\n    this.config = config;\n  }\n\n  /**\n   * Initialize Magic SDK\n   * Loads the Magic SDK from CDN if not already loaded\n   */\n  async init(): Promise<void> {\n    if (this.initialized) {\n      return;\n    }\n\n    // Load Magic SDK from CDN if not already loaded\n    if (!window.Magic) {\n      await this.loadMagicSDK();\n    }\n\n    // Initialize Magic instance with network configuration\n    this.magic = new window.Magic(this.config.apiKey, {\n      network: {\n        rpcUrl: this.config.rpcUrl,\n        chainId: parseInt(this.config.chainId),\n      },\n    });\n    this.initialized = true;\n  }\n\n  /**\n   * Load Magic SDK from CDN\n   */\n  private loadMagicSDK(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      // Check if already loaded\n      if (window.Magic) {\n        resolve();\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://auth.magic.link/sdk\";\n      script.async = true;\n      script.onload = () => {\n        // Wait a bit for Magic to be available\n        setTimeout(() => resolve(), 100);\n      };\n      script.onerror = () => reject(new Error(\"Failed to load Magic SDK\"));\n      document.head.appendChild(script);\n    });\n  }\n\n  /**\n   * Check if user is logged in\n   */\n  async isLoggedIn(): Promise<boolean> {\n    if (!this.initialized) {\n      await this.init();\n    }\n\n    try {\n      return await this.magic.user.isLoggedIn();\n    } catch (error) {\n      console.error(\"Error checking Magic login status:\", error);\n      return false;\n    }\n  }\n\n  /**\n   * Get user metadata (including wallet address)\n   */\n  async getUserMetadata(): Promise<{\n    publicAddress: string;\n    email: string | null;\n  }> {\n    if (!this.initialized) {\n      await this.init();\n    }\n\n    try {\n      // Magic SDK uses getInfo() method, not getMetadata()\n      const metadata = await this.magic.user.getInfo();\n\n      // Extract wallet address from the wallets object\n      const publicAddress = metadata?.wallets?.ethereum?.publicAddress;\n\n      if (!publicAddress) {\n        console.error(\n          \"Failed to extract wallet address from metadata:\",\n          metadata\n        );\n        throw new Error(\n          \"Magic returned invalid user metadata - no Ethereum wallet address found\"\n        );\n      }\n\n      return {\n        publicAddress,\n        email: metadata.email || null,\n      };\n    } catch (error) {\n      console.error(\"Error getting Magic user metadata:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Login with email OTP\n   */\n  async loginWithEmailOTP(email: string): Promise<string> {\n    if (!this.initialized) {\n      await this.init();\n    }\n\n    try {\n      // Magic SDK v11+ uses loginWithEmailOTP directly on auth\n      const didToken = await this.magic.auth.loginWithEmailOTP({\n        email,\n        showUI: true, // Show Magic's UI for OTP entry\n      });\n      return didToken;\n    } catch (error) {\n      console.error(\"Error logging in with Magic:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Logout\n   */\n  async logout(): Promise<void> {\n    if (!this.initialized) {\n      return;\n    }\n\n    try {\n      await this.magic.user.logout();\n    } catch (error) {\n      console.error(\"Error logging out from Magic:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get wallet address (shortcut method)\n   */\n  async getWalletAddress(): Promise<string> {\n    const metadata = await this.getUserMetadata();\n    return metadata.publicAddress;\n  }\n}\n","import { MagicClient, MagicConfig } from \"../auth/magic\";\nimport { APIClient } from \"../api/client\";\nimport {\n  OfferDetail,\n  RewardBalance,\n  SwapAmountResponse,\n  MELoginResponse,\n} from \"../types\";\n\n/**\n * Redemption Manager\n * Handles the complete offer redemption flow\n */\nexport class RedeemManager {\n  private magicClient: MagicClient | null = null;\n  private apiClient: APIClient;\n  private walletAddress: string | null = null;\n  private balances: RewardBalance[] = [];\n  private openRewardDiamond: string;\n  private meProtocolLoggedIn: boolean = false;\n  private currentEmail: string | null = null;\n  private meProtocolToken: string | null = null;\n\n  constructor(\n    apiClient: APIClient,\n    magicConfig: MagicConfig,\n    openRewardDiamond: string\n  ) {\n    this.apiClient = apiClient;\n    this.magicClient = new MagicClient(magicConfig);\n    this.openRewardDiamond = openRewardDiamond;\n  }\n\n  /**\n   * Get email from config or stored email\n   */\n  getEmail(): string | null {\n    return this.currentEmail || this.apiClient.getUserEmail() || null;\n  }\n\n  /**\n   * Set email (for OTP flow)\n   */\n  setEmail(email: string): void {\n    this.currentEmail = email;\n  }\n\n  /**\n   * Check if Magic is configured\n   */\n  isMagicConfigured(): boolean {\n    return this.magicClient !== null;\n  }\n\n  /**\n   * Check if user is authenticated\n   */\n  async isAuthenticated(): Promise<boolean> {\n    if (!this.magicClient) {\n      return false;\n    }\n\n    try {\n      return await this.magicClient.isLoggedIn();\n    } catch (error) {\n      console.error(\"Error checking authentication:\", error);\n      return false;\n    }\n  }\n\n  /**\n   * Get wallet address (with force refresh option)\n   */\n  async getWalletAddress(forceRefresh: boolean = false): Promise<string> {\n    // Use cached value unless force refresh is requested\n    if (this.walletAddress && !forceRefresh) {\n      return this.walletAddress;\n    }\n\n    if (!this.magicClient) {\n      throw new Error(\"Magic is not configured\");\n    }\n\n    try {\n      // First verify user is logged in\n      const isLoggedIn = await this.magicClient.isLoggedIn();\n\n      if (!isLoggedIn) {\n        throw new Error(\"User is not logged in to Magic\");\n      }\n\n      // Retry logic for fetching wallet address (Magic might need a moment)\n      let retries = 3;\n      let lastError: Error | null = null;\n\n      while (retries > 0) {\n        try {\n          // Fetch wallet address from Magic\n          this.walletAddress = await this.magicClient.getWalletAddress();\n\n          if (this.walletAddress) {\n            return this.walletAddress;\n          }\n\n          // If null, wait and retry\n          console.warn(\"Wallet address is null, retrying...\");\n          await new Promise((resolve) => setTimeout(resolve, 1000));\n          retries--;\n        } catch (err) {\n          lastError = err as Error;\n          console.warn(`Error on attempt ${4 - retries}:`, err);\n          await new Promise((resolve) => setTimeout(resolve, 1000));\n          retries--;\n        }\n      }\n\n      // All retries failed\n      throw new Error(\n        `Failed to retrieve wallet address from Magic after 3 attempts. Last error: ${\n          lastError?.message || \"Unknown\"\n        }`\n      );\n    } catch (error) {\n      console.error(\"Error getting wallet address:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Clear cached wallet address (useful after logout or re-authentication)\n   */\n  clearWalletAddressCache(): void {\n    this.walletAddress = null;\n  }\n\n  /**\n   * Send OTP to email\n   */\n  async sendOTP(email: string): Promise<void> {\n    if (!this.magicClient) {\n      throw new Error(\"Magic is not configured\");\n    }\n\n    try {\n      this.currentEmail = email; // Store email for later use\n      await this.magicClient.loginWithEmailOTP(email);\n    } catch (error) {\n      console.error(\"Error sending OTP:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Login to ME Protocol (creates account if new user)\n   */\n  async loginToMEProtocol(): Promise<void> {\n    try {\n      const email = this.getEmail();\n\n      if (!email) {\n        throw new Error(\"Email not available\");\n      }\n\n      // Force refresh wallet address to ensure we have the latest from Magic\n      const walletAddress = await this.getWalletAddress(true);\n\n      // Login to ME Protocol (this creates account if new user)\n      const loginResponse = await this.apiClient.meProtocolLogin(\n        email,\n        walletAddress\n      );\n\n      if (loginResponse.data.user && loginResponse.data.token) {\n        this.meProtocolLoggedIn = true;\n        this.meProtocolToken = loginResponse.data.token; // Store the token\n      } else {\n        throw new Error(\"Login failed\");\n      }\n    } catch (error) {\n      console.error(\"Error logging in to ME Protocol:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Check if user is logged in to ME Protocol\n   */\n  isMEProtocolLoggedIn(): boolean {\n    return this.meProtocolLoggedIn;\n  }\n\n  /**\n   * Fetch user's reward balances\n   */\n  async fetchBalances(): Promise<RewardBalance[]> {\n    try {\n      const walletAddress = await this.getWalletAddress();\n\n      if (!this.meProtocolToken) {\n        throw new Error(\"ME Protocol token not available. Please login first.\");\n      }\n\n      const balances = await this.apiClient.fetchRewardBalances(\n        walletAddress,\n        this.meProtocolToken\n      );\n      this.balances = balances;\n      return balances;\n    } catch (error) {\n      console.error(\"Error fetching balances:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Calculate swap amount for redemption\n   * @param selectedRewardAddress - The contract address of the reward the user selected to use\n   * @param offerDetail - The offer detail containing the reward they want to redeem for\n   * @param selectedVariantId - Optional variant ID if the offer has variants\n   */\n  async calculateSwapAmount(\n    selectedRewardAddress: string,\n    offerDetail: OfferDetail,\n    selectedVariantId?: string\n  ): Promise<SwapAmountResponse> {\n    try {\n      const walletAddress = await this.getWalletAddress();\n\n      if (!this.meProtocolToken) {\n        throw new Error(\"ME Protocol token not available. Please login first.\");\n      }\n\n      // Use provided variant ID, or first variant if available\n      let variantId = selectedVariantId;\n      if (\n        !variantId &&\n        offerDetail.offerVariants &&\n        offerDetail.offerVariants.length > 0\n      ) {\n        variantId = offerDetail.offerVariants[0].id;\n      }\n\n      const payload = {\n        walletAddress,\n        inputRewardAddress: selectedRewardAddress, // The reward the user wants to use\n        outPutRewardAddress: offerDetail.reward.contractAddress, // The reward from the offer\n        redemptionMethodId: offerDetail.redemptionMethod.id,\n        offerId: offerDetail.id,\n        variantId,\n        brandId: offerDetail.brand.id,\n      };\n\n      const result = await this.apiClient.fetchSwapAmount(\n        payload,\n        this.meProtocolToken\n      );\n\n      return result;\n    } catch (error) {\n      console.error(\"Error calculating swap amount:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Update Magic network configuration\n   */\n  async updateNetwork(brandNetwork: string): Promise<void> {\n    if (!this.magicClient) {\n      return;\n    }\n\n    try {\n      // Network configuration is already handled by env config\n      // Brand network is used for Magic Link initialization\n    } catch (error) {\n      console.error(\"Error updating network:\", error);\n    }\n  }\n\n  /**\n   * Check if user can afford the offer with selected reward\n   */\n  canAffordOffer(selectedReward: RewardBalance, amountNeeded: number): boolean {\n    return selectedReward.balance >= amountNeeded;\n  }\n\n  /**\n   * Get cached balances\n   */\n  getCachedBalances(): RewardBalance[] {\n    return this.balances;\n  }\n\n  /**\n   * Clear wallet address cache\n   */\n  clearCache(): void {\n    this.walletAddress = null;\n    this.balances = [];\n  }\n\n  /**\n   * Logout - REMOVED: Users should stay logged in\n   * Kept for backward compatibility but does nothing\n   */\n  async logout(): Promise<void> {\n    // Do nothing - users stay logged in with Magic\n  }\n}\n","/**\n * Environment types\n */\nexport enum Environment {\n  DEV = 'dev',\n  STAGING = 'staging',\n  PROD = 'prod',\n}\n\n/**\n * Supported Networks\n */\nexport enum SupportedNetwork {\n  SEPOLIA = 'sepolia',\n  HEDERA = 'hedera',\n  BASE = 'base',\n  POLYGON = 'polygon',\n}\n\n/**\n * Network-specific configurations\n */\ninterface NetworkConfig {\n  CHAIN_ID: string;\n  RPC_URL: string;\n  OPEN_REWARD_DIAMOND: string;\n}\n\n/**\n * Environment-specific base configurations\n */\ninterface EnvironmentConfig {\n  API_URL: string;\n  AGENT_BASE_URL: string;\n  ME_API_KEY: string;\n  API_V1_URL: string;\n  RUNTIME_URL: string;\n  GELATO_API_KEY: string;\n  MAGIC_PUBLISHABLE_API_KEY: string;\n}\n\n// Development environment\nconst DEV_CONFIG: EnvironmentConfig = {\n  API_URL: 'https://paas.meappbounty.com/v1/api/',\n  AGENT_BASE_URL: 'https://fastapi-proxy-580283507238.us-central1.run.app',\n  ME_API_KEY: 'hl3elmtvji75or71j4xy5e',\n  API_V1_URL: 'https://api.meappbounty.com/',\n  MAGIC_PUBLISHABLE_API_KEY: 'pk_live_FB79F672A43B8AC2',\n  RUNTIME_URL: 'https://runtime.meappbounty.com',\n  GELATO_API_KEY: 'g1UFyiAfIyq_m_M3Cn3LWIO6VQpjVTIbeCV7XLzWGb4_',\n};\n\n// Staging environment\nconst STAGING_CONFIG: EnvironmentConfig = {\n  API_URL: 'https://paas-staging.meappbounty.com/v1/api/',\n  AGENT_BASE_URL: 'https://fastapi-proxy-staging-580283507238.us-central1.run.app',\n  ME_API_KEY: 'staging_key',\n  API_V1_URL: 'https://api-staging.meappbounty.com/',\n  MAGIC_PUBLISHABLE_API_KEY: 'pk_live_STAGING_KEY',\n  RUNTIME_URL: 'https://runtime-staging.meappbounty.com',\n  GELATO_API_KEY: 'staging_gelato_key',\n};\n\n// Production environment\nconst PROD_CONFIG: EnvironmentConfig = {\n  API_URL: 'https://paas.meappbounty.com/v1/api/',\n  AGENT_BASE_URL: 'https://fastapi-proxy.meappbounty.com',\n  ME_API_KEY: 'prod_key',\n  API_V1_URL: 'https://api.meappbounty.com/',\n  MAGIC_PUBLISHABLE_API_KEY: 'pk_live_PROD_KEY',\n  RUNTIME_URL: 'https://runtime.meappbounty.com',\n  GELATO_API_KEY: 'prod_gelato_key',\n};\n\nconst ENV_CONFIGS: Record<Environment, EnvironmentConfig> = {\n  [Environment.DEV]: DEV_CONFIG,\n  [Environment.STAGING]: STAGING_CONFIG,\n  [Environment.PROD]: PROD_CONFIG,\n};\n\nconst NETWORK_CONFIGS: Record<SupportedNetwork, NetworkConfig> = {\n  [SupportedNetwork.SEPOLIA]: {\n    CHAIN_ID: '11155111',\n    RPC_URL: 'https://eth-sepolia.g.alchemy.com/v2/Ytq0aV34dWOA9X6gWhl_6trwmUTb58Ip',\n    OPEN_REWARD_DIAMOND: '0xacd3379d449ad0042a12f4fa88bc183948f7f472',\n  },\n  [SupportedNetwork.HEDERA]: {\n    CHAIN_ID: '296',\n    RPC_URL: 'https://testnet.hashio.io/api',\n    OPEN_REWARD_DIAMOND: '0x3b03a7980bfe38c9daa4c346ccf495eb24e16782',\n  },\n  [SupportedNetwork.BASE]: {\n    CHAIN_ID: '11155111', // Using Sepolia for now\n    RPC_URL: 'https://eth-sepolia.g.alchemy.com/v2/Ytq0aV34dWOA9X6gWhl_6trwmUTb58Ip',\n    OPEN_REWARD_DIAMOND: '0xacd3379d449ad0042a12f4fa88bc183948f7f472',\n  },\n  [SupportedNetwork.POLYGON]: {\n    CHAIN_ID: '11155111', // Using Sepolia for now\n    RPC_URL: 'https://eth-sepolia.g.alchemy.com/v2/Ytq0aV34dWOA9X6gWhl_6trwmUTb58Ip',\n    OPEN_REWARD_DIAMOND: '0xacd3379d449ad0042a12f4fa88bc183948f7f472',\n  },\n};\n\n/**\n * Complete environment configuration\n */\nexport interface EnvConfig extends EnvironmentConfig, NetworkConfig {}\n\n/**\n * Get environment configuration based on environment and network\n */\nexport const getEnv = (\n  environment: Environment = Environment.DEV,\n  network: SupportedNetwork = SupportedNetwork.SEPOLIA\n): EnvConfig => {\n  const envConfig = ENV_CONFIGS[environment] || ENV_CONFIGS[Environment.DEV];\n  const networkConfig = NETWORK_CONFIGS[network] || NETWORK_CONFIGS[SupportedNetwork.SEPOLIA];\n\n  return {\n    ...envConfig,\n    ...networkConfig,\n  };\n};\n\n// Default environment (Dev + Sepolia)\nexport const Env = getEnv(Environment.DEV, SupportedNetwork.SEPOLIA);\n\n","import { MeAgentConfig, Message, Offer, Brand, Category } from \"./types\";\nimport { mergeCategoriesWithPresets } from \"./constants/categories\";\nimport { StateManager } from \"./state/manager\";\nimport { APIClient } from \"./api/client\";\nimport { FloatingButton } from \"./ui/button\";\nimport { ChatPopup } from \"./ui/chat\";\nimport { injectStyles } from \"./ui/styles\";\nimport { RedeemManager } from \"./redeem/manager\";\nimport { getEnv, SupportedNetwork, Environment, EnvConfig } from \"./config/env\";\n\n/**\n * Main SDK Class\n */\nexport class MeAgentSDK {\n  private config: MeAgentConfig;\n  private env: EnvConfig;\n  private stateManager: StateManager;\n  private apiClient: APIClient;\n  private redeemManager: RedeemManager | null = null;\n  private button: FloatingButton | null = null;\n  private chat: ChatPopup | null = null;\n  private initialized = false;\n\n  constructor(config: MeAgentConfig) {\n    this.validateConfig(config);\n    this.config = {\n      position: \"bottom-right\",\n      environment: Environment.DEV,\n      network: SupportedNetwork.SEPOLIA,\n      ...config,\n    };\n\n    // Get environment configuration based on environment and network\n    this.env = getEnv(this.config.environment, this.config.network);\n\n    this.stateManager = new StateManager();\n    this.apiClient = new APIClient(this.config, this.env);\n\n    // Initialize RedeemManager with network-specific configuration\n    this.redeemManager = new RedeemManager(\n      this.apiClient,\n      {\n        apiKey: this.env.MAGIC_PUBLISHABLE_API_KEY,\n        chainId: this.env.CHAIN_ID,\n        rpcUrl: this.env.RPC_URL,\n      },\n      this.env.OPEN_REWARD_DIAMOND\n    );\n  }\n\n  /**\n   * Validate configuration\n   */\n  private validateConfig(config: MeAgentConfig): void {\n    // No required fields currently\n  }\n\n  /**\n   * Initialize the SDK\n   */\n  async init(): Promise<void> {\n    if (this.initialized) {\n      console.warn(\"MeAgent SDK: Already initialized\");\n      return;\n    }\n\n    try {\n      // Inject styles\n      injectStyles();\n\n      // Create session\n      const sessionId = await this.apiClient.createSession();\n      this.stateManager.setSessionId(sessionId);\n\n      // Initialize UI components\n      this.button = new FloatingButton(\n        this.config.position || \"bottom-right\",\n        () => this.toggleChat()\n      );\n\n      this.chat = new ChatPopup(\n        this.config.position || \"bottom-right\",\n        (message) => this.sendMessage(message),\n        () => this.toggleChat(),\n        this.apiClient,\n        sessionId,\n        this.config,\n        this.redeemManager || undefined\n      );\n\n      // Mount components\n      this.button.mount();\n      this.chat.mount();\n\n      // Show welcome message\n      this.chat.showWelcome();\n\n      // Subscribe to state changes\n      this.stateManager.subscribe((state) => {\n        if (state.isOpen) {\n          this.chat?.show();\n          this.button?.hide();\n        } else {\n          this.chat?.hide();\n          this.button?.show();\n        }\n      });\n\n      this.initialized = true;\n    } catch (error) {\n      console.error(\"MeAgent SDK: Initialization failed\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Toggle chat open/closed\n   */\n  private toggleChat(): void {\n    this.stateManager.toggleChat();\n  }\n\n  /**\n   * Send a message\n   */\n  private async sendMessage(content: string): Promise<void> {\n    const state = this.stateManager.getState();\n\n    if (!state.sessionId) {\n      console.error(\"MeAgent SDK: No active session\");\n      return;\n    }\n\n    // Add user message\n    const userMessage: Message = {\n      id: this.generateId(),\n      role: \"user\",\n      content,\n      timestamp: Date.now(),\n    };\n    this.stateManager.addMessage(userMessage);\n    this.chat?.addMessage(userMessage);\n\n    // Show loading\n    this.stateManager.setLoading(true);\n    this.chat?.setLoading(true);\n    this.chat?.showLoading();\n\n    let assistantMessage: Message = {\n      id: this.generateId(),\n      role: \"assistant\",\n      content: \"\",\n      timestamp: Date.now(),\n    };\n    let isFirstChunk = true;\n    let detectedOffers: Offer[] = [];\n    let detectedBrands: Brand[] = [];\n    let detectedCategories: Category[] = [];\n    let showWaysToEarnActions = false;\n    let hasFinalMessage = false; // Track if we've received a final message\n\n    try {\n      await this.apiClient.sendMessage(\n        state.sessionId,\n        content,\n        (chunk: string, rawData?: any) => {\n          // Check for function calls and responses\n          if (rawData) {\n            // Check for query_offers function response\n            if (\n              rawData.content?.parts?.[0]?.functionResponse?.name ===\n              \"query_offers\"\n            ) {\n              const matches =\n                rawData.content.parts[0].functionResponse.response?.matches ||\n                [];\n              detectedOffers = this.parseOffers(matches);\n            }\n\n            // Check for get_signup_earning_brands function response\n            if (\n              rawData.content?.parts?.[0]?.functionResponse?.name ===\n              \"get_signup_earning_brands\"\n            ) {\n              const brands =\n                rawData.content.parts[0].functionResponse.response?.brands ||\n                [];\n              detectedBrands = this.parseBrands(brands);\n              console.log(\n                \"[SDK] Detected signup earning brands:\",\n                detectedBrands.length\n              );\n            }\n\n            // Check for get_category_purchase_earning function response\n            if (\n              rawData.content?.parts?.[0]?.functionResponse?.name ===\n              \"get_category_purchase_earning\"\n            ) {\n              const categories =\n                rawData.content.parts[0].functionResponse.response\n                  ?.categories || [];\n              detectedCategories = mergeCategoriesWithPresets(categories);\n              console.log(\n                \"[SDK] Detected purchase categories:\",\n                detectedCategories.length\n              );\n            }\n\n            // Check for ways_to_earn function call\n            if (\n              rawData.content?.parts?.[0]?.functionCall?.name === \"ways_to_earn\"\n            ) {\n              console.log(\"[SDK] Detected ways_to_earn function call\");\n              showWaysToEarnActions = true;\n            }\n          }\n\n          // Create message container on first data, even if empty text\n          if (isFirstChunk) {\n            this.chat?.removeLoading();\n            assistantMessage.content = chunk || \"\";\n            this.stateManager.addMessage(assistantMessage);\n            this.chat?.addMessage(assistantMessage);\n            isFirstChunk = false;\n          } else if (chunk) {\n            // Check if this is a partial/streaming chunk or final complete message\n            const isPartial = rawData?.partial === true;\n\n            if (isPartial) {\n              // Streaming chunk (delta) - append it for real-time display\n              assistantMessage.content += chunk;\n              this.stateManager.updateLastMessage(assistantMessage.content);\n              this.chat?.updateLastMessage(assistantMessage.content);\n            } else if (rawData?.content?.parts?.[0]?.text) {\n              // Final complete message\n              if (hasFinalMessage) {\n                // We already have a final message, so this is additional text\n                // after a function call - append it with spacing\n                assistantMessage.content += \"\\n\\n\" + chunk;\n              } else {\n                // First final message - replace to ensure accuracy\n                assistantMessage.content = chunk;\n                hasFinalMessage = true;\n              }\n              this.stateManager.updateLastMessage(assistantMessage.content);\n              this.chat?.updateLastMessage(assistantMessage.content);\n            }\n          }\n        },\n        () => {\n          // On complete\n          this.stateManager.setLoading(false);\n          this.chat?.setLoading(false);\n          this.chat?.removeLoading();\n\n          // Show offer preview if offers were found\n          if (detectedOffers.length > 0) {\n            this.chat?.showOfferPreview(detectedOffers);\n          }\n\n          // Show brand preview if brands were found\n          if (detectedBrands.length > 0) {\n            this.chat?.showBrandPreview(detectedBrands);\n          }\n\n          // Show category preview if categories were found\n          if (detectedCategories.length > 0) {\n            this.chat?.showCategoryPreview(detectedCategories);\n          }\n\n          // Show ways to earn quick actions if function was called\n          if (showWaysToEarnActions) {\n            console.log(\"[SDK] Showing ways to earn actions\");\n            this.chat?.showWaysToEarnActions();\n          }\n        },\n        (error: Error) => {\n          // On error\n          console.error(\"MeAgent SDK: Error sending message\", error);\n          this.stateManager.setLoading(false);\n          this.chat?.setLoading(false);\n          this.chat?.removeLoading();\n\n          const errorMessage: Message = {\n            id: this.generateId(),\n            role: \"assistant\",\n            content: \"Sorry, something went wrong. Please try again.\",\n            timestamp: Date.now(),\n          };\n          this.stateManager.addMessage(errorMessage);\n          this.chat?.addMessage(errorMessage);\n        }\n      );\n    } catch (error) {\n      console.error(\"MeAgent SDK: Error in sendMessage\", error);\n      this.stateManager.setLoading(false);\n      this.chat?.setLoading(false);\n    }\n  }\n\n  /**\n   * Parse offers from function response\n   */\n  private parseOffers(matches: any[]): Offer[] {\n    return matches.map((match: any[]) => {\n      return {\n        id: match[0] || \"\",\n        name: match[1] || \"Unnamed Offer\",\n        offerCode: match[2] || \"\",\n        price: match[3] || 0,\n        description: match[4] || \"\",\n        discountType: match[6] || \"\",\n        discountPercentage: match[7] || 0,\n        brandName: match[12] || \"Unknown Brand\",\n        image: match[13] || undefined,\n      };\n    });\n  }\n\n  /**\n   * Parse brands from function response\n   */\n  private parseBrands(brands: any[]): Brand[] {\n    return brands.map((brand: any) => {\n      return {\n        id: brand.id || \"\",\n        name: brand.name || \"Unknown Brand\",\n        logoUrl: brand.logoUrl || null,\n        description: brand.description || null,\n        websiteUrl: brand.websiteUrl || null,\n        shopifyStoreUrl: brand.shopifyStoreUrl || null,\n        network: brand.network || \"sepolia\",\n        categoryId: brand.categoryId || \"\",\n        categoryName: brand.categoryName || \"Unknown Category\",\n        rewardDetails: brand.rewardDetails || {\n          earningMethodId: \"\",\n          earningType: \"sign_up\",\n          isActive: true,\n          rewardExistingCustomers: false,\n          rewardInfo: {\n            id: \"\",\n            rewardName: \"\",\n            rewardSymbol: \"\",\n            rewardImage: \"\",\n            rewardValueInDollars: \"0\",\n            rewardOriginalValue: \"0\",\n          },\n          rules: [],\n        },\n      };\n    });\n  }\n\n  /**\n   * Generate a unique ID\n   */\n  private generateId(): string {\n    return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * Destroy the SDK\n   */\n  destroy(): void {\n    this.button?.unmount();\n    this.chat?.unmount();\n    this.initialized = false;\n  }\n}\n","import { MeAgentSDK } from './sdk';\nimport { MeAgentConfig } from './types';\nimport { SupportedNetwork, Environment } from './config/env';\n\n/**\n * Global MeAgent namespace\n */\nexport interface MeAgentGlobal {\n  init: (config: MeAgentConfig) => Promise<void>;\n  destroy: () => void;\n  Network: typeof SupportedNetwork;\n  Environment: typeof Environment;\n}\n\nlet sdkInstance: MeAgentSDK | null = null;\n\n/**\n * Initialize the MeAgent SDK\n */\nasync function init(config: MeAgentConfig): Promise<void> {\n  if (sdkInstance) {\n    console.warn('MeAgent: Instance already exists. Destroying previous instance.');\n    destroy();\n  }\n\n  sdkInstance = new MeAgentSDK(config);\n  await sdkInstance.init();\n}\n\n/**\n * Destroy the SDK instance\n */\nfunction destroy(): void {\n  if (sdkInstance) {\n    sdkInstance.destroy();\n    sdkInstance = null;\n  }\n}\n\n// Export for UMD build\nconst MeAgent: MeAgentGlobal = {\n  init,\n  destroy,\n  Network: SupportedNetwork,\n  Environment: Environment,\n};\n\n// For UMD build - attach to window\nif (typeof window !== 'undefined') {\n  (window as any).MeAgent = MeAgent;\n}\n\nexport default MeAgent;\nexport { MeAgentConfig } from './types';\nexport { SupportedNetwork, Environment } from './config/env';\n\n"],"names":["Environment","SupportedNetwork"],"mappings":"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","x_google_ignoreList":[0]}