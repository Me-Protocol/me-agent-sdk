{"version":3,"file":"me-agent-sdk.js","sources":["../node_modules/tslib/tslib.es6.js","../src/core/utils/formatters.ts","../src/services/session-service.ts","../src/core/constants/categories.ts","../src/services/message-parser.ts","../src/data/auth/magic-client.ts","../src/services/redemption-service.ts","../src/data/api/base-api.ts","../src/data/api/session-api.ts","../src/data/api/chat-api.ts","../src/data/api/offer-api.ts","../src/data/api/brand-api.ts","../src/data/api/reward-api.ts","../src/data/api/auth-api.ts","../src/data/api/api-client.ts","../src/views/shared/icons.ts","../src/views/components/button.ts","../src/views/components/message.ts","../src/views/components/quick-actions.ts","../src/views/components/card-list.ts","../src/views/components/offer-preview.ts","../src/types/offer.ts","../src/core/utils/discount.ts","../src/views/offers/offer-grid-view.ts","../src/views/offers/offer-detail-view.ts","../src/views/brands/brand-list-view.ts","../src/views/brands/brand-offers-view.ts","../src/views/categories/category-grid-view.ts","../src/controllers/detail-panel-controller.ts","../src/services/offer-service.ts","../src/services/brand-service.ts","../src/views/components/chat.ts","../src/views/shared/styles.ts","../src/core/config/env.ts","../src/sdk.ts","../src/index.ts"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n    ownKeys = Object.getOwnPropertyNames || function (o) {\r\n        var ar = [];\r\n        for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n        return ar;\r\n    };\r\n    return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    var r, s = 0;\r\n    function next() {\r\n        while (r = env.stack.pop()) {\r\n            try {\r\n                if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n                if (r.dispose) {\r\n                    var result = r.dispose.call(r.value);\r\n                    if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n                }\r\n                else s |= 1;\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n        return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n            return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n        });\r\n    }\r\n    return path;\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __esDecorate: __esDecorate,\r\n    __runInitializers: __runInitializers,\r\n    __propKey: __propKey,\r\n    __setFunctionName: __setFunctionName,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n    __rewriteRelativeImportExtension: __rewriteRelativeImportExtension,\r\n};\r\n","/**\n * Formatting Utilities\n * Pure helper functions for formatting numbers, currency, etc.\n */\n\n/**\n * Format a number with thousand separators\n * @example formatNumber(3000) => \"3,000\"\n */\nexport function formatNumber(num: number): string {\n  return num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\n/**\n * Format a price with 2 decimal places\n * @example formatPrice(19.99) => \"$19.99\"\n */\nexport function formatPrice(price: number): string {\n  return `$${price.toFixed(2)}`;\n}\n\n/**\n * Calculate discounted price\n * @example calculateDiscountedPrice(100, 20) => 80\n */\nexport function calculateDiscountedPrice(\n  price: number,\n  discountPercentage: number\n): number {\n  return price * (1 - discountPercentage / 100);\n}\n\n/**\n * Generate a unique ID\n * @example generateId() => \"1234567890-abc123def\"\n */\nexport function generateId(): string {\n  return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n}\n\n/**\n * Generate a UUID v4\n */\nexport function generateUUID(): string {\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\n    const r = (Math.random() * 16) | 0;\n    const v = c === \"x\" ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n","/**\n * Session Service\n * Business logic for session and message management\n */\n\nimport { Message, ChatState } from \"../types\";\nimport { SessionAPI } from \"../data/api/session-api\";\nimport { ChatAPI } from \"../data/api/chat-api\";\nimport { generateId } from \"../core/utils/formatters\";\n\n/**\n * Session Service\n * Handles session creation and message management\n */\nexport class SessionService {\n  private sessionId: string | null = null;\n  private messages: Message[] = [];\n\n  constructor(private sessionAPI: SessionAPI, private chatAPI: ChatAPI) {}\n\n  /**\n   * Initialize or get existing session\n   */\n  async getOrCreateSession(): Promise<string> {\n    if (!this.sessionId) {\n      this.sessionId = await this.sessionAPI.createSession();\n    }\n    return this.sessionId;\n  }\n\n  /**\n   * Get current session ID\n   */\n  getSessionId(): string | null {\n    return this.sessionId;\n  }\n\n  /**\n   * Send a message in the current session\n   */\n  async sendMessage(\n    content: string,\n    onChunk: (chunk: string, rawData?: any) => void,\n    onComplete: () => void,\n    onError: (error: Error) => void\n  ): Promise<void> {\n    const sessionId = await this.getOrCreateSession();\n\n    // Add user message to history\n    const userMessage = this.createMessage(\"user\", content);\n    this.messages.push(userMessage);\n\n    // Send via API\n    await this.chatAPI.sendMessage(\n      sessionId,\n      content,\n      onChunk,\n      onComplete,\n      onError\n    );\n  }\n\n  /**\n   * Add a message to history\n   */\n  addMessage(message: Message): void {\n    this.messages.push(message);\n  }\n\n  /**\n   * Update the last message content\n   */\n  updateLastMessage(content: string): void {\n    if (this.messages.length > 0) {\n      this.messages[this.messages.length - 1].content = content;\n    }\n  }\n\n  /**\n   * Get all messages\n   */\n  getMessages(): Message[] {\n    return [...this.messages];\n  }\n\n  /**\n   * Get chat state\n   */\n  getChatState(): ChatState {\n    return {\n      isOpen: false,\n      messages: this.getMessages(),\n      sessionId: this.sessionId,\n      isLoading: false,\n    };\n  }\n\n  /**\n   * Clear all messages\n   */\n  clearMessages(): void {\n    this.messages = [];\n  }\n\n  /**\n   * Create a message object\n   */\n  createMessage(\n    role: \"user\" | \"assistant\" | \"system\",\n    content: string\n  ): Message {\n    return {\n      id: generateId(),\n      role,\n      content,\n      timestamp: Date.now(),\n    };\n  }\n}\n","/**\n * Preset categories with images and icons\n * Maps category names to their visual assets\n */\nexport interface CategoryPreset {\n  id: number;\n  image: string;\n  title: string;\n  icon: string;\n  description: string;\n  // Map to backend category names\n  categoryNames: string[];\n}\n\nexport const PRESET_CATEGORIES: CategoryPreset[] = [\n  {\n    id: 1,\n    image:\n      \"https://res.cloudinary.com/dlwsf8xgj/image/upload/v1712589166/cate-1_qizn7y.png\",\n    title: \"Must Haves\",\n    icon: \"award\",\n    description: \"Essential products you shouldn't miss\",\n    categoryNames: [\"Must Haves\", \"Essentials\"],\n  },\n  {\n    id: 2,\n    image:\n      \"https://res.cloudinary.com/dlwsf8xgj/image/upload/v1712589166/cate7_tbhw5u.png\",\n    title: \"Cosmetics\",\n    icon: \"shirt\",\n    description: \"Beauty and personal care products\",\n    categoryNames: [\"Cosmetics\", \"Beauty\"],\n  },\n  {\n    id: 3,\n    image:\n      \"https://res.cloudinary.com/dlwsf8xgj/image/upload/v1712589167/cate2_gtjck8.png\",\n    title: \"Travel &\\nExperiences\",\n    icon: \"heartPulse\",\n    description: \"Destinations and unforgettable moments\",\n    categoryNames: [\"Travel\", \"Experiences\", \"Travel & Experiences\"],\n  },\n  {\n    id: 6,\n    image:\n      \"https://res.cloudinary.com/dlwsf8xgj/image/upload/v1712589167/cate-4_uxqxqx.png\",\n    title: \"Sneakers\",\n    icon: \"sofa\",\n    description: \"Stylish footwear for all occasions\",\n    categoryNames: [\"Sneakers\", \"Shoes\", \"Footwear\"],\n  },\n  {\n    id: 7,\n    image:\n      \"https://res.cloudinary.com/dlwsf8xgj/image/upload/v1712589167/cate-5_zxqxqx.png\",\n    title: \"Food &\\nBeverages\",\n    icon: \"tag\",\n    description: \"Culinary delights and refreshments\",\n    categoryNames: [\n      \"Food\",\n      \"Beverages\",\n      \"Food & Beverages\",\n      \"Food and beverages\",\n    ],\n  },\n  {\n    id: 8,\n    image:\n      \"https://res.cloudinary.com/dlwsf8xgj/image/upload/v1712589168/cate-3_sports.png\",\n    title: \"Deals &\\nSports\",\n    icon: \"layoutGrid\",\n    description: \"Sporting goods and special offers\",\n    categoryNames: [\"Sports\", \"Sport deals\", \"Deals\"],\n  },\n  {\n    id: 5,\n    image:\n      \"https://res.cloudinary.com/dlwsf8xgj/image/upload/v1712589167/cate-6_pfxfbq.png\",\n    title: \"Gadgets &\\nElectronics\",\n    icon: \"laptop\",\n    description: \"Tech products and accessories\",\n    categoryNames: [\"Electronics\", \"Gadgets\", \"Tech\"],\n  },\n  {\n    id: 4,\n    image:\n      \"https://res.cloudinary.com/dlwsf8xgj/image/upload/v1712589168/cate-8_s6yf5z.png\",\n    title: \"Art &\\nCollectibles\",\n    icon: \"bookOpen\",\n    description: \"Unique items for collectors\",\n    categoryNames: [\"Art\", \"Collectibles\", \"Art & Collectibles\"],\n  },\n];\n\n/**\n * Get preset category by category name from backend\n */\nexport function getCategoryPreset(\n  categoryName: string\n): CategoryPreset | undefined {\n  return PRESET_CATEGORIES.find((preset) =>\n    preset.categoryNames.some(\n      (name) => name.toLowerCase() === categoryName.toLowerCase()\n    )\n  );\n}\n\n/**\n * Merge backend categories with presets\n */\nexport function mergeCategoriesWithPresets(\n  backendCategories: Array<{\n    categoryId: string;\n    categoryName: string;\n    brandCount: number;\n  }>\n): Array<{\n  categoryId: string;\n  categoryName: string;\n  brandCount: number;\n  image?: string;\n  title?: string;\n  icon?: string;\n  description?: string;\n}> {\n  return backendCategories.map((category) => {\n    const preset = getCategoryPreset(category.categoryName);\n    if (preset) {\n      return {\n        ...category,\n        image: preset.image,\n        title: preset.title,\n        icon: preset.icon,\n        description: preset.description,\n      };\n    }\n    return category;\n  });\n}\n","/**\n * Message Parser Service\n * Extracts structured data from AI agent responses\n */\n\nimport { Offer, Brand, Category } from \"../types\";\nimport { mergeCategoriesWithPresets } from \"../core/constants/categories\";\n\nexport interface ParsedMessageData {\n  offers: Offer[];\n  brands: Brand[];\n  categories: Category[];\n  showWaysToEarn: boolean;\n}\n\n/**\n * Message Parser Service\n * Handles parsing of AI agent responses and function calls/responses\n */\nexport class MessageParser {\n  /**\n   * Parse raw AI response data into structured format\n   */\n  parseMessageData(rawData: any): ParsedMessageData {\n    let offers: Offer[] = [];\n    let brands: Brand[] = [];\n    let categories: Category[] = [];\n    let showWaysToEarn = false;\n\n    const functionResponse = rawData.content?.parts?.[0]?.functionResponse;\n    const functionCall = rawData.content?.parts?.[0]?.functionCall;\n\n    if (functionResponse) {\n      if (functionResponse.name === \"query_offers\") {\n        const matches = functionResponse.response?.matches || [];\n        offers = this.parseOffers(matches);\n      } else if (functionResponse.name === \"get_signup_earning_brands\") {\n        const rawBrands = functionResponse.response?.brands || [];\n        brands = this.parseBrands(rawBrands);\n      } else if (functionResponse.name === \"get_category_purchase_earning\") {\n        const rawCategories = functionResponse.response?.categories || [];\n        categories = mergeCategoriesWithPresets(rawCategories);\n      }\n    } else if (functionCall?.name === \"ways_to_earn\") {\n      showWaysToEarn = true;\n    }\n\n    return { offers, brands, categories, showWaysToEarn };\n  }\n\n  /**\n   * Parse offers from query_offers function response\n   * New format:\n   * [0] = id, [1] = name, [2] = offerCode, [3] = price, [4] = description,\n   * [5] = available methods, [6] = discountType, [7] = discountDetails array,\n   * [8] = variant title, [9] = null, [10] = null, [11] = brandName, [12] = image\n   */\n  private parseOffers(matches: any[]): Offer[] {\n    return matches.map((match: any[]) => ({\n      id: match[0] || \"\",\n      name: match[1] || \"Unnamed Offer\",\n      offerCode: match[2] || \"\",\n      price: match[3] || 0,\n      description: match[4] || \"\",\n      discountType: match[6] || \"\",\n      discountDetails: match[7] || [],\n      brandName: match[11] || \"Unknown Brand\",\n      image: match[12] || undefined,\n    }));\n  }\n\n  /**\n   * Parse brands from get_signup_earning_brands function response\n   */\n  private parseBrands(brands: any[]): Brand[] {\n    return brands.map((brand: any) => ({\n      id: brand.id || \"\",\n      name: brand.name || \"Unknown Brand\",\n      logoUrl: brand.logoUrl || null,\n      description: brand.description || null,\n      websiteUrl: brand.websiteUrl || null,\n      shopifyStoreUrl: brand.shopifyStoreUrl || null,\n      network: brand.network || \"sepolia\",\n      categoryId: brand.categoryId || \"\",\n      categoryName: brand.categoryName || \"Unknown Category\",\n      rewardDetails: brand.rewardDetails || {\n        earningMethodId: \"\",\n        earningType: \"sign_up\",\n        isActive: true,\n        rewardExistingCustomers: false,\n        rewardInfo: {\n          id: \"\",\n          rewardName: \"\",\n          rewardSymbol: \"\",\n          rewardImage: \"\",\n          rewardValueInDollars: \"0\",\n          rewardOriginalValue: \"0\",\n        },\n        rules: [],\n      },\n    }));\n  }\n}\n","/**\n * Magic Link Client Wrapper\n * Handles authentication and wallet operations\n */\n\ndeclare global {\n  interface Window {\n    Magic: any;\n  }\n}\n\nexport interface MagicConfig {\n  apiKey: string;\n  chainId: string;\n  rpcUrl: string;\n}\n\nexport class MagicClient {\n  private magic: any = null;\n  private initialized = false;\n  private config: MagicConfig;\n\n  constructor(config: MagicConfig) {\n    this.config = config;\n  }\n\n  /**\n   * Initialize Magic SDK\n   * Loads the Magic SDK from CDN if not already loaded\n   */\n  async init(): Promise<void> {\n    if (this.initialized) {\n      return;\n    }\n\n    // Load Magic SDK from CDN if not already loaded\n    if (!window.Magic) {\n      await this.loadMagicSDK();\n    }\n\n    // Initialize Magic instance with network configuration\n    this.magic = new window.Magic(this.config.apiKey, {\n      network: {\n        rpcUrl: this.config.rpcUrl,\n        chainId: parseInt(this.config.chainId),\n      },\n    });\n    this.initialized = true;\n  }\n\n  /**\n   * Load Magic SDK from CDN\n   */\n  private loadMagicSDK(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      // Check if already loaded\n      if (window.Magic) {\n        resolve();\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://auth.magic.link/sdk\";\n      script.async = true;\n      script.onload = () => {\n        // Wait a bit for Magic to be available\n        setTimeout(() => resolve(), 100);\n      };\n      script.onerror = () => reject(new Error(\"Failed to load Magic SDK\"));\n      document.head.appendChild(script);\n    });\n  }\n\n  /**\n   * Check if user is logged in\n   */\n  async isLoggedIn(): Promise<boolean> {\n    if (!this.initialized) {\n      await this.init();\n    }\n\n    try {\n      return await this.magic.user.isLoggedIn();\n    } catch (error) {\n      console.error(\"Error checking Magic login status:\", error);\n      return false;\n    }\n  }\n\n  /**\n   * Get user metadata (including wallet address)\n   */\n  async getUserMetadata(): Promise<{\n    publicAddress: string;\n    email: string | null;\n  }> {\n    if (!this.initialized) {\n      await this.init();\n    }\n\n    try {\n      // Magic SDK uses getInfo() method, not getMetadata()\n      const metadata = await this.magic.user.getInfo();\n\n      // Extract wallet address from the wallets object\n      const publicAddress = metadata?.wallets?.ethereum?.publicAddress;\n\n      if (!publicAddress) {\n        console.error(\n          \"Failed to extract wallet address from metadata:\",\n          metadata\n        );\n        throw new Error(\n          \"Magic returned invalid user metadata - no Ethereum wallet address found\"\n        );\n      }\n\n      return {\n        publicAddress,\n        email: metadata.email || null,\n      };\n    } catch (error) {\n      console.error(\"Error getting Magic user metadata:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Login with email OTP\n   */\n  async loginWithEmailOTP(email: string): Promise<string> {\n    if (!this.initialized) {\n      await this.init();\n    }\n\n    try {\n      // Magic SDK v11+ uses loginWithEmailOTP directly on auth\n      const didToken = await this.magic.auth.loginWithEmailOTP({\n        email,\n        showUI: true, // Show Magic's UI for OTP entry\n      });\n      return didToken;\n    } catch (error) {\n      console.error(\"Error logging in with Magic:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Logout\n   */\n  async logout(): Promise<void> {\n    if (!this.initialized) {\n      return;\n    }\n\n    try {\n      await this.magic.user.logout();\n    } catch (error) {\n      console.error(\"Error logging out from Magic:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get wallet address (shortcut method)\n   */\n  async getWalletAddress(): Promise<string> {\n    const metadata = await this.getUserMetadata();\n    return metadata.publicAddress;\n  }\n}\n","/**\n * Redemption Service\n * Handles the complete offer redemption flow\n */\n\nimport { MagicClient, MagicConfig } from \"../data/auth/magic-client\";\nimport { AuthAPI } from \"../data/api/auth-api\";\nimport { RewardAPI } from \"../data/api/reward-api\";\nimport {\n  OfferDetail,\n  RewardBalance,\n  SwapAmountResponse,\n  SwapAmountPayload,\n} from \"../types\";\n\nexport class RedemptionService {\n  private magicClient: MagicClient | null = null;\n  private authAPI: AuthAPI;\n  private rewardAPI: RewardAPI;\n  private walletAddress: string | null = null;\n  private balances: RewardBalance[] = [];\n  private openRewardDiamond: string;\n  private meProtocolLoggedIn: boolean = false;\n  private currentEmail: string | null = null;\n  private meProtocolToken: string | null = null;\n\n  constructor(\n    authAPI: AuthAPI,\n    rewardAPI: RewardAPI,\n    magicConfig: MagicConfig,\n    openRewardDiamond: string\n  ) {\n    this.authAPI = authAPI;\n    this.rewardAPI = rewardAPI;\n    this.magicClient = new MagicClient(magicConfig);\n    this.openRewardDiamond = openRewardDiamond;\n  }\n\n  /**\n   * Get email from stored or config\n   */\n  getEmail(): string | null {\n    return this.currentEmail || this.authAPI.getUserEmail() || null;\n  }\n\n  /**\n   * Set email (for OTP flow)\n   */\n  setEmail(email: string): void {\n    this.currentEmail = email;\n  }\n\n  /**\n   * Check if Magic is configured\n   */\n  isMagicConfigured(): boolean {\n    return this.magicClient !== null;\n  }\n\n  /**\n   * Check if user is authenticated\n   */\n  async isAuthenticated(): Promise<boolean> {\n    if (!this.magicClient) {\n      return false;\n    }\n\n    try {\n      return await this.magicClient.isLoggedIn();\n    } catch (error) {\n      console.error(\"Error checking authentication:\", error);\n      return false;\n    }\n  }\n\n  /**\n   * Get wallet address (with force refresh option)\n   */\n  async getWalletAddress(forceRefresh: boolean = false): Promise<string> {\n    // Use cached value unless force refresh is requested\n    if (this.walletAddress && !forceRefresh) {\n      return this.walletAddress;\n    }\n\n    if (!this.magicClient) {\n      throw new Error(\"Magic is not configured\");\n    }\n\n    try {\n      // First verify user is logged in\n      const isLoggedIn = await this.magicClient.isLoggedIn();\n\n      if (!isLoggedIn) {\n        throw new Error(\"User is not logged in to Magic\");\n      }\n\n      // Retry logic for fetching wallet address (Magic might need a moment)\n      let retries = 3;\n      let lastError: Error | null = null;\n\n      while (retries > 0) {\n        try {\n          // Fetch wallet address from Magic\n          this.walletAddress = await this.magicClient.getWalletAddress();\n\n          if (this.walletAddress) {\n            return this.walletAddress;\n          }\n\n          // If null, wait and retry\n          console.warn(\"Wallet address is null, retrying...\");\n          await new Promise((resolve) => setTimeout(resolve, 1000));\n          retries--;\n        } catch (err) {\n          lastError = err as Error;\n          console.warn(`Error on attempt ${4 - retries}:`, err);\n          await new Promise((resolve) => setTimeout(resolve, 1000));\n          retries--;\n        }\n      }\n\n      // All retries failed\n      throw new Error(\n        `Failed to retrieve wallet address from Magic after 3 attempts. Last error: ${\n          lastError?.message || \"Unknown\"\n        }`\n      );\n    } catch (error) {\n      console.error(\"Error getting wallet address:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Clear cached wallet address (useful after logout or re-authentication)\n   */\n  clearWalletAddressCache(): void {\n    this.walletAddress = null;\n  }\n\n  /**\n   * Send OTP to email\n   */\n  async sendOTP(email: string): Promise<void> {\n    if (!this.magicClient) {\n      throw new Error(\"Magic is not configured\");\n    }\n\n    try {\n      this.currentEmail = email; // Store email for later use\n      await this.magicClient.loginWithEmailOTP(email);\n    } catch (error) {\n      console.error(\"Error sending OTP:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Login to ME Protocol (creates account if new user)\n   */\n  async loginToMEProtocol(): Promise<void> {\n    try {\n      const email = this.getEmail();\n\n      if (!email) {\n        throw new Error(\"Email not available\");\n      }\n\n      // Force refresh wallet address to ensure we have the latest from Magic\n      const walletAddress = await this.getWalletAddress(true);\n\n      // Login to ME Protocol (this creates account if new user)\n      const loginResponse = await this.authAPI.meProtocolLogin(\n        email,\n        walletAddress\n      );\n\n      if (loginResponse.data.user && loginResponse.data.token) {\n        this.meProtocolLoggedIn = true;\n        this.meProtocolToken = loginResponse.data.token; // Store the token\n      } else {\n        throw new Error(\"Login failed\");\n      }\n    } catch (error) {\n      console.error(\"Error logging in to ME Protocol:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Check if user is logged in to ME Protocol\n   */\n  isMEProtocolLoggedIn(): boolean {\n    return this.meProtocolLoggedIn;\n  }\n\n  /**\n   * Fetch user's reward balances\n   */\n  async fetchBalances(): Promise<RewardBalance[]> {\n    try {\n      const walletAddress = await this.getWalletAddress();\n\n      if (!this.meProtocolToken) {\n        throw new Error(\"ME Protocol token not available. Please login first.\");\n      }\n\n      const balances = await this.rewardAPI.fetchRewardBalances(\n        walletAddress,\n        this.meProtocolToken\n      );\n      this.balances = balances;\n      return balances;\n    } catch (error) {\n      console.error(\"Error fetching balances:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Calculate swap amount for redemption\n   */\n  async calculateSwapAmount(\n    selectedRewardAddress: string,\n    offerDetail: OfferDetail,\n    selectedVariantId?: string\n  ): Promise<SwapAmountResponse> {\n    try {\n      const walletAddress = await this.getWalletAddress();\n\n      if (!this.meProtocolToken) {\n        throw new Error(\"ME Protocol token not available. Please login first.\");\n      }\n\n      // Use provided variant ID, or first variant if available\n      let variantId = selectedVariantId;\n      if (\n        !variantId &&\n        offerDetail.offerVariants &&\n        offerDetail.offerVariants.length > 0\n      ) {\n        variantId = offerDetail.offerVariants[0].id;\n      }\n\n      const payload: SwapAmountPayload = {\n        walletAddress,\n        inputRewardAddress: selectedRewardAddress, // The reward the user wants to use\n        outPutRewardAddress: offerDetail.reward.contractAddress, // The reward from the offer\n        redemptionMethodId: offerDetail.redemptionMethod.id,\n        offerId: offerDetail.id,\n        variantId,\n        brandId: offerDetail.brand.id,\n      };\n\n      const result = await this.rewardAPI.fetchSwapAmount(\n        payload,\n        this.meProtocolToken\n      );\n\n      return result;\n    } catch (error) {\n      console.error(\"Error calculating swap amount:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Update Magic network configuration\n   */\n  async updateNetwork(brandNetwork: string): Promise<void> {\n    if (!this.magicClient) {\n      return;\n    }\n\n    try {\n      // Network configuration is already handled by env config\n      // Brand network is used for Magic Link initialization\n    } catch (error) {\n      console.error(\"Error updating network:\", error);\n    }\n  }\n\n  /**\n   * Check if user can afford the offer with selected reward\n   */\n  canAffordOffer(selectedReward: RewardBalance, amountNeeded: number): boolean {\n    return selectedReward.balance >= amountNeeded;\n  }\n\n  /**\n   * Get cached balances\n   */\n  getCachedBalances(): RewardBalance[] {\n    return this.balances;\n  }\n\n  /**\n   * Clear wallet address cache\n   */\n  clearCache(): void {\n    this.walletAddress = null;\n    this.balances = [];\n  }\n\n  /**\n   * Logout - REMOVED: Users should stay logged in\n   * Kept for backward compatibility but does nothing\n   */\n  async logout(): Promise<void> {\n    // Do nothing - users stay logged in with Magic\n  }\n}\n","/**\n * Base API Client\n * Foundation for all domain-specific API clients\n */\n\nimport { MeAgentConfig, EnvConfig } from \"../../types\";\nimport { generateUUID } from \"../../core/utils/formatters\";\n\nexport class BaseAPI {\n  protected config: MeAgentConfig;\n  protected env: EnvConfig;\n  protected userId: string;\n\n  constructor(config: MeAgentConfig, env: EnvConfig) {\n    this.config = config;\n    this.env = env;\n    this.userId = config.userId || generateUUID();\n  }\n\n  /**\n   * Get user ID\n   */\n  getUserId(): string {\n    return this.userId;\n  }\n\n  /**\n   * Get user email from config\n   */\n  getUserEmail(): string | undefined {\n    return this.config.emailAddress;\n  }\n\n  /**\n   * Make a GET request\n   */\n  protected async get<T>(\n    url: string,\n    headers: Record<string, string> = {}\n  ): Promise<T> {\n    const response = await fetch(url, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...headers,\n      },\n    });\n\n    if (!response.ok) {\n      throw new Error(`GET ${url} failed: ${response.statusText}`);\n    }\n\n    return await response.json();\n  }\n\n  /**\n   * Make a POST request\n   */\n  protected async post<T>(\n    url: string,\n    body: any,\n    headers: Record<string, string> = {}\n  ): Promise<T> {\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...headers,\n      },\n      body: JSON.stringify(body),\n    });\n\n    if (!response.ok) {\n      throw new Error(`POST ${url} failed: ${response.statusText}`);\n    }\n\n    return await response.json();\n  }\n}\n","/**\n * Session API\n * Handles session creation and management\n */\n\nimport { BaseAPI } from \"./base-api\";\nimport { SessionResponse } from \"../../types\";\n\nexport class SessionAPI extends BaseAPI {\n  /**\n   * Create a new chat session\n   */\n  async createSession(): Promise<string> {\n    try {\n      const data = await this.post<SessionResponse>(\n        `${this.env.AGENT_BASE_URL}/apps/consumer/users/${this.userId}/sessions`,\n        {}\n      );\n      return data.id;\n    } catch (error) {\n      console.error(\"Error creating session:\", error);\n      throw error;\n    }\n  }\n}\n","/**\n * Chat API\n * Handles chat messages and SSE streaming\n */\n\nimport { BaseAPI } from \"./base-api\";\nimport { SendMessagePayload } from \"../../types\";\n\nexport class ChatAPI extends BaseAPI {\n  /**\n   * Send a message and handle streaming response via SSE\n   */\n  async sendMessage(\n    sessionId: string,\n    message: string,\n    onChunk: (chunk: string, rawData?: any) => void,\n    onComplete: () => void,\n    onError: (error: Error) => void\n  ): Promise<void> {\n    try {\n      const payload: SendMessagePayload = {\n        appName: \"consumer\",\n        userId: this.userId,\n        sessionId: sessionId,\n        newMessage: {\n          parts: [{ text: message }],\n          role: \"user\",\n        },\n        streaming: true,\n      };\n\n      const headers: Record<string, string> = {};\n\n      // Add email header if provided\n      if (this.config.emailAddress) {\n        headers[\"x-user-email\"] = this.config.emailAddress;\n      }\n\n      const response = await fetch(`${this.env.AGENT_BASE_URL}/run_sse`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...headers,\n        },\n        body: JSON.stringify(payload),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Failed to send message: ${response.statusText}`);\n      }\n\n      // Handle SSE streaming response\n      await this.handleSSEStream(response, onChunk, onComplete);\n    } catch (error) {\n      console.error(\"Error sending message:\", error);\n      onError(error as Error);\n    }\n  }\n\n  /**\n   * Handle Server-Sent Events (SSE) stream\n   */\n  private async handleSSEStream(\n    response: Response,\n    onChunk: (chunk: string, rawData?: any) => void,\n    onComplete: () => void\n  ): Promise<void> {\n    const reader = response.body?.getReader();\n    const decoder = new TextDecoder();\n\n    if (!reader) {\n      throw new Error(\"Response body is not readable\");\n    }\n\n    let buffer = \"\";\n\n    while (true) {\n      const { done, value } = await reader.read();\n\n      if (done) {\n        onComplete();\n        break;\n      }\n\n      buffer += decoder.decode(value, { stream: true });\n      const lines = buffer.split(\"\\n\");\n      buffer = lines.pop() || \"\";\n\n      for (const line of lines) {\n        if (line.startsWith(\"data: \")) {\n          const data = line.slice(6).trim();\n          if (data && data !== \"[DONE]\") {\n            this.processSSEData(data, onChunk);\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Process individual SSE data chunks\n   */\n  private processSSEData(\n    data: string,\n    onChunk: (chunk: string, rawData?: any) => void\n  ): void {\n    try {\n      const parsed = JSON.parse(data);\n\n      // Extract text from content.parts[0].text\n      if (parsed.content?.parts?.[0]?.text) {\n        const text = parsed.content.parts[0].text;\n        onChunk(text, parsed);\n      } else if (parsed.content?.parts?.[0]?.functionCall) {\n        // Function call - pass along but no text chunk\n        onChunk(\"\", parsed);\n      } else if (parsed.content?.parts?.[0]?.functionResponse) {\n        // Function response - pass along but no text chunk\n        onChunk(\"\", parsed);\n      } else if (parsed.chunk) {\n        onChunk(parsed.chunk, parsed);\n      } else if (parsed.text) {\n        onChunk(parsed.text, parsed);\n      }\n    } catch (e) {\n      // If not JSON, treat as plain text chunk\n      onChunk(data);\n    }\n  }\n}\n","/**\n * Offer API\n * Handles offer-related endpoints\n */\n\nimport { BaseAPI } from \"./base-api\";\nimport { OfferDetail } from \"../../types\";\n\nexport class OfferAPI extends BaseAPI {\n  /**\n   * Fetch detailed information about a specific offer\n   */\n  async fetchOfferDetails(\n    offerCode: string,\n    sessionId: string\n  ): Promise<OfferDetail> {\n    try {\n      const result = await this.get<{ data: OfferDetail }>(\n        `${this.env.API_V1_URL}store/offer/${offerCode}?sessionId=${sessionId}`\n      );\n      return result.data;\n    } catch (error) {\n      console.error(\"Error fetching offer details:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Fetch offers by brand ID\n   */\n  async fetchOffersByBrandId(brandId: string, token?: string): Promise<any[]> {\n    try {\n      const headers: Record<string, string> = {};\n\n      if (token) {\n        headers[\"authorization\"] = `Bearer ${token}`;\n      }\n\n      const result = await this.get<{ data: { offers: any[] } }>(\n        `${this.env.API_V1_URL}store/offer?page=1&limit=50&brandId=${brandId}`,\n        headers\n      );\n\n      return result.data?.offers || [];\n    } catch (error) {\n      console.error(\"Error fetching offers by brand:\", error);\n      throw error;\n    }\n  }\n}\n","/**\n * Brand API\n * Handles brand-related endpoints\n */\n\nimport { BaseAPI } from \"./base-api\";\n\nexport class BrandAPI extends BaseAPI {\n  /**\n   * Fetch brands by category ID with purchase earning methods\n   */\n  async fetchBrandsByCategoryId(categoryId: string): Promise<any[]> {\n    try {\n      const result = await this.get<{ data: any[] }>(\n        `${this.env.API_URL}brands/earning-methods/purchase/categories/${categoryId}/brands`\n      );\n      return result.data || [];\n    } catch (error) {\n      console.error(\"Error fetching brands by category:\", error);\n      throw error;\n    }\n  }\n}\n","/**\n * Reward API\n * Handles reward and redemption endpoints\n */\n\nimport { BaseAPI } from \"./base-api\";\nimport { SwapAmountPayload, SwapAmountResponse } from \"../../types\";\n\nexport class RewardAPI extends BaseAPI {\n  /**\n   * Fetch user reward balances\n   */\n  async fetchRewardBalances(\n    walletAddress: string,\n    token: string\n  ): Promise<any[]> {\n    try {\n      const result = await this.get<{ data: any[] }>(\n        `${this.env.API_URL}reward/sdk/balances?walletAddress=${walletAddress}`,\n        { \"x-access-token\": token }\n      );\n      return result.data || [];\n    } catch (error) {\n      console.error(\"Error fetching reward balances:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Fetch swap amount needed for redemption\n   */\n  async fetchSwapAmount(\n    payload: SwapAmountPayload,\n    token: string\n  ): Promise<SwapAmountResponse> {\n    try {\n      const result = await this.post<{ data: SwapAmountResponse }>(\n        `${this.env.API_URL}reward/sdk/swap-amount`,\n        payload,\n        { \"x-access-token\": token }\n      );\n      return result.data;\n    } catch (error) {\n      console.error(\"Error fetching swap amount:\", error);\n      throw error;\n    }\n  }\n}\n","/**\n * Auth API\n * Handles authentication endpoints\n */\n\nimport { BaseAPI } from \"./base-api\";\nimport { MELoginResponse } from \"../../types\";\n\nexport class AuthAPI extends BaseAPI {\n  /**\n   * Login to ME Protocol (creates account if new user)\n   */\n  async meProtocolLogin(\n    email: string,\n    walletAddress: string\n  ): Promise<MELoginResponse> {\n    try {\n      const data = await this.post<MELoginResponse>(\n        `${this.env.API_URL}auth/sdk/login`,\n        {\n          walletAddress,\n          email,\n        }\n      );\n      return data;\n    } catch (error) {\n      console.error(\"Error in ME Protocol login:\", error);\n      throw error;\n    }\n  }\n}\n","/**\n * Unified API Client\n * Combines all domain-specific API clients into a single facade\n */\n\nimport { MeAgentConfig, EnvConfig } from \"../../types\";\nimport { SessionAPI } from \"./session-api\";\nimport { ChatAPI } from \"./chat-api\";\nimport { OfferAPI } from \"./offer-api\";\nimport { BrandAPI } from \"./brand-api\";\nimport { RewardAPI } from \"./reward-api\";\nimport { AuthAPI } from \"./auth-api\";\n\n/**\n * Main API Client - Facade for all domain APIs\n */\nexport class APIClient {\n  // Domain-specific APIs\n  private _sessionAPI: SessionAPI;\n  private _chatAPI: ChatAPI;\n  private _offerAPI: OfferAPI;\n  private _brandAPI: BrandAPI;\n  private _rewardAPI: RewardAPI;\n  private _authAPI: AuthAPI;\n\n  constructor(config: MeAgentConfig, env: EnvConfig) {\n    // Initialize all domain APIs\n    this._sessionAPI = new SessionAPI(config, env);\n    this._chatAPI = new ChatAPI(config, env);\n    this._offerAPI = new OfferAPI(config, env);\n    this._brandAPI = new BrandAPI(config, env);\n    this._rewardAPI = new RewardAPI(config, env);\n    this._authAPI = new AuthAPI(config, env);\n  }\n\n  // ===== API Access (for services) =====\n  get brandAPI(): BrandAPI {\n    return this._brandAPI;\n  }\n\n  get offerAPI(): OfferAPI {\n    return this._offerAPI;\n  }\n\n  // ===== User Info =====\n  getUserEmail(): string | undefined {\n    return this._sessionAPI.getUserEmail();\n  }\n\n  getUserId(): string {\n    return this._sessionAPI.getUserId();\n  }\n\n  // ===== Session Management =====\n  async createSession(): Promise<string> {\n    return this._sessionAPI.createSession();\n  }\n\n  // ===== Chat & Messaging =====\n  async sendMessage(\n    sessionId: string,\n    message: string,\n    onChunk: (chunk: string, rawData?: any) => void,\n    onComplete: () => void,\n    onError: (error: Error) => void\n  ): Promise<void> {\n    return this._chatAPI.sendMessage(\n      sessionId,\n      message,\n      onChunk,\n      onComplete,\n      onError\n    );\n  }\n\n  // ===== Offers =====\n  async fetchOfferDetails(offerCode: string, sessionId: string) {\n    return this._offerAPI.fetchOfferDetails(offerCode, sessionId);\n  }\n\n  async fetchOffersByBrandId(brandId: string, token?: string) {\n    return this._offerAPI.fetchOffersByBrandId(brandId, token);\n  }\n\n  // ===== Brands =====\n  async fetchBrandsByCategoryId(categoryId: string) {\n    return this._brandAPI.fetchBrandsByCategoryId(categoryId);\n  }\n\n  // ===== Rewards & Redemption =====\n  async fetchRewardBalances(walletAddress: string, token: string) {\n    return this._rewardAPI.fetchRewardBalances(walletAddress, token);\n  }\n\n  async fetchSwapAmount(payload: any, token: string) {\n    return this._rewardAPI.fetchSwapAmount(payload, token);\n  }\n\n  // ===== Authentication =====\n  async meProtocolLogin(email: string, walletAddress: string) {\n    return this._authAPI.meProtocolLogin(email, walletAddress);\n  }\n}\n","/**\n * SVG Icons for ME Agent SDK\n * Each icon function accepts optional width, height, and color parameters\n */\n\ninterface IconOptions {\n  width?: string | number;\n  height?: string | number;\n  color?: string;\n  className?: string;\n}\n\n/**\n * Main ME Agent Bot Icon (for the chat button)\n */\nexport function getBotIcon(options: IconOptions = {}): string {\n  const { width = 37, height = 40, color = \"white\", className = \"\" } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 37 40\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n      <path d=\"M23.4571 18.3143V21.1714M11.8857 18.3143V21.1714M13.3321 29.7429C13.3321 29.7429 14.7786 31.1714 17.6714 31.1714C20.5643 31.1714 22.0107 29.7429 22.0107 29.7429M16.225 18.3143V25.4572H17.6714\" stroke=\"${color}\" stroke-width=\"2.4\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n      <path d=\"M33.475 18.4767C33.9723 18.4767 34.4492 18.2791 34.8008 17.9275C35.1525 17.5759 35.35 17.099 35.35 16.6017V12.8517C35.35 12.3544 35.1525 11.8775 34.8008 11.5259C34.4492 11.1742 33.9723 10.9767 33.475 10.9767H3.475C2.97772 10.9767 2.50081 11.1742 2.14918 11.5259C1.79754 11.8775 1.6 12.3544 1.6 12.8517V16.6017C1.6 17.099 1.79754 17.5759 2.14918 17.9275C2.50081 18.2791 2.97772 18.4767 3.475 18.4767\" stroke=\"${color}\" stroke-width=\"3.2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n      <path d=\"M10.0308 10.9758C8.7876 10.9758 7.59532 10.482 6.71624 9.6029C5.83716 8.72382 5.3433 7.53153 5.3433 6.28833C5.3433 5.04513 5.83716 3.85284 6.71624 2.97377C7.59532 2.09469 8.7876 1.60083 10.0308 1.60083C11.8396 1.56932 13.6121 2.44694 15.1172 4.11926C16.6223 5.79157 17.7901 8.18096 18.4683 10.9758C19.1465 8.18096 20.3143 5.79157 21.8194 4.11926C23.3245 2.44694 25.097 1.56932 26.9058 1.60083C28.149 1.60083 29.3413 2.09469 30.2204 2.97377C31.0994 3.85284 31.5933 5.04513 31.5933 6.28833C31.5933 7.53153 31.0994 8.72382 30.2204 9.6029C29.3413 10.482 28.149 10.9758 26.9058 10.9758\" stroke=\"${color}\" stroke-width=\"3.2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n      <path d=\"M33.7429 18.3143C33.7429 18.3143 32.3666 18.3869 31.8143 18.9572C31.2733 19.5157 31.225 20.8589 31.225 20.8589V33.85C31.225 34.8446 30.8299 35.7984 30.1266 36.5017C29.4234 37.2049 28.4696 37.6 27.475 37.6L8.725 37.6C7.73044 37.6 6.77661 37.2049 6.07335 36.5017C5.37009 35.7984 4.975 34.8446 4.975 33.85V20.8589C4.975 20.8589 4.89952 19.6862 4.17143 18.9572C3.46158 18.2464 2.40357 18.1536 2.40357 18.1536\" stroke=\"${color}\" stroke-width=\"3.2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Close/X Icon (for close buttons)\n */\nexport function getCloseIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n        <path d=\"M8 8L13 13M8 8L3 3M8 8L3 13M8 8L13 3\" stroke=\"${color}\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Send/Arrow Icon (for send message button)\n */\nexport function getSendIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n      <path d=\"M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Chevron/Arrow Back Icon (for back navigation)\n */\nexport function getChevronLeftIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n      <path d=\"M15 18L9 12L15 6\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Maximize/Expand Icon (for expanding the chat window)\n */\nexport function getMaximizeIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n        <rect x=\"2\" y=\"3\" width=\"12\" height=\"10\" rx=\"2\" stroke=\"${color}\"/>\n        <rect x=\"8\" y=\"4\" width=\"5\" height=\"8\" rx=\"1\" fill=\"${color}\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Minimize Icon (for minimizing the chat window)\n */\nexport function getMinimizeIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n        <rect x=\"2\" y=\"3\" width=\"12\" height=\"10\" rx=\"2\" stroke=\"${color}\"/>\n        <rect x=\"8\" y=\"4\" width=\"5\" height=\"8\" rx=\"1\" fill=\"${color}\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Loading/Spinner Icon (for loading states)\n */\nexport function getLoadingIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className} me-agent-spin\">\n      <path d=\"M12 2V6M12 18V22M6 12H2M22 12H18M19.07 4.93L16.24 7.76M7.76 16.24L4.93 19.07M19.07 19.07L16.24 16.24M7.76 7.76L4.93 4.93\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Check/Success Icon (for success states)\n */\nexport function getCheckIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n      <path d=\"M20 6L9 17L4 12\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Error/Alert Icon (for error states)\n */\nexport function getErrorIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n      <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"${color}\" stroke-width=\"2\"/>\n      <path d=\"M12 8V12M12 16H12.01\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Gift/Rewards Icon (for rewards/offers)\n */\nexport function getGiftIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n      <rect x=\"3\" y=\"8\" width=\"18\" height=\"4\" rx=\"1\" stroke=\"${color}\" stroke-width=\"2\"/>\n      <rect x=\"5\" y=\"12\" width=\"14\" height=\"9\" rx=\"1\" stroke=\"${color}\" stroke-width=\"2\"/>\n      <path d=\"M12 8V21M9 8C9 6.34315 7.65685 5 6 5C4.34315 5 3 6.34315 3 8M15 8C15 6.34315 16.3431 5 18 5C19.6569 5 21 6.34315 21 8\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * User Avatar Icon (GitHub-style)\n */\nexport function getUserAvatarIcon(options: IconOptions = {}): string {\n  const {\n    width = 32,\n    height = 32,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n      <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"#667eea\"/>\n      <path d=\"M16 16C18.2091 16 20 14.2091 20 12C20 9.79086 18.2091 8 16 8C13.7909 8 12 9.79086 12 12C12 14.2091 13.7909 16 16 16Z\" fill=\"white\"/>\n      <path d=\"M16 18C11.5817 18 8 20.6863 8 24V26H24V24C24 20.6863 20.4183 18 16 18Z\" fill=\"white\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Assistant Avatar Icon (Bot)\n */\nexport function getAssistantAvatarIcon(options: IconOptions = {}): string {\n  const { width = 32, height = 32, color = \"white\", className = \"\" } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n        <rect width=\"${width}\" height=\"${height}\" rx=\"16\" fill=\"#0F0F0F\"/>\n        <path d=\"M18.5513 15.9277V17.3563M12.7656 15.9277V17.3563M13.4888 21.642C13.4888 21.642 14.2121 22.3563 15.6585 22.3563C17.1049 22.3563 17.8281 21.642 17.8281 21.642M14.9353 15.9277V19.4992H15.6585\" stroke=\"${color}\" stroke-width=\"1.6\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        <path d=\"M23.5625 15.4375C23.8111 15.4375 24.0496 15.3387 24.2254 15.1629C24.4012 14.9871 24.5 14.7486 24.5 14.5V12.625C24.5 12.3764 24.4012 12.1379 24.2254 11.9621C24.0496 11.7863 23.8111 11.6875 23.5625 11.6875H8.5625C8.31386 11.6875 8.0754 11.7863 7.89959 11.9621C7.72377 12.1379 7.625 12.3764 7.625 12.625V14.5C7.625 14.7486 7.72377 14.9871 7.89959 15.1629C8.0754 15.3387 8.31386 15.4375 8.5625 15.4375\" stroke=\"${color}\" stroke-width=\"1.6\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        <path d=\"M11.8437 11.6879C11.2221 11.6879 10.626 11.441 10.1865 11.0014C9.74693 10.5619 9.5 9.96576 9.5 9.34416C9.5 8.72256 9.74693 8.12642 10.1865 7.68688C10.626 7.24734 11.2221 7.00041 11.8437 7.00041C12.7481 6.98465 13.6344 7.42347 14.3869 8.25962C15.1395 9.09578 15.7234 10.2905 16.0625 11.6879C16.4016 10.2905 16.9855 9.09578 17.7381 8.25962C18.4906 7.42347 19.3769 6.98465 20.2812 7.00041C20.9028 7.00041 21.499 7.24734 21.9385 7.68688C22.3781 8.12642 22.625 8.72256 22.625 9.34416C22.625 9.96576 22.3781 10.5619 21.9385 11.0014C21.499 11.441 20.9028 11.6879 20.2812 11.6879\" stroke=\"${color}\" stroke-width=\"1.6\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        <path d=\"M23.6931 15.3577C23.6931 15.3577 23.005 15.394 22.7288 15.6791C22.4583 15.9584 22.4341 16.63 22.4341 16.63V23.1256C22.4341 23.6228 22.2366 24.0998 21.885 24.4514C21.5333 24.803 21.0564 25.0006 20.5592 25.0006L11.1842 25.0006C10.6869 25.0006 10.21 24.803 9.85833 24.4514C9.5067 24.0998 9.30915 23.6228 9.30915 23.1256V16.63C9.30915 16.63 9.27141 16.0437 8.90737 15.6791C8.55244 15.3237 8.02344 15.2773 8.02344 15.2773\" stroke=\"${color}\" stroke-width=\"1.6\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Search Icon (for quick actions)\n */\nexport function getSearchIcon(options: IconOptions = {}): string {\n  const {\n    width = 20,\n    height = 20,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n      <circle cx=\"11\" cy=\"11\" r=\"8\" stroke=\"${color}\" stroke-width=\"2\"/>\n      <path d=\"M21 21L16.5 16.5\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Sparkles Icon (for AI suggestions)\n */\nexport function getSparklesIcon(options: IconOptions = {}): string {\n  const {\n    width = 20,\n    height = 20,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n      <path d=\"M12 3L13.5 8.5L19 10L13.5 11.5L12 17L10.5 11.5L5 10L10.5 8.5L12 3Z\" stroke=\"${color}\" stroke-width=\"2\" stroke-linejoin=\"round\"/>\n      <path d=\"M19 3L19.5 5L21.5 5.5L19.5 6L19 8L18.5 6L16.5 5.5L18.5 5L19 3Z\" stroke=\"${color}\" stroke-width=\"2\" stroke-linejoin=\"round\"/>\n      <path d=\"M19 16L19.5 18L21.5 18.5L19.5 19L19 21L18.5 19L16.5 18.5L18.5 18L19 16Z\" stroke=\"${color}\" stroke-width=\"2\" stroke-linejoin=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Chat Icon (for chat title)\n */\nexport function getChatIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n    <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n        <path d=\"M17 4.16667V13.5C17 13.8094 16.8784 14.1062 16.662 14.325C16.4457 14.5437 16.1522 14.6667 15.8462 14.6667H6.25482L3.90386 16.72L3.89737 16.7251C3.68967 16.9031 3.42612 17.0005 3.15386 17C2.98459 16.9997 2.81744 16.9619 2.6642 16.8892C2.46488 16.7963 2.29624 16.6473 2.17845 16.4601C2.06066 16.2728 1.99872 16.0552 2.00002 15.8333V4.16667C2.00002 3.85725 2.12159 3.5605 2.33797 3.34171C2.55436 3.12292 2.84785 3 3.15386 3H15.8462C16.1522 3 16.4457 3.12292 16.662 3.34171C16.8784 3.5605 17 3.85725 17 4.16667Z\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n  `.trim();\n}\n\n/**\n * Arrow Right Icon (for card list button)\n */\nexport function getArrowRightIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n\n  return `\n  <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n    <path d=\"M13.3281 8L1.66146 8M13.3281 8L8.32813 3M13.3281 8L8.32813 13\" stroke=\"${color}\" stroke-width=\"1.6\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n  </svg>\n`.trim();\n}\n\n/**\n * User Icon (for \"Sign up for a brand\" action)\n */\nexport function getUserIcon(options: IconOptions = {}): string {\n  const {\n    width = 20,\n    height = 20,\n    color = \"#999999\",\n    className = \"\",\n  } = options;\n\n  return `\n  <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n    <path d=\"M9.5 2C5.35775 2 2 5.35775 2 9.5C2 13.6422 5.35775 17 9.5 17C13.6422 17 17 13.6422 17 9.5C17 5.35775 13.6422 2 9.5 2Z\" stroke=\"${color}\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    <path d=\"M3.70312 14.2605C3.70312 14.2605 5.37488 12.126 9.49988 12.126C13.6249 12.126 15.2974 14.2605 15.2974 14.2605M9.49988 9.50098C10.0966 9.50098 10.6689 9.26392 11.0909 8.84197C11.5128 8.42001 11.7499 7.84771 11.7499 7.25098C11.7499 6.65424 11.5128 6.08194 11.0909 5.65999C10.6689 5.23803 10.0966 5.00098 9.49988 5.00098C8.90314 5.00098 8.33084 5.23803 7.90888 5.65999C7.48693 6.08194 7.24988 6.65424 7.24988 7.25098C7.24988 7.84771 7.48693 8.42001 7.90888 8.84197C8.33084 9.26392 8.90314 9.50098 9.49988 9.50098Z\" stroke=\"${color}\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n  </svg>\n`.trim();\n}\n\n/**\n * Money Icon (for \"Purchase from a brand\" action)\n */\nexport function getMoneyIcon(options: IconOptions = {}): string {\n  const {\n    width = 20,\n    height = 20,\n    color = \"#999999\",\n    className = \"\",\n  } = options;\n\n  return `\n  <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n    <path d=\"M14.75 9.7315C14.501 9.69578 14.2509 9.66901 14 9.65125M5 11.0988C4.744 11.0808 4.494 11.054 4.25 11.0185M11.375 10.375C11.375 10.8723 11.1775 11.3492 10.8258 11.7008C10.4742 12.0525 9.99728 12.25 9.5 12.25C9.00272 12.25 8.52581 12.0525 8.17417 11.7008C7.82254 11.3492 7.625 10.8723 7.625 10.375C7.625 9.87772 7.82254 9.40081 8.17417 9.04917C8.52581 8.69754 9.00272 8.5 9.5 8.5C9.99728 8.5 10.4742 8.69754 10.8258 9.04917C11.1775 9.40081 11.375 9.87772 11.375 10.375Z\" stroke=\"${color}\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    <path d=\"M9.5 16C8.501 16.4665 7.18775 16.75 5.75 16.75C4.9505 16.75 4.19 16.6623 3.5 16.5048C2.375 16.2468 2 15.5695 2 14.4145V6.3355C2 5.59675 2.78 5.08975 3.5 5.25475C4.19 5.41225 4.9505 5.5 5.75 5.5C7.18775 5.5 8.501 5.2165 9.5 4.75C10.499 4.2835 11.8122 4 13.25 4C14.0495 4 14.81 4.08775 15.5 4.24525C16.6865 4.5175 17 5.215 17 6.3355V14.4145C17 15.1532 16.22 15.6602 15.5 15.4952C14.81 15.3377 14.0495 15.25 13.25 15.25C11.8122 15.25 10.499 15.5335 9.5 16Z\" stroke=\"${color}\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n  </svg>\n`.trim();\n}\n\n/**\n * External link icon\n */\nexport function getExternalLinkIcon(options: IconOptions = {}): string {\n  const {\n    width = 12,\n    height = 12,\n    color = \"#0F0F0F\",\n    className = \"\",\n  } = options;\n\n  return `\n  <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\">\n    <path d=\"M8.25 1.125H10.875V3.75M10.3125 1.6875L7.5 4.5M6.375 1.875H3C2.70163 1.875 2.41548 1.99353 2.2045 2.2045C1.99353 2.41548 1.875 2.70163 1.875 3V9C1.875 9.29837 1.99353 9.58452 2.2045 9.7955C2.41548 10.0065 2.70163 10.125 3 10.125H9C9.29837 10.125 9.58452 10.0065 9.7955 9.7955C10.0065 9.58452 10.125 9.29837 10.125 9V5.625\" stroke=\"${color}\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n  </svg>\n`.trim();\n}\n\n/**\n * Award icon (for Must Haves category)\n */\nexport function getAwardIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n  return `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\"><circle cx=\"12\" cy=\"8\" r=\"6\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M15.477 12.89L17 22L12 19L7 22L8.523 12.89\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>`.trim();\n}\n\n/**\n * Shirt icon (for Cosmetics category)\n */\nexport function getShirtIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n  return `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\"><path d=\"M20.38 3.46L16 2L13 8H11L9 8C9 6 7 2L2.62 3.46C2.22 3.6 2 4 2 4.42V9.58C2 10.02 2.22 10.42 2.58 10.58L7 12V22H17V12L21.42 10.58C21.78 10.42 22 10.02 22 9.58V4.42C22 4 21.78 3.6 21.38 3.46Z\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>`.trim();\n}\n\n/**\n * Heart pulse icon (for Travel category)\n */\nexport function getHeartPulseIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n  return `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\"><path d=\"M19 14C20.49 12.54 22 10.79 22 8.5C22 7.04131 21.4205 5.64236 20.3891 4.61091C19.3576 3.57946 17.9587 3 16.5 3C14.74 3 13.5 3.5 12 5C10.5 3.5 9.26 3 7.5 3C6.04131 3 4.64236 3.57946 3.61091 4.61091C2.57946 5.64236 2 7.04131 2 8.5C2 10.8 3.5 12.55 5 14\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M12 21L5 14H9L11 9L13 15L15 14H19L12 21Z\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>`.trim();\n}\n\n/**\n * Sofa icon (for Sneakers category)\n */\nexport function getSofaIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n  return `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\"><path d=\"M20 9V6C20 4.89543 19.1046 4 18 4H6C4.89543 4 4 4.89543 4 6V9\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M2 11V16C2 17.1046 2.89543 18 4 18H5\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M22 11V16C22 17.1046 21.1046 18 20 18H19\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M4 11C4 9.89543 4.89543 9 6 9H18C19.1046 9 20 9.89543 20 11V16H4V11Z\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M5 18V20\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M19 18V20\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>`.trim();\n}\n\n/**\n * Tag icon (for Food & Beverages category)\n */\nexport function getTagIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n  return `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\"><path d=\"M12 2L2 7L12 12L22 7L12 2Z\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M2 17L12 22L22 17\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M2 12L12 17L22 12\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>`.trim();\n}\n\n/**\n * Layout grid icon (for Deals & Sports category)\n */\nexport function getLayoutGridIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n  return `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\"><rect x=\"3\" y=\"3\" width=\"7\" height=\"7\" rx=\"1\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><rect x=\"14\" y=\"3\" width=\"7\" height=\"7\" rx=\"1\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><rect x=\"14\" y=\"14\" width=\"7\" height=\"7\" rx=\"1\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><rect x=\"3\" y=\"14\" width=\"7\" height=\"7\" rx=\"1\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>`.trim();\n}\n\n/**\n * Laptop icon (for Gadgets & Electronics category)\n */\nexport function getLaptopIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n  return `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\"><path d=\"M20 16V7C20 5.89543 19.1046 5 18 5H6C4.89543 5 4 5.89543 4 7V16\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M2 16H22\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M2 16L3 19H21L22 16\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>`.trim();\n}\n\n/**\n * Book open icon (for Art & Collectibles category)\n */\nexport function getBookOpenIcon(options: IconOptions = {}): string {\n  const {\n    width = 24,\n    height = 24,\n    color = \"currentColor\",\n    className = \"\",\n  } = options;\n  return `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"${className}\"><path d=\"M2 3H8C9.06087 3 10.0783 3.42143 10.8284 4.17157C11.5786 4.92172 12 5.93913 12 7V21C12 20.2044 11.6839 19.4413 11.1213 18.8787C10.5587 18.3161 9.79565 18 9 18H2V3Z\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path d=\"M22 3H16C14.9391 3 13.9217 3.42143 13.1716 4.17157C12.4214 4.92172 12 5.93913 12 7V21C12 20.2044 12.3161 19.4413 12.8787 18.8787C13.4413 18.3161 14.2044 18 15 18H22V3Z\" stroke=\"${color}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>`.trim();\n}\n\n/**\n * Back icon (alias for getChevronLeftIcon for backwards compatibility)\n */\nexport function getBackIcon(options: IconOptions = {}): string {\n  return getChevronLeftIcon(options);\n}\n","import { getBotIcon } from \"../shared/icons\";\n\n/**\n * Floating Button Component\n */\n\nexport class FloatingButton {\n  private element: HTMLButtonElement;\n  private position: \"bottom-right\" | \"bottom-left\";\n  private onClick: () => void;\n\n  constructor(position: \"bottom-right\" | \"bottom-left\", onClick: () => void) {\n    this.position = position;\n    this.onClick = onClick;\n    this.element = this.create();\n  }\n\n  /**\n   * Create the button element\n   */\n  private create(): HTMLButtonElement {\n    const button = document.createElement(\"button\");\n    button.className = `me-agent-button ${this.position}`;\n    button.setAttribute(\"aria-label\", \"Open chat\");\n\n    // Add bot icon\n    button.innerHTML = getBotIcon({\n      width: 32,\n      height: 35,\n      className: \"me-agent-button-icon\",\n    });\n\n    button.addEventListener(\"click\", this.onClick);\n\n    return button;\n  }\n\n  /**\n   * Mount the button to the DOM\n   */\n  mount(): void {\n    document.body.appendChild(this.element);\n  }\n\n  /**\n   * Remove the button from the DOM\n   */\n  unmount(): void {\n    this.element.remove();\n  }\n\n  /**\n   * Get the button element\n   */\n  getElement(): HTMLButtonElement {\n    return this.element;\n  }\n\n  /**\n   * Hide the button\n   */\n  hide(): void {\n    this.element.classList.add(\"hidden\");\n  }\n\n  /**\n   * Show the button\n   */\n  show(): void {\n    this.element.classList.remove(\"hidden\");\n  }\n}\n","import { Message } from \"../../types\";\nimport { getUserAvatarIcon, getAssistantAvatarIcon } from \"../shared/icons\";\n\n/**\n * Message Component - Renders individual chat messages\n */\nexport class MessageComponent {\n  /**\n   * Parse markdown-style content and convert to HTML\n   */\n  private static parseMarkdown(content: string): string {\n    if (!content) return \"\";\n\n    // Convert markdown links [text](url) to HTML links\n    // Special handling for offer links\n    let html = content.replace(\n      /\\[([^\\]]+)\\]\\((https?:\\/\\/[^\\)]+)\\)/g,\n      (match, text, url) => {\n        // Check if this is an offer link\n        const offerMatch = url.match(/\\/offer\\/([^\\/\\s]+)/);\n        if (offerMatch) {\n          const offerCode = offerMatch[1];\n          return `<a href=\"#\" class=\"me-agent-offer-link\" data-offer-code=\"${offerCode}\">${text}</a>`;\n        }\n        // Regular external link\n        return `<a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\">${text}</a>`;\n      }\n    );\n\n    // Convert bold **text** to <strong>\n    html = html.replace(/\\*\\*([^\\*]+)\\*\\*/g, \"<strong>$1</strong>\");\n\n    // Convert italic *text* to <em>\n    html = html.replace(/\\*([^\\*]+)\\*/g, \"<em>$1</em>\");\n\n    // Convert line breaks to <br>\n    html = html.replace(/\\n/g, \"<br>\");\n\n    return html;\n  }\n\n  /**\n   * Get avatar for message role\n   */\n  private static getAvatar(role: string): string {\n    if (role === \"user\") {\n      return getUserAvatarIcon({\n        width: 32,\n        height: 32,\n        className: \"me-agent-message-avatar\",\n      });\n    }\n    // Default to assistant avatar for \"assistant\" and \"system\" roles\n    return getAssistantAvatarIcon({\n      width: 32,\n      height: 32,\n      className: \"me-agent-message-avatar\",\n    });\n  }\n\n  /**\n   * Create a message element\n   */\n  static create(\n    message: Message,\n    onOfferClick?: (offerCode: string) => void\n  ): HTMLDivElement {\n    const messageDiv = document.createElement(\"div\");\n    messageDiv.className = `me-agent-message ${message.role}`;\n    messageDiv.setAttribute(\"data-message-id\", message.id);\n\n    // Avatar\n    const avatarDiv = document.createElement(\"div\");\n    avatarDiv.className = \"me-agent-message-avatar-wrapper\";\n    avatarDiv.innerHTML = this.getAvatar(message.role);\n\n    // Content wrapper\n    const contentWrapper = document.createElement(\"div\");\n    contentWrapper.className = \"me-agent-message-content-wrapper\";\n\n    const contentDiv = document.createElement(\"div\");\n    contentDiv.className = \"me-agent-message-content\";\n\n    // Parse markdown and set as HTML\n    contentDiv.innerHTML = this.parseMarkdown(message.content);\n\n    // Add click handlers for offer links\n    if (onOfferClick) {\n      const offerLinks = contentDiv.querySelectorAll(\".me-agent-offer-link\");\n      offerLinks.forEach((link) => {\n        link.addEventListener(\"click\", (e) => {\n          e.preventDefault();\n          const offerCode = (link as HTMLElement).getAttribute(\n            \"data-offer-code\"\n          );\n          if (offerCode) {\n            onOfferClick(offerCode);\n          }\n        });\n      });\n    }\n\n    contentWrapper.appendChild(contentDiv);\n    messageDiv.appendChild(avatarDiv);\n    messageDiv.appendChild(contentWrapper);\n\n    return messageDiv;\n  }\n\n  /**\n   * Create a loading indicator\n   */\n  static createLoading(): HTMLDivElement {\n    const loadingDiv = document.createElement(\"div\");\n    loadingDiv.className = \"me-agent-message assistant\";\n    loadingDiv.setAttribute(\"data-loading\", \"true\");\n\n    // Avatar\n    const avatarDiv = document.createElement(\"div\");\n    avatarDiv.className = \"me-agent-message-avatar-wrapper\";\n    avatarDiv.innerHTML = this.getAvatar(\"assistant\");\n\n    // Content wrapper\n    const contentWrapper = document.createElement(\"div\");\n    contentWrapper.className = \"me-agent-message-content-wrapper\";\n\n    const contentDiv = document.createElement(\"div\");\n    contentDiv.className = \"me-agent-message-content\";\n\n    const loadingIndicator = document.createElement(\"div\");\n    loadingIndicator.className = \"me-agent-loading\";\n    loadingIndicator.innerHTML = `\n      <span class=\"me-agent-loading-text\">Typing</span>\n      <span class=\"me-agent-loading-dots\">\n        <span class=\"me-agent-loading-dot\"></span>\n        <span class=\"me-agent-loading-dot\"></span>\n        <span class=\"me-agent-loading-dot\"></span>\n      </span>\n    `;\n\n    contentDiv.appendChild(loadingIndicator);\n    contentWrapper.appendChild(contentDiv);\n    loadingDiv.appendChild(avatarDiv);\n    loadingDiv.appendChild(contentWrapper);\n\n    return loadingDiv;\n  }\n\n  /**\n   * Update message content (for streaming)\n   */\n  static updateContent(\n    element: HTMLElement,\n    content: string,\n    onOfferClick?: (offerCode: string) => void\n  ): void {\n    const contentDiv = element.querySelector(\".me-agent-message-content\");\n    if (contentDiv) {\n      // Parse markdown and update HTML\n      contentDiv.innerHTML = this.parseMarkdown(content);\n\n      // Re-attach click handlers for offer links\n      if (onOfferClick) {\n        const offerLinks = contentDiv.querySelectorAll(\".me-agent-offer-link\");\n        offerLinks.forEach((link) => {\n          link.addEventListener(\"click\", (e) => {\n            e.preventDefault();\n            const offerCode = (link as HTMLElement).getAttribute(\n              \"data-offer-code\"\n            );\n            if (offerCode) {\n              onOfferClick(offerCode);\n            }\n          });\n        });\n      }\n    }\n  }\n\n  /**\n   * Append a card list or other element to a message's content wrapper\n   */\n  static appendToMessage(\n    messageElement: HTMLElement,\n    element: HTMLElement\n  ): void {\n    const contentWrapper = messageElement.querySelector(\n      \".me-agent-message-content-wrapper\"\n    ) as HTMLElement;\n    if (contentWrapper) {\n      contentWrapper.appendChild(element);\n    }\n  }\n}\n","import { QuickAction } from \"../../types\";\nimport {\n  getSearchIcon,\n  getTagIcon,\n  getGiftIcon,\n  getSparklesIcon,\n  getUserIcon,\n  getMoneyIcon,\n} from \"../shared/icons\";\n\n/**\n * Quick Actions Component - Renders a list of actionable items\n */\nexport class QuickActionsComponent {\n  /**\n   * Get icon for action type\n   */\n  private static getIconForAction(action: QuickAction): string {\n    const iconMap: Record<string, () => string> = {\n      search: () =>\n        getSearchIcon({\n          width: 18,\n          height: 18,\n          className: \"me-agent-quick-action-icon\",\n        }),\n      offers: () =>\n        getGiftIcon({\n          width: 18,\n          height: 18,\n          className: \"me-agent-quick-action-icon\",\n        }),\n      tags: () =>\n        getTagIcon({\n          width: 18,\n          height: 18,\n          className: \"me-agent-quick-action-icon\",\n        }),\n      suggestions: () =>\n        getSparklesIcon({\n          width: 18,\n          height: 18,\n          className: \"me-agent-quick-action-icon\",\n        }),\n      user: () =>\n        getUserIcon({\n          width: 18,\n          height: 18,\n          className: \"me-agent-quick-action-icon\",\n        }),\n      money: () =>\n        getMoneyIcon({\n          width: 18,\n          height: 18,\n          className: \"me-agent-quick-action-icon\",\n        }),\n    };\n\n    // Use icon from action if specified, otherwise use type-based icon\n    if (action.icon && iconMap[action.icon]) {\n      return iconMap[action.icon]();\n    }\n\n    // Default to sparkles icon\n    return getSparklesIcon({\n      width: 18,\n      height: 18,\n      className: \"me-agent-quick-action-icon\",\n    });\n  }\n\n  /**\n   * Create quick actions list\n   */\n  static create(\n    actions: QuickAction[],\n    onClick: (action: QuickAction) => void\n  ): HTMLDivElement {\n    const container = document.createElement(\"div\");\n    container.className = \"me-agent-quick-actions\";\n\n    actions.forEach((action) => {\n      const button = document.createElement(\"button\");\n      button.className = \"me-agent-quick-action-button\";\n      button.setAttribute(\"data-action-id\", action.id);\n\n      const icon = this.getIconForAction(action);\n      button.innerHTML = `\n        ${icon}\n        <span class=\"me-agent-quick-action-text\">${action.label}</span>\n      `;\n\n      button.addEventListener(\"click\", () => onClick(action));\n\n      container.appendChild(button);\n    });\n\n    return container;\n  }\n\n  /**\n   * Create a message with quick actions\n   */\n  static createMessageWithActions(\n    content: string,\n    actions: QuickAction[],\n    messageId: string,\n    onActionClick: (action: QuickAction) => void\n  ): HTMLDivElement {\n    const wrapper = document.createElement(\"div\");\n    wrapper.className = \"me-agent-message-with-actions\";\n    wrapper.setAttribute(\"data-message-id\", messageId);\n\n    // Message content\n    const contentDiv = document.createElement(\"div\");\n    contentDiv.className = \"me-agent-message-actions-content\";\n    contentDiv.textContent = content;\n\n    // Quick actions\n    const actionsContainer = this.create(actions, onActionClick);\n\n    wrapper.appendChild(contentDiv);\n    wrapper.appendChild(actionsContainer);\n\n    return wrapper;\n  }\n}\n","/**\n * Card List Component - Reusable component for displaying lists in chat\n * Can be used for offers, earnings, recommendations, etc.\n */\n\nimport { getArrowRightIcon } from \"../shared/icons\";\n\nexport interface CardListItem {\n  id: string;\n  image?: string;\n  title: string;\n  subtitle?: string;\n  icon?: string;\n}\n\nexport interface CardListConfig {\n  items: CardListItem[];\n  title?: string;\n  actionLabel?: string;\n  onAction?: () => void;\n  onItemClick?: (item: CardListItem) => void;\n}\n\nexport class CardList {\n  /**\n   * Create a card list element\n   */\n  static create(config: CardListConfig): HTMLDivElement {\n    const container = document.createElement(\"div\");\n    container.className = \"me-agent-card-list\";\n\n    // Create preview with avatars (show up to 3, plus a 4th with count if more)\n    const maxVisible = 3;\n    const previewItems = config.items.slice(0, maxVisible);\n    const remainingCount = config.items.length - maxVisible;\n\n    const avatarGroup = previewItems\n      .map((item, index) => {\n        const imageUrl =\n          item.image || `https://via.placeholder.com/40x40?text=${index + 1}`;\n        return `<div class=\"me-agent-card-avatar\" style=\"background-image: url('${imageUrl}'); z-index: ${\n          index + 1\n        };\"></div>`;\n      })\n      .join(\"\");\n\n    // Add overlay avatar if there are more items\n    const overlayAvatar =\n      remainingCount > 0\n        ? (() => {\n            // Get the next image (4th item) to show as background\n            const nextItem = config.items[maxVisible];\n            const overlayImage =\n              nextItem?.image ||\n              `https://via.placeholder.com/40x40?text=${maxVisible + 1}`;\n            return `<div class=\"me-agent-card-avatar me-agent-card-avatar-overlay\" style=\"background-image: url('${overlayImage}'); z-index: ${\n              maxVisible + 1\n            };\">\n            <span class=\"me-agent-card-avatar-count\">+${\n              remainingCount > 99 ? \"99+\" : remainingCount\n            }</span>\n           </div>`;\n          })()\n        : \"\";\n\n    container.innerHTML = `\n      <div class=\"me-agent-card-list-content\">\n        <div class=\"me-agent-card-avatars\">\n          ${avatarGroup}\n          ${overlayAvatar}\n        </div>\n        <div class=\"me-agent-card-list-text\">\n          <p class=\"me-agent-card-list-title\">${\n            config.title || `${config.items.length} items found`\n          }</p>\n          ${\n            config.actionLabel\n              ? `<button class=\"me-agent-card-list-button\">${\n                  config.actionLabel\n                }${getArrowRightIcon({\n                  width: 16,\n                  height: 16,\n                  color: \"#0F0F0F\",\n                })}</button>`\n              : \"\"\n          }\n        </div>\n      </div>\n    `;\n\n    // Add event listener for action button\n    if (config.onAction) {\n      const button = container.querySelector(\".me-agent-card-list-button\");\n      button?.addEventListener(\"click\", config.onAction);\n    }\n\n    return container;\n  }\n}\n","import { Offer } from \"../../types\";\nimport { CardList, CardListItem } from \"./card-list\";\n\n/**\n * Offer Preview Card - Shows in chat after AI response\n * Uses the generic CardList component\n */\nexport class OfferPreviewCard {\n  /**\n   * Create offer preview card element\n   */\n  static create(\n    offers: Offer[],\n    onViewOffers: (offers: Offer[]) => void\n  ): HTMLDivElement {\n    // Convert offers to card list items\n    const items: CardListItem[] = offers.map((offer) => ({\n      id: offer.offerCode || offer.id,\n      image: offer.image,\n      title: offer.name,\n      subtitle: offer.brandName,\n    }));\n\n    // Use the generic CardList component\n    return CardList.create({\n      items,\n      title: `Here are ${offers.length} ${\n        offers.length === 1 ? \"offer\" : \"offers\"\n      } we found for you`,\n      actionLabel: \"View offers\",\n      onAction: () => onViewOffers(offers),\n    });\n  }\n}\n","/**\n * Offer Types\n * All types related to offers and products\n */\n\n/**\n * Redemption method types\n */\nexport enum RedemptionMethodType {\n  FIXED_AMOUNT_OFF = \"FIXED_AMOUNT_OFF\",\n  FIXED_PERCENTAGE_OFF = \"FIXED_PERCENTAGE_OFF\",\n  VARIABLE_AMOUNT_OFF = \"VARIABLE_AMOUNT_OFF\",\n  VARIABLE_PERCENTAGE_OFF = \"VARIABLE_PERCENTAGE_OFF\",\n  FREE_SHIPPING = \"FREE_SHIPPING\",\n}\n\n/**\n * Discount details structure\n */\nexport interface DiscountDetails {\n  percentage?: number;\n  amount?: number;\n}\n\n/**\n * Offer data structure (simplified list view)\n */\nexport interface Offer {\n  id: string;\n  name: string;\n  offerCode: string;\n  price: number;\n  description: string;\n  discountType: string;\n  discountDetails: DiscountDetails[];\n  brandName: string;\n  image?: string;\n}\n\n/**\n * Offer variant type\n */\nexport interface OfferVariant {\n  id: string;\n  offerId: string;\n  totalInventory: number;\n  inventory: number;\n  discountPercentage: string;\n  rewardValue: string;\n  offerCode: string;\n  variantId: string;\n  variant: {\n    id: string;\n    name: string;\n    price: string;\n    description: string | null;\n    inventory: number;\n    productImages: Array<{\n      url: string;\n    }>;\n    options?: Array<{\n      name: string;\n      value: string;\n    }>;\n  };\n}\n\n/**\n * Offer detail response (full product details)\n */\nexport interface OfferDetail {\n  id: string;\n  name: string;\n  description: string;\n  originalPrice: string;\n  discountPercentage: string;\n  offerCode: string;\n  coverImage: string;\n  brand: {\n    id: string;\n    name: string;\n    logo: string;\n    network: string;\n  };\n  redemptionMethod: {\n    id: string;\n    type: string;\n    discountPercentage: string;\n    discountAmount?: string;\n  };\n  reward: {\n    id: string;\n    contractAddress: string;\n    rewardImage: string;\n    rewardName: string;\n    rewardSymbol: string;\n  };\n  offerImages: Array<{ url: string }>;\n  offerVariants?: OfferVariant[];\n}\n","/**\n * Discount Utility\n * Calculates discounted prices based on redemption method\n */\n\nimport { RedemptionMethodType, DiscountDetails } from \"../../types/offer\";\n\nexport interface RedemptionMethodInput {\n  type: RedemptionMethodType;\n  discountPercentage?: number;\n  discountAmount?: number;\n  maxDiscountAmount?: number;\n}\n\n/**\n * Calculate the final discounted price based on redemption method\n */\nexport function getDiscountedPrice(\n  originalPrice: number,\n  method: RedemptionMethodInput\n): number | string {\n  switch (method.type) {\n    case RedemptionMethodType.FREE_SHIPPING:\n      return \"Free shipping\";\n\n    case RedemptionMethodType.FIXED_AMOUNT_OFF: {\n      const discount = Math.min(\n        method.discountAmount || 0,\n        method.maxDiscountAmount && method.maxDiscountAmount > 0\n          ? method.maxDiscountAmount\n          : Infinity\n      );\n      return originalPrice - discount;\n    }\n\n    case RedemptionMethodType.FIXED_PERCENTAGE_OFF: {\n      const calculatedDiscount =\n        originalPrice * ((method.discountPercentage || 0) / 100);\n      const discount =\n        method.maxDiscountAmount && method.maxDiscountAmount > 0\n          ? Math.min(calculatedDiscount, method.maxDiscountAmount)\n          : calculatedDiscount;\n      return originalPrice - discount;\n    }\n\n    case RedemptionMethodType.VARIABLE_AMOUNT_OFF:\n      // Variable amount uses discountAmount without max cap\n      return originalPrice - (method.discountAmount || 0);\n\n    case RedemptionMethodType.VARIABLE_PERCENTAGE_OFF: {\n      const calculatedDiscount =\n        originalPrice * ((method.discountPercentage || 0) / 100);\n      const discount =\n        method.maxDiscountAmount && method.maxDiscountAmount > 0\n          ? Math.min(calculatedDiscount, method.maxDiscountAmount)\n          : calculatedDiscount;\n      return originalPrice - discount;\n    }\n\n    default:\n      return originalPrice;\n  }\n}\n\n/**\n * Calculate discount from offer data (from query_offers response)\n */\nexport function calculateOfferDiscount(\n  originalPrice: number,\n  discountType: string,\n  discountDetails: DiscountDetails[]\n): number | string {\n  if (!discountDetails || discountDetails.length === 0) {\n    return originalPrice;\n  }\n\n  const firstDiscount = discountDetails[0];\n\n  const method: RedemptionMethodInput = {\n    type: discountType as RedemptionMethodType,\n    discountPercentage: firstDiscount.percentage,\n    discountAmount: firstDiscount.amount,\n  };\n\n  return getDiscountedPrice(originalPrice, method);\n}\n\n/**\n * Format discount for display\n */\nexport function formatDiscount(\n  discountType: string,\n  discountDetails: DiscountDetails[]\n): string {\n  if (!discountDetails || discountDetails.length === 0) {\n    return \"\";\n  }\n\n  const firstDiscount = discountDetails[0];\n\n  switch (discountType) {\n    case RedemptionMethodType.FIXED_PERCENTAGE_OFF:\n    case RedemptionMethodType.VARIABLE_PERCENTAGE_OFF:\n      return firstDiscount.percentage ? `${firstDiscount.percentage}% OFF` : \"\";\n\n    case RedemptionMethodType.FIXED_AMOUNT_OFF:\n    case RedemptionMethodType.VARIABLE_AMOUNT_OFF:\n      return firstDiscount.amount ? `$${firstDiscount.amount} OFF` : \"\";\n\n    case RedemptionMethodType.FREE_SHIPPING:\n      return \"FREE SHIPPING\";\n\n    default:\n      return \"\";\n  }\n}\n","/**\n * Offer Grid View\n * Renders a grid of offer cards\n */\n\nimport { Offer } from \"../../types\";\nimport {\n  calculateOfferDiscount,\n  formatDiscount,\n} from \"../../core/utils/discount\";\n\nexport class OfferGridView {\n  /**\n   * Render a grid of offers\n   */\n  render(offers: Offer[]): string {\n    return `\n      <div class=\"me-agent-offers-container\">\n        <div class=\"me-agent-offers-grid\">\n          ${offers.map((offer) => this.renderOfferCard(offer)).join(\"\")}\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Render a single offer card (using same styling as brand offers)\n   */\n  private renderOfferCard(offer: Offer): string {\n    const price =\n      typeof offer.price === \"string\" ? parseFloat(offer.price) : offer.price;\n\n    const discountedPrice = calculateOfferDiscount(\n      price,\n      offer.discountType,\n      offer.discountDetails\n    );\n    const discountBadge = formatDiscount(\n      offer.discountType,\n      offer.discountDetails\n    );\n\n    const hasDiscount =\n      typeof discountedPrice === \"number\" && discountedPrice < price;\n    const finalPrice =\n      typeof discountedPrice === \"number\" ? discountedPrice : price;\n\n    return `\n      <div class=\"me-agent-brand-offer-card\" data-offer-code=\"${\n        offer.offerCode\n      }\">\n        <div class=\"me-agent-brand-offer-image-container\">\n          <img \n            src=\"${\n              offer.image || \"https://via.placeholder.com/200x200?text=No+Image\"\n            }\" \n            alt=\"${offer.name}\"\n            class=\"me-agent-brand-offer-image\"\n          />\n          ${\n            discountBadge\n              ? `<div class=\"me-agent-brand-offer-badge\">${discountBadge}</div>`\n              : \"\"\n          }\n        </div>\n        <div class=\"me-agent-brand-offer-info\">\n          <h4 class=\"me-agent-brand-offer-name\">${offer.name}</h4>\n          <div class=\"me-agent-brand-offer-pricing\">\n            <span class=\"me-agent-brand-offer-price\">$${finalPrice.toFixed(\n              2\n            )}</span>\n            ${\n              hasDiscount\n                ? `<span class=\"me-agent-brand-offer-original-price\">$${price.toFixed(\n                    2\n                  )}</span>`\n                : \"\"\n            }\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Render loading state\n   */\n  renderLoading(showCancelButton: boolean = false): string {\n    return `\n      <div class=\"me-agent-detail-loading\">\n        <div class=\"me-agent-spinner\"></div>\n        ${\n          showCancelButton\n            ? `<button class=\"me-agent-cancel-loading-btn\">Cancel</button>`\n            : \"\"\n        }\n      </div>\n    `;\n  }\n}\n","/**\n * Offer Detail View\n * Renders detailed offer information with variants, reviews, and actions\n */\n\nimport { OfferDetail, OfferVariant } from \"../../types\";\nimport { getBackIcon, getCloseIcon } from \"../shared/icons\";\nimport { formatNumber } from \"../../core/utils/formatters\";\n\nexport class OfferDetailView {\n  /**\n   * Render complete offer detail page\n   */\n  render(\n    detail: OfferDetail,\n    selectedVariant: OfferVariant | null,\n    quantity: number,\n    config: { likedOffers?: Record<string, boolean> }\n  ): string {\n    const currentVariant = selectedVariant || detail.offerVariants?.[0] || null;\n    const variantData = currentVariant?.variant;\n    const finalPrice = this.calculateFinalPrice(detail, currentVariant);\n\n    return `\n      <div class=\"me-agent-offer-detail-scroll\">\n        ${this.renderImageCarousel(detail, variantData)}\n        ${this.renderProductInfo(detail, currentVariant, finalPrice)}\n        ${this.renderVariantSelector(detail.offerVariants)}\n        ${this.renderQuantitySelector(quantity)}\n        ${this.renderTabs(detail)}\n        ${this.renderRedemptionInfo(detail)}\n      </div>\n      ${this.renderActions(detail, config.likedOffers?.[detail.id])}\n    `;\n  }\n\n  /**\n   * Render image carousel\n   */\n  private renderImageCarousel(detail: OfferDetail, variantData?: any): string {\n    const images = variantData?.productImages || detail.offerImages || [];\n    const primaryImage = images[0]?.url || detail.coverImage;\n\n    return `\n      <div class=\"me-agent-image-carousel\">\n        <img \n          src=\"${primaryImage}\" \n          alt=\"${detail.name}\"\n          class=\"me-agent-carousel-image\"\n        />\n      </div>\n    `;\n  }\n\n  /**\n   * Render product information section\n   */\n  private renderProductInfo(\n    detail: OfferDetail,\n    currentVariant: OfferVariant | null,\n    finalPrice: number\n  ): string {\n    const originalPrice = currentVariant\n      ? parseFloat(currentVariant.variant.price)\n      : parseFloat(detail.originalPrice);\n    const discount = currentVariant\n      ? parseFloat(currentVariant.discountPercentage)\n      : parseFloat(detail.discountPercentage);\n\n    return `\n      <div class=\"me-agent-detail-info\">\n        <h2 class=\"me-agent-detail-title\">${detail.name}</h2>\n        <div class=\"me-agent-detail-pricing\">\n          <div class=\"me-agent-detail-price\">\n            <span class=\"me-agent-price-label\">Price:</span>\n            <span class=\"me-agent-price-value\">$${finalPrice.toFixed(2)}</span>\n          </div>\n          ${\n            discount > 0\n              ? `\n            <div class=\"me-agent-detail-original-price\">\n              <span class=\"me-agent-original-label\">Original:</span>\n              <span class=\"me-agent-original-value\">$${originalPrice.toFixed(\n                2\n              )}</span>\n            </div>\n            <div class=\"me-agent-detail-badge\">${Math.round(\n              discount\n            )}% OFF</div>\n          `\n              : \"\"\n          }\n        </div>\n        <div class=\"me-agent-detail-shipping\">\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\n            <path d=\"M14 8.5V11.5C14 11.7652 13.8946 12.0196 13.7071 12.2071C13.5196 12.3946 13.2652 12.5 13 12.5H3C2.73478 12.5 2.48043 12.3946 2.29289 12.2071C2.10536 12.0196 2 11.7652 2 11.5V4.5C2 4.23478 2.10536 3.98043 2.29289 3.79289C2.48043 3.60536 2.73478 3.5 3 3.5H10\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          </svg>\n          <span>Free shipping on orders over $50</span>\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Render variant selector\n   */\n  private renderVariantSelector(offerVariants?: OfferVariant[]): string {\n    if (!offerVariants || offerVariants.length === 0) return \"\";\n\n    return `\n      <div class=\"me-agent-variant-section\">\n        <label class=\"me-agent-section-label\">Select Variant</label>\n        <div class=\"me-agent-variant-grid\">\n          ${offerVariants\n            .map((variant, index) =>\n              this.renderVariantCard(variant, index === 0)\n            )\n            .join(\"\")}\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Render a single variant card\n   */\n  private renderVariantCard(\n    variant: OfferVariant,\n    isSelected: boolean\n  ): string {\n    const variantImage = variant.variant.productImages?.[0]?.url || \"\";\n    const variantPrice = parseFloat(variant.variant.price);\n    const discount = parseFloat(variant.discountPercentage);\n    const finalPrice = variantPrice * (1 - discount / 100);\n\n    return `\n      <div class=\"me-agent-variant-card ${\n        isSelected ? \"selected\" : \"\"\n      }\" data-variant-id=\"${variant.id}\">\n        ${\n          variantImage\n            ? `<img src=\"${variantImage}\" alt=\"${variant.variant.name}\" class=\"me-agent-variant-image\" />`\n            : \"\"\n        }\n        <div class=\"me-agent-variant-info\">\n          <div class=\"me-agent-variant-name\">${variant.variant.name}</div>\n          <div class=\"me-agent-variant-price\">$${finalPrice.toFixed(2)}</div>\n        </div>\n        ${\n          discount > 0\n            ? `<div class=\"me-agent-variant-discount\">${Math.round(\n                discount\n              )}% OFF</div>`\n            : \"\"\n        }\n      </div>\n    `;\n  }\n\n  /**\n   * Render quantity selector\n   */\n  private renderQuantitySelector(quantity: number): string {\n    return `\n      <div class=\"me-agent-quantity-section\">\n        <label class=\"me-agent-section-label\">Quantity</label>\n        <div class=\"me-agent-quantity-selector\">\n          <button class=\"me-agent-quantity-btn\" data-action=\"decrease\">-</button>\n          <input \n            type=\"number\" \n            class=\"me-agent-quantity-input\" \n            value=\"${quantity}\" \n            min=\"1\" \n            max=\"10\"\n            readonly\n          />\n          <button class=\"me-agent-quantity-btn\" data-action=\"increase\">+</button>\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Render tabs (Description & Reviews)\n   */\n  private renderTabs(detail: OfferDetail): string {\n    return `\n      <div class=\"me-agent-tabs\">\n        <button class=\"me-agent-tab active\" data-tab=\"description\">Description</button>\n        <button class=\"me-agent-tab\" data-tab=\"reviews\">Reviews</button>\n      </div>\n      <div class=\"me-agent-tab-content\">\n        <div class=\"me-agent-tab-pane active\" data-pane=\"description\">\n          <p class=\"me-agent-description-text\">${\n            detail.description || \"No description available.\"\n          }</p>\n        </div>\n        <div class=\"me-agent-tab-pane\" data-pane=\"reviews\">\n          ${this.renderReviews()}\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Render reviews section\n   */\n  private renderReviews(): string {\n    const dummyReviews = [\n      {\n        name: \"Sarah M.\",\n        rating: 5,\n        text: \"Absolutely love this product! The quality exceeded my expectations and it arrived quickly.\",\n      },\n      {\n        name: \"James T.\",\n        rating: 4,\n        text: \"Great value for money. Would recommend to anyone looking for a reliable option.\",\n      },\n      {\n        name: \"Emily R.\",\n        rating: 5,\n        text: \"Perfect! Exactly what I was looking for. Will definitely purchase again.\",\n      },\n    ];\n\n    const avgRating = 4.7;\n    const totalReviews = dummyReviews.length;\n\n    return `\n      <div class=\"me-agent-reviews\">\n        <div class=\"me-agent-reviews-summary\">\n          <div class=\"me-agent-reviews-score\">\n            <div class=\"me-agent-score-number\">${avgRating.toFixed(1)}</div>\n            <div class=\"me-agent-stars-large\">${this.renderStars(\n              avgRating,\n              20\n            )}</div>\n            <div class=\"me-agent-review-count\">${formatNumber(\n              totalReviews\n            )} reviews</div>\n          </div>\n          <div class=\"me-agent-reviews-bars\">\n            ${[5, 4, 3, 2, 1]\n              .map(\n                (stars) => `\n              <div class=\"me-agent-rating-row\">\n                <span class=\"me-agent-stars-small\">${this.renderStars(\n                  stars,\n                  12\n                )}</span>\n                <div class=\"me-agent-rating-bar\">\n                  <div class=\"me-agent-rating-fill\" style=\"width: ${\n                    stars === 5 ? 70 : stars === 4 ? 20 : 10\n                  }%\"></div>\n                </div>\n                <span class=\"me-agent-rating-count\">${\n                  stars === 5 ? 2 : stars === 4 ? 1 : 0\n                }</span>\n              </div>\n            `\n              )\n              .join(\"\")}\n          </div>\n        </div>\n        <div class=\"me-agent-reviews-list\">\n          ${dummyReviews\n            .map(\n              (review) => `\n            <div class=\"me-agent-review-item\">\n              <div class=\"me-agent-review-header\">\n                <div class=\"me-agent-reviewer-avatar\">${review.name.charAt(\n                  0\n                )}</div>\n                <div>\n                  <div class=\"me-agent-reviewer-name\">${review.name}</div>\n                  <div class=\"me-agent-review-stars\">${this.renderStars(\n                    review.rating,\n                    14\n                  )}</div>\n                </div>\n              </div>\n              <p class=\"me-agent-review-text\">${review.text}</p>\n            </div>\n          `\n            )\n            .join(\"\")}\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Render stars rating\n   */\n  private renderStars(rating: number, size: number): string {\n    const fullStars = Math.floor(rating);\n    const hasHalfStar = rating % 1 >= 0.5;\n    const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);\n\n    const star = (fill: string) => `\n      <svg width=\"${size}\" height=\"${size}\" viewBox=\"0 0 20 20\" fill=\"${fill}\">\n        <path d=\"M10 1L12.5 7.5H19L14 11.5L16 18L10 14L4 18L6 11.5L1 7.5H7.5L10 1Z\"/>\n      </svg>\n    `;\n\n    return `\n      ${\"\".repeat(fullStars)}\n      ${hasHalfStar ? \"\" : \"\"}\n      ${\"\".repeat(emptyStars)}\n    `.trim();\n  }\n\n  /**\n   * Render redemption info\n   */\n  private renderRedemptionInfo(detail: OfferDetail): string {\n    return `\n      <div class=\"me-agent-redemption-info\">\n        <h3>Redeem with ${detail.reward.rewardSymbol}</h3>\n        <p>Use your ${detail.reward.rewardName} rewards to get this offer</p>\n      </div>\n    `;\n  }\n\n  /**\n   * Render action buttons\n   */\n  private renderActions(detail: OfferDetail, isLiked: boolean = false): string {\n    return `\n      <div class=\"me-agent-detail-actions\">\n        <button class=\"me-agent-redeem-button\" data-action=\"redeem\">\n          Redeem Now\n        </button>\n        <div class=\"me-agent-secondary-actions\">\n          <button class=\"me-agent-action-button\" data-action=\"like\" data-liked=\"${isLiked}\">\n            <span class=\"me-agent-action-icon\">${isLiked ? \"\" : \"\"}</span>\n          </button>\n          <button class=\"me-agent-action-button\" data-action=\"share\">\n            <span class=\"me-agent-action-icon\"></span>\n          </button>\n          <button class=\"me-agent-action-button\" data-action=\"add-to-cart\">\n            <span class=\"me-agent-action-icon\"></span>\n          </button>\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Calculate final price after discount\n   */\n  private calculateFinalPrice(\n    detail: OfferDetail,\n    currentVariant: OfferVariant | null\n  ): number {\n    const price = currentVariant\n      ? parseFloat(currentVariant.variant.price)\n      : parseFloat(detail.originalPrice);\n    const discount = currentVariant\n      ? parseFloat(currentVariant.discountPercentage)\n      : parseFloat(detail.discountPercentage);\n\n    return price * (1 - discount / 100);\n  }\n}\n","/**\n * Brand List View\n * Renders a list of brands with signup earning methods\n */\n\nimport { Brand } from \"../../types\";\nimport { getExternalLinkIcon } from \"../shared/icons\";\nimport { formatNumber } from \"../../core/utils/formatters\";\n\nexport class BrandListView {\n  /**\n   * Render brand list\n   */\n  render(brands: Brand[], origin: string): string {\n    return `\n      <div class=\"me-agent-brands-list\">\n        ${brands.map((brand) => this.renderBrandCard(brand, origin)).join(\"\")}\n      </div>\n    `;\n  }\n\n  /**\n   * Render a single brand card\n   */\n  private renderBrandCard(brand: Brand, origin: string): string {\n    const rule = brand.rewardDetails.rules[0];\n    const points = rule?.points || 0;\n    const { rewardSymbol, rewardValueInDollars, rewardOriginalValue } =\n      brand.rewardDetails.rewardInfo;\n\n    const signupUrl = this.buildSignupUrl(brand, origin);\n    const conversionRate = this.formatConversionRate(\n      rewardSymbol,\n      rewardOriginalValue,\n      rewardValueInDollars\n    );\n\n    return `\n      <div class=\"me-agent-brand-card\">\n        <div class=\"me-agent-brand-logo-container\">\n          <img \n            src=\"${\n              brand.logoUrl ||\n              \"https://via.placeholder.com/64x64?text=\" + brand.name.charAt(0)\n            }\" \n            alt=\"${brand.name}\"\n            class=\"me-agent-brand-logo\"\n          />\n        </div>\n        <div class=\"me-agent-brand-info\">\n          <h3 class=\"me-agent-brand-name\">${brand.name}</h3>\n          <p class=\"me-agent-brand-conversion\">${conversionRate}</p>\n        </div>\n        <div class=\"me-agent-brand-actions\">\n          <div class=\"me-agent-brand-reward-amount\">\n            ${formatNumber(points)} ${rewardSymbol}\n          </div>\n          <a \n            href=\"${signupUrl}\" \n            target=\"_blank\" \n            rel=\"noopener noreferrer\"\n            class=\"me-agent-brand-signup-button\"\n          >\n            Sign Up & Earn\n            ${getExternalLinkIcon({ width: 12, height: 12 })}\n          </a>\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Build signup URL with callback\n   */\n  private buildSignupUrl(brand: Brand, origin: string): string {\n    const baseUrl = brand.shopifyStoreUrl || brand.websiteUrl || \"\";\n    if (!baseUrl) return \"#\";\n\n    try {\n      const url = new URL(baseUrl);\n      url.searchParams.append(\"meprotocol_callback\", origin);\n      return url.toString();\n    } catch (error) {\n      console.error(\"Invalid brand URL:\", baseUrl);\n      return baseUrl;\n    }\n  }\n\n  /**\n   * Format conversion rate display\n   */\n  private formatConversionRate(\n    symbol: string,\n    originalValue: string,\n    dollarValue: string\n  ): string {\n    const value = parseFloat(dollarValue || originalValue || \"0\");\n    return `1 ${symbol} = $${value.toFixed(2)}`;\n  }\n}\n","/**\n * Brand Offers View\n * Renders brands with their horizontal offer lists\n */\n\nimport {\n  calculateOfferDiscount,\n  formatDiscount,\n} from \"../../core/utils/discount\";\n\nexport class BrandOffersView {\n  /**\n   * Render brands with offers\n   */\n  render(brandsWithOffers: Array<{ brand: any; offers: any[] }>): string {\n    if (brandsWithOffers.length === 0) {\n      return this.renderEmptyState();\n    }\n\n    return `\n      <div class=\"me-agent-brands-offers-list\">\n        ${brandsWithOffers\n          .map((item) => this.renderBrandWithOffers(item))\n          .join(\"\")}\n      </div>\n    `;\n  }\n\n  /**\n   * Render a brand with its offers\n   */\n  private renderBrandWithOffers(item: { brand: any; offers: any[] }): string {\n    const { brand, offers } = item;\n    const rule = brand.rewardDetails?.rules?.[0];\n    const earningInfo = rule\n      ? `Earn ${rule.earningPercentage}% back in ${brand.rewardDetails.rewardInfo.rewardSymbol}`\n      : \"Earn rewards\";\n\n    return `\n      <div class=\"me-agent-brand-offers-section\">\n        <div class=\"me-agent-brand-offers-header\">\n          <div class=\"me-agent-brand-offers-info\">\n            <img \n              src=\"${\n                brand.logoUrl ||\n                \"https://via.placeholder.com/60x60?text=\" + brand.name.charAt(0)\n              }\" \n              alt=\"${brand.name}\"\n              class=\"me-agent-brand-offers-logo\"\n            />\n            <h3 class=\"me-agent-brand-offers-name\">${brand.name}</h3>\n          </div>\n          <div class=\"me-agent-brand-earning-amount\">${earningInfo}</div>\n        </div>\n        <div class=\"me-agent-brand-offers-scroll\">\n          ${offers.map((offer) => this.renderOfferCard(offer)).join(\"\")}\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Render a single offer card\n   */\n  private renderOfferCard(offer: any): string {\n    const price = parseFloat(offer.price || offer.originalPrice || \"0\");\n\n    const discountedPrice = calculateOfferDiscount(\n      price,\n      offer.discountType || \"\",\n      offer.discountDetails || []\n    );\n    const discountBadge = formatDiscount(\n      offer.discountType || \"\",\n      offer.discountDetails || []\n    );\n\n    const hasDiscount =\n      typeof discountedPrice === \"number\" && discountedPrice < price;\n    const finalPrice =\n      typeof discountedPrice === \"number\" ? discountedPrice : price;\n\n    return `\n      <div \n        class=\"me-agent-brand-offer-card\" \n        data-product-url=\"${offer.productUrl || \"#\"}\"\n      >\n        <div class=\"me-agent-brand-offer-image-container\">\n          <img \n            src=\"${\n              offer.coverImage ||\n              offer.image ||\n              \"https://via.placeholder.com/200x200?text=No+Image\"\n            }\" \n            alt=\"${offer.name}\"\n            class=\"me-agent-brand-offer-image\"\n          />\n          ${\n            discountBadge\n              ? `<div class=\"me-agent-brand-offer-badge\">${discountBadge}</div>`\n              : \"\"\n          }\n        </div>\n        <div class=\"me-agent-brand-offer-info\">\n          <h4 class=\"me-agent-brand-offer-name\">${offer.name}</h4>\n          <div class=\"me-agent-brand-offer-pricing\">\n            <span class=\"me-agent-brand-offer-price\">$${finalPrice.toFixed(\n              2\n            )}</span>\n            ${\n              hasDiscount\n                ? `<span class=\"me-agent-brand-offer-original-price\">$${price.toFixed(\n                    2\n                  )}</span>`\n                : \"\"\n            }\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Render empty state\n   */\n  private renderEmptyState(): string {\n    return `\n      <div class=\"me-agent-empty-state\">\n        <p>No offers available at this time.</p>\n      </div>\n    `;\n  }\n}\n","/**\n * Category Grid View\n * Renders a grid of purchase earning categories\n */\n\nimport { Category } from \"../../types\";\n\nexport class CategoryGridView {\n  /**\n   * Render category grid\n   */\n  render(categories: Category[]): string {\n    return `\n      <div class=\"me-agent-categories-grid\">\n        ${categories\n          .map((category) => this.renderCategoryCard(category))\n          .join(\"\")}\n      </div>\n    `;\n  }\n\n  /**\n   * Render a single category card\n   */\n  private renderCategoryCard(category: Category): string {\n    const iconSvg = this.getCategoryIcon(category.icon || \"\");\n\n    return `\n      <div \n        class=\"me-agent-category-card\" \n        data-category-id=\"${category.categoryId}\"\n      >\n        <div class=\"me-agent-category-icon-overlay\">\n          ${iconSvg}\n        </div>\n        <div class=\"me-agent-category-info\">\n          <h3 class=\"me-agent-category-title\">${\n            category.title || category.categoryName\n          }</h3>\n          <p class=\"me-agent-category-brand-count\">${\n            category.brandCount\n          } brands</p>\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Get category icon SVG (from Lucide React icons)\n   */\n  private getCategoryIcon(iconName: string): string {\n    const icons: Record<string, string> = {\n      award: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"white\" stroke-width=\"2\"><circle cx=\"12\" cy=\"8\" r=\"6\"/><path d=\"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11\"/></svg>`,\n      shirt: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"white\" stroke-width=\"2\"><path d=\"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z\"/></svg>`,\n      heartPulse: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"white\" stroke-width=\"2\"><path d=\"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z\"/><path d=\"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27\"/></svg>`,\n      sofa: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"white\" stroke-width=\"2\"><path d=\"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3\"/><path d=\"M2 16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z\"/><path d=\"M4 18v2\"/><path d=\"M20 18v2\"/><path d=\"M12 4v9\"/></svg>`,\n      tag: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"white\" stroke-width=\"2\"><path d=\"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z\"/><circle cx=\"7.5\" cy=\"7.5\" r=\".5\" fill=\"white\"/></svg>`,\n      layoutGrid: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"white\" stroke-width=\"2\"><rect width=\"7\" height=\"7\" x=\"3\" y=\"3\" rx=\"1\"/><rect width=\"7\" height=\"7\" x=\"14\" y=\"3\" rx=\"1\"/><rect width=\"7\" height=\"7\" x=\"14\" y=\"14\" rx=\"1\"/><rect width=\"7\" height=\"7\" x=\"3\" y=\"14\" rx=\"1\"/></svg>`,\n      laptop: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"white\" stroke-width=\"2\"><path d=\"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16\"/></svg>`,\n      bookOpen: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"white\" stroke-width=\"2\"><path d=\"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z\"/><path d=\"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z\"/></svg>`,\n    };\n\n    return icons[iconName] || icons.tag; // Default to tag icon\n  }\n}\n","/**\n * Detail Panel Controller\n * Orchestrates the detail panel and routes between different views\n */\n\nimport {\n  MeAgentConfig,\n  Offer,\n  Brand,\n  Category,\n  OfferDetail,\n  OfferVariant,\n} from \"../types\";\nimport { OfferService } from \"../services/offer-service\";\nimport { BrandService } from \"../services/brand-service\";\nimport { OfferGridView } from \"../views/offers/offer-grid-view\";\nimport { OfferDetailView } from \"../views/offers/offer-detail-view\";\nimport { BrandListView } from \"../views/brands/brand-list-view\";\nimport { BrandOffersView } from \"../views/brands/brand-offers-view\";\nimport { CategoryGridView } from \"../views/categories/category-grid-view\";\nimport { getChevronLeftIcon, getCloseIcon } from \"../views/shared/icons\";\n\n/**\n * Detail Panel Controller\n * Manages the side panel that displays offers, brands, categories, and redemption flows\n */\ninterface ViewState {\n  type: string;\n  title: string;\n  data: any;\n}\n\nexport class DetailPanelController {\n  private container: HTMLElement;\n  private wrapper: HTMLElement;\n  private header: HTMLElement;\n  private headerTitle: HTMLElement;\n  private backButton: HTMLElement;\n  private closeButton: HTMLElement;\n  private content: HTMLElement;\n  private isVisible: boolean = false;\n  private currentView: string | null = null;\n  private viewStack: ViewState[] = [];\n  private sessionId: string = \"\";\n  private currentAbortController: AbortController | null = null;\n\n  // Current state\n  private currentOfferDetail: OfferDetail | null = null;\n  private selectedVariant: OfferVariant | null = null;\n  private quantity: number = 1;\n\n  // Views\n  private offerGridView: OfferGridView;\n  private offerDetailView: OfferDetailView;\n  private brandListView: BrandListView;\n  private brandOffersView: BrandOffersView;\n  private categoryGridView: CategoryGridView;\n\n  constructor(\n    private config: MeAgentConfig,\n    private offerService: OfferService,\n    private brandService: BrandService,\n    private onClose: () => void\n  ) {\n    // Initialize views\n    this.offerGridView = new OfferGridView();\n    this.offerDetailView = new OfferDetailView();\n    this.brandListView = new BrandListView();\n    this.brandOffersView = new BrandOffersView();\n    this.categoryGridView = new CategoryGridView();\n\n    // Create DOM elements\n    this.wrapper = document.createElement(\"div\");\n    this.wrapper.className = \"me-agent-detail-panel-wrapper\";\n\n    this.container = document.createElement(\"div\");\n    this.container.className = \"me-agent-detail-panel\";\n\n    // Create fixed header\n    this.header = document.createElement(\"div\");\n    this.header.className = \"me-agent-detail-header\";\n\n    // Back button with title\n    this.backButton = document.createElement(\"button\");\n    this.backButton.className = \"me-agent-back-button\";\n    this.backButton.style.display = \"none\"; // Hidden by default\n    this.backButton.addEventListener(\"click\", () => this.goBack());\n\n    // Title (standalone when no back)\n    this.headerTitle = document.createElement(\"h2\");\n    this.headerTitle.className = \"me-agent-detail-title\";\n    this.headerTitle.textContent = \"Details\";\n    this.headerTitle.style.display = \"block\"; // Visible by default\n\n    // Close button\n    this.closeButton = document.createElement(\"button\");\n    this.closeButton.className = \"me-agent-close-button\";\n    this.closeButton.innerHTML = getCloseIcon({ width: 20, height: 20 });\n    this.closeButton.addEventListener(\"click\", () => this.onClose());\n\n    this.header.appendChild(this.backButton);\n    this.header.appendChild(this.headerTitle);\n    this.header.appendChild(this.closeButton);\n\n    // Create content area\n    this.content = document.createElement(\"div\");\n    this.content.className = \"me-agent-detail-content\";\n\n    // Assemble\n    this.container.appendChild(this.header);\n    this.container.appendChild(this.content);\n    this.wrapper.appendChild(this.container);\n  }\n\n  /**\n   * Get the wrapper element\n   */\n  getElement(): HTMLElement {\n    return this.wrapper;\n  }\n\n  /**\n   * Show the detail panel\n   */\n  show(): void {\n    this.isVisible = true;\n    this.container.classList.add(\"visible\");\n  }\n\n  /**\n   * Hide the detail panel\n   */\n  hide(): void {\n    this.cancelCurrentRequest();\n    this.isVisible = false;\n    this.container.classList.remove(\"visible\");\n    this.viewStack = [];\n    this.currentView = null;\n\n    // Reset header to default state\n    this.backButton.style.display = \"none\";\n    this.headerTitle.style.display = \"block\";\n    this.headerTitle.textContent = \"Details\";\n  }\n\n  /**\n   * Cancel any pending requests\n   */\n  private cancelCurrentRequest(): void {\n    if (this.currentAbortController) {\n      this.currentAbortController.abort();\n      this.currentAbortController = null;\n    }\n  }\n\n  /**\n   * Update header title and back button visibility\n   */\n  private updateHeader(title: string): void {\n    // Show back button with title if there's more than one view in the stack\n    if (this.viewStack.length > 1) {\n      this.backButton.style.display = \"flex\";\n      this.backButton.innerHTML = `\n        ${getChevronLeftIcon({ width: 20, height: 20 })}\n        <span style=\"margin-left: 8px;\">${title}</span>\n      `;\n      this.headerTitle.style.display = \"none\";\n    } else {\n      // Just show title, no back button\n      this.backButton.style.display = \"none\";\n      this.headerTitle.style.display = \"block\";\n      this.headerTitle.textContent = title;\n    }\n  }\n\n  /**\n   * Go back to previous view\n   */\n  goBack(): void {\n    if (this.viewStack.length <= 1) {\n      return; // No previous view\n    }\n\n    // Cancel any pending requests\n    this.cancelCurrentRequest();\n\n    // Pop current view\n    this.viewStack.pop();\n\n    // Get previous view state\n    const previousView = this.viewStack[this.viewStack.length - 1];\n\n    // Restore previous view\n    this.restoreView(previousView);\n  }\n\n  /**\n   * Restore a view from state\n   */\n  private restoreView(viewState: ViewState): void {\n    switch (viewState.type) {\n      case \"offer-grid\":\n        this.content.innerHTML = this.offerGridView.render(viewState.data);\n        this.attachOfferGridListeners();\n        break;\n\n      case \"brand-list\":\n        const origin = window.location.origin;\n        this.content.innerHTML = this.brandListView.render(\n          viewState.data,\n          origin\n        );\n        this.attachBrandListListeners();\n        break;\n\n      case \"category-grid\":\n        this.content.innerHTML = this.categoryGridView.render(viewState.data);\n        this.attachCategoryGridListeners();\n        break;\n\n      case \"brand-offers\":\n        this.content.innerHTML = this.brandOffersView.render(viewState.data);\n        this.attachBrandOffersListeners();\n        break;\n    }\n\n    this.currentView = viewState.type;\n    this.updateHeader(viewState.title);\n  }\n\n  /**\n   * Show offer grid\n   */\n  showOfferGrid(offers: Offer[], sessionId: string): void {\n    this.sessionId = sessionId;\n    this.content.innerHTML = this.offerGridView.render(offers);\n    this.currentView = \"offer-grid\";\n    this.viewStack = [\n      {\n        type: \"offer-grid\",\n        title: \"Available Offers\",\n        data: offers,\n      },\n    ];\n    this.updateHeader(\"Available Offers\");\n    this.attachOfferGridListeners();\n    this.show();\n  }\n\n  /**\n   * Show offer detail\n   */\n  async showOfferDetail(offerCode: string, sessionId: string): Promise<void> {\n    // Cancel any existing request\n    this.cancelCurrentRequest();\n\n    // Create new AbortController\n    this.currentAbortController = new AbortController();\n    const signal = this.currentAbortController.signal;\n\n    try {\n      // Show loading with cancel button\n      this.content.innerHTML = this.offerGridView.renderLoading(true);\n      this.attachCancelLoadingListener();\n      this.updateHeader(\"Loading...\");\n      this.show();\n\n      // Fetch offer details\n      const detail = await this.offerService.getOfferDetail(\n        offerCode,\n        sessionId\n      );\n\n      // Check if request was aborted\n      if (signal.aborted) {\n        return;\n      }\n\n      this.currentOfferDetail = detail;\n      this.selectedVariant = detail.offerVariants?.[0] || null;\n      this.quantity = 1;\n\n      // Render offer detail\n      this.content.innerHTML = this.offerDetailView.render(\n        detail,\n        this.selectedVariant,\n        this.quantity,\n        this.config\n      );\n\n      this.currentView = \"offer-detail\";\n      this.viewStack.push({\n        type: \"offer-detail\",\n        title: \"Product Details\",\n        data: { offerCode, sessionId },\n      });\n      this.updateHeader(\"Product Details\");\n      this.attachOfferDetailListeners();\n\n      // Clear abort controller after successful completion\n      this.currentAbortController = null;\n    } catch (error) {\n      // Don't show error if request was aborted\n      if (signal.aborted) {\n        return;\n      }\n      console.error(\"Error showing offer detail:\", error);\n      this.content.innerHTML = `<div class=\"me-agent-error\">Failed to load offer details</div>`;\n      this.updateHeader(\"Error\");\n      this.currentAbortController = null;\n    }\n  }\n\n  /**\n   * Show brand list\n   */\n  showBrandList(brands: Brand[]): void {\n    const origin = window.location.origin;\n    this.content.innerHTML = this.brandListView.render(brands, origin);\n    this.currentView = \"brand-list\";\n    this.viewStack = [\n      {\n        type: \"brand-list\",\n        title: \"Brands with Sign-Up Rewards\",\n        data: brands,\n      },\n    ];\n    this.updateHeader(\"Brands with Sign-Up Rewards\");\n    this.attachBrandListListeners();\n    this.show();\n  }\n\n  /**\n   * Show category grid\n   */\n  showCategoryGrid(categories: Category[]): void {\n    this.content.innerHTML = this.categoryGridView.render(categories);\n    this.currentView = \"category-grid\";\n    this.viewStack = [\n      {\n        type: \"category-grid\",\n        title: \"Purchase Earning Categories\",\n        data: categories,\n      },\n    ];\n    this.updateHeader(\"Purchase Earning Categories\");\n    this.attachCategoryGridListeners();\n    this.show();\n  }\n\n  /**\n   * Show brands with offers for a category\n   */\n  async showBrandsWithOffers(\n    categoryId: string,\n    token?: string\n  ): Promise<void> {\n    // Cancel any existing request\n    this.cancelCurrentRequest();\n\n    // Create new AbortController\n    this.currentAbortController = new AbortController();\n    const signal = this.currentAbortController.signal;\n\n    try {\n      // Show loading with cancel button\n      this.content.innerHTML = this.offerGridView.renderLoading(true);\n      this.attachCancelLoadingListener();\n      this.updateHeader(\"Loading...\");\n      this.show();\n\n      // Fetch brands with offers\n      const brandsWithOffers = await this.brandService.getBrandsWithOffers(\n        categoryId,\n        token\n      );\n\n      // Check if request was aborted\n      if (signal.aborted) {\n        return;\n      }\n\n      // Render brands with offers\n      this.content.innerHTML = this.brandOffersView.render(brandsWithOffers);\n      this.currentView = \"brand-offers\";\n      this.viewStack.push({\n        type: \"brand-offers\",\n        title: \"Brands with Purchase Rewards\",\n        data: brandsWithOffers,\n      });\n      this.updateHeader(\"Brands with Purchase Rewards\");\n      this.attachBrandOffersListeners();\n\n      // Clear abort controller after successful completion\n      this.currentAbortController = null;\n    } catch (error) {\n      // Don't show error if request was aborted\n      if (signal.aborted) {\n        return;\n      }\n      console.error(\"Error showing brands with offers:\", error);\n      this.content.innerHTML = `<div class=\"me-agent-error\">Failed to load brands</div>`;\n      this.updateHeader(\"Error\");\n      this.currentAbortController = null;\n    }\n  }\n\n  /**\n   * Attach event listeners for offer grid\n   */\n  private attachOfferGridListeners(): void {\n    // Offer cards (using brand-offer-card class for consistency)\n    const offerCards = this.content.querySelectorAll(\n      \".me-agent-brand-offer-card\"\n    );\n    offerCards.forEach((card) => {\n      card.addEventListener(\"click\", () => {\n        const offerCode = card.getAttribute(\"data-offer-code\");\n        if (offerCode && this.sessionId) {\n          this.showOfferDetail(offerCode, this.sessionId);\n        }\n      });\n    });\n  }\n\n  /**\n   * Attach event listeners for offer detail\n   */\n  private attachOfferDetailListeners(): void {\n    // Variant selection\n    const variantCards = this.content.querySelectorAll(\n      \".me-agent-variant-card\"\n    );\n    variantCards.forEach((card) => {\n      card.addEventListener(\"click\", () => {\n        const variantId = card.getAttribute(\"data-variant-id\");\n        if (variantId && this.currentOfferDetail) {\n          this.selectVariant(variantId);\n        }\n      });\n    });\n\n    // Quantity controls\n    const decreaseBtn = this.content.querySelector('[data-action=\"decrease\"]');\n    const increaseBtn = this.content.querySelector('[data-action=\"increase\"]');\n\n    decreaseBtn?.addEventListener(\"click\", () => this.changeQuantity(-1));\n    increaseBtn?.addEventListener(\"click\", () => this.changeQuantity(1));\n\n    // Tabs\n    const tabs = this.content.querySelectorAll(\".me-agent-tab\");\n    tabs.forEach((tab) => {\n      tab.addEventListener(\"click\", () => {\n        const tabName = tab.getAttribute(\"data-tab\");\n        if (tabName) {\n          this.switchTab(tabName);\n        }\n      });\n    });\n\n    // Action buttons\n    this.attachActionListeners();\n  }\n\n  /**\n   * Attach event listeners for brand list\n   */\n  private attachBrandListListeners(): void {\n    // No additional listeners needed - back/close handled by header\n  }\n\n  /**\n   * Attach event listeners for category grid\n   */\n  private attachCategoryGridListeners(): void {\n    // Category cards\n    const categoryCards = this.content.querySelectorAll(\n      \".me-agent-category-card\"\n    );\n    categoryCards.forEach((card) => {\n      card.addEventListener(\"click\", () => {\n        const categoryId = card.getAttribute(\"data-category-id\");\n        if (categoryId) {\n          this.showBrandsWithOffers(categoryId);\n        }\n      });\n    });\n  }\n\n  /**\n   * Attach event listeners for brand offers\n   */\n  private attachBrandOffersListeners(): void {\n    // Offer cards - navigate to product URL\n    const offerCards = this.content.querySelectorAll(\n      \".me-agent-brand-offer-card\"\n    );\n    offerCards.forEach((card) => {\n      card.addEventListener(\"click\", () => {\n        const productUrl = card.getAttribute(\"data-product-url\");\n        if (productUrl && productUrl !== \"#\") {\n          window.open(productUrl, \"_blank\");\n        }\n      });\n    });\n  }\n\n  /**\n   * Attach cancel button listener during loading\n   */\n  private attachCancelLoadingListener(): void {\n    const cancelBtn = this.content.querySelector(\n      \".me-agent-cancel-loading-btn\"\n    );\n    if (cancelBtn) {\n      cancelBtn.addEventListener(\"click\", () => {\n        // Cancel the current request\n        this.cancelCurrentRequest();\n        \n        // Restore current view (top of stack) without popping\n        const currentView = this.viewStack[this.viewStack.length - 1];\n        if (currentView) {\n          this.restoreView(currentView);\n        }\n      });\n    }\n  }\n\n  /**\n   * Attach action button listeners (like, share, add to cart)\n   */\n  private attachActionListeners(): void {\n    const likeBtn = this.content.querySelector('[data-action=\"like\"]');\n    const shareBtn = this.content.querySelector('[data-action=\"share\"]');\n    const cartBtn = this.content.querySelector('[data-action=\"add-to-cart\"]');\n\n    likeBtn?.addEventListener(\"click\", () => {\n      if (this.currentOfferDetail && this.config.onLikeUnlike) {\n        const isLiked = likeBtn.getAttribute(\"data-liked\") === \"true\";\n        this.config.onLikeUnlike(this.currentOfferDetail, !isLiked);\n        likeBtn.setAttribute(\"data-liked\", (!isLiked).toString());\n        likeBtn.querySelector(\".me-agent-action-icon\")!.textContent = !isLiked\n          ? \"\"\n          : \"\";\n      }\n    });\n\n    shareBtn?.addEventListener(\"click\", () => {\n      if (this.currentOfferDetail && this.config.onShare) {\n        this.config.onShare(this.currentOfferDetail);\n      }\n    });\n\n    cartBtn?.addEventListener(\"click\", () => {\n      if (this.currentOfferDetail && this.config.onAddToCart) {\n        this.config.onAddToCart(this.currentOfferDetail);\n      }\n    });\n  }\n\n  /**\n   * Select a variant\n   */\n  private selectVariant(variantId: string): void {\n    if (!this.currentOfferDetail) return;\n\n    const variant = this.currentOfferDetail.offerVariants?.find(\n      (v) => v.id === variantId\n    );\n    if (variant) {\n      this.selectedVariant = variant;\n\n      // Re-render\n      this.content.innerHTML = this.offerDetailView.render(\n        this.currentOfferDetail,\n        this.selectedVariant,\n        this.quantity,\n        this.config\n      );\n      this.attachOfferDetailListeners();\n    }\n  }\n\n  /**\n   * Change quantity\n   */\n  private changeQuantity(delta: number): void {\n    const newQuantity = this.quantity + delta;\n    if (newQuantity >= 1 && newQuantity <= 10) {\n      this.quantity = newQuantity;\n\n      if (this.currentOfferDetail) {\n        this.content.innerHTML = this.offerDetailView.render(\n          this.currentOfferDetail,\n          this.selectedVariant,\n          this.quantity,\n          this.config\n        );\n        this.attachOfferDetailListeners();\n      }\n    }\n  }\n\n  /**\n   * Switch tab\n   */\n  private switchTab(tabName: string): void {\n    // Remove active class from all tabs and panes\n    this.content.querySelectorAll(\".me-agent-tab\").forEach((tab) => {\n      tab.classList.remove(\"active\");\n    });\n    this.content.querySelectorAll(\".me-agent-tab-pane\").forEach((pane) => {\n      pane.classList.remove(\"active\");\n    });\n\n    // Add active class to selected tab and pane\n    const selectedTab = this.content.querySelector(`[data-tab=\"${tabName}\"]`);\n    const selectedPane = this.content.querySelector(`[data-pane=\"${tabName}\"]`);\n\n    selectedTab?.classList.add(\"active\");\n    selectedPane?.classList.add(\"active\");\n  }\n}\n","/**\n * Offer Service\n * Business logic for offer management\n */\n\nimport { OfferDetail } from \"../types\";\nimport { OfferAPI } from \"../data/api/offer-api\";\n\n/**\n * Offer Service\n * Handles offer fetching, caching, and business logic\n */\nexport class OfferService {\n  private offerCache: Map<string, OfferDetail> = new Map();\n\n  constructor(private offerAPI: OfferAPI) {}\n\n  /**\n   * Get offer details (with caching)\n   */\n  async getOfferDetail(\n    offerCode: string,\n    sessionId: string,\n    useCache: boolean = true\n  ): Promise<OfferDetail> {\n    // Check cache first\n    if (useCache && this.offerCache.has(offerCode)) {\n      return this.offerCache.get(offerCode)!;\n    }\n\n    // Fetch from API\n    const detail = await this.offerAPI.fetchOfferDetails(offerCode, sessionId);\n\n    // Cache the result\n    this.offerCache.set(offerCode, detail);\n\n    return detail;\n  }\n\n  /**\n   * Get offers by brand ID\n   */\n  async getOffersByBrandId(brandId: string, token?: string): Promise<any[]> {\n    return this.offerAPI.fetchOffersByBrandId(brandId, token);\n  }\n\n  /**\n   * Clear offer cache\n   */\n  clearCache(): void {\n    this.offerCache.clear();\n  }\n\n  /**\n   * Calculate final price after discount\n   */\n  calculateFinalPrice(\n    originalPrice: string | number,\n    discountPercentage: string | number\n  ): number {\n    const price =\n      typeof originalPrice === \"string\"\n        ? parseFloat(originalPrice)\n        : originalPrice;\n    const discount =\n      typeof discountPercentage === \"string\"\n        ? parseFloat(discountPercentage)\n        : discountPercentage;\n\n    return price * (1 - discount / 100);\n  }\n}\n","/**\n * Brand Service\n * Business logic for brand and category management\n */\n\nimport { Brand, Category } from \"../types\";\nimport { BrandAPI } from \"../data/api/brand-api\";\nimport { OfferAPI } from \"../data/api/offer-api\";\n\n/**\n * Brand Service\n * Handles brand fetching and business logic\n */\nexport class BrandService {\n  constructor(private brandAPI: BrandAPI, private offerAPI: OfferAPI) {}\n\n  /**\n   * Get brands by category ID\n   */\n  async getBrandsByCategory(categoryId: string): Promise<any[]> {\n    return this.brandAPI.fetchBrandsByCategoryId(categoryId);\n  }\n\n  /**\n   * Get brands with their offers for a category\n   * Filters out brands with no offers\n   */\n  async getBrandsWithOffers(\n    categoryId: string,\n    token?: string\n  ): Promise<Array<{ brand: any; offers: any[] }>> {\n    // Fetch all brands for the category\n    const brands = await this.brandAPI.fetchBrandsByCategoryId(categoryId);\n\n    // Fetch offers for each brand in parallel\n    const brandsWithOffers = await Promise.all(\n      brands.map(async (brand) => {\n        try {\n          const offers = await this.offerAPI.fetchOffersByBrandId(\n            brand.id,\n            token\n          );\n          return { brand, offers };\n        } catch (error) {\n          console.error(`Error fetching offers for brand ${brand.id}:`, error);\n          return { brand, offers: [] };\n        }\n      })\n    );\n\n    // Filter out brands with no offers\n    return brandsWithOffers.filter((item) => item.offers.length > 0);\n  }\n\n  /**\n   * Generate signup link for a brand\n   */\n  generateSignupLink(brand: Brand, callbackUrl: string): string {\n    const baseUrl = brand.shopifyStoreUrl || brand.websiteUrl || \"\";\n    if (!baseUrl) return \"#\";\n\n    const url = new URL(baseUrl);\n    url.searchParams.append(\"meprotocol_callback\", callbackUrl);\n    return url.toString();\n  }\n\n  /**\n   * Format conversion rate display\n   */\n  formatConversionRate(brand: Brand): string {\n    const { rewardSymbol, rewardValueInDollars } =\n      brand.rewardDetails.rewardInfo;\n    const dollars = parseFloat(rewardValueInDollars || \"0\");\n    return `1 ${rewardSymbol} = $${dollars.toFixed(2)}`;\n  }\n\n  /**\n   * Get reward amount display text\n   */\n  getRewardAmountText(brand: Brand): string {\n    const rule = brand.rewardDetails.rules[0];\n    if (!rule) return \"N/A\";\n\n    const { points } = rule;\n    const { rewardSymbol } = brand.rewardDetails.rewardInfo;\n\n    return `${points.toLocaleString()} ${rewardSymbol}`;\n  }\n}\n","import {\n  Message,\n  QuickAction,\n  Offer,\n  Brand,\n  Category,\n  MeAgentConfig,\n} from \"../../types\";\nimport { MessageComponent } from \"./message\";\nimport { QuickActionsComponent } from \"./quick-actions\";\nimport { OfferPreviewCard } from \"./offer-preview\";\nimport { CardList, CardListItem } from \"./card-list\";\nimport { DetailPanelController } from \"../../controllers/detail-panel-controller\";\nimport { OfferService } from \"../../services/offer-service\";\nimport { BrandService } from \"../../services/brand-service\";\nimport { RedemptionService } from \"../../services/redemption-service\";\nimport { APIClient } from \"../../data/api/api-client\";\nimport {\n  getCloseIcon,\n  getMaximizeIcon,\n  getMinimizeIcon,\n  getSendIcon,\n  getAssistantAvatarIcon,\n  getChatIcon,\n} from \"../shared/icons\";\n\n/**\n * Chat Popup Component\n */\nexport class ChatPopup {\n  private element: HTMLDivElement;\n  private messagesContainer: HTMLDivElement;\n  private inputElement: HTMLInputElement;\n  private sendButton: HTMLButtonElement;\n  private maximizeButton: HTMLButtonElement;\n  private position: \"bottom-right\" | \"bottom-left\";\n  private onSendMessage: (message: string) => void;\n  private onClose: () => void;\n  private welcomeElement: HTMLDivElement | null = null;\n  private isMaximized: boolean = false;\n  private detailPanelController: DetailPanelController;\n  private currentOffers: Offer[] = [];\n  private sessionId: string = \"\";\n  private apiClient: APIClient;\n  private offerService: OfferService;\n  private brandService: BrandService;\n  private redemptionService: RedemptionService | null = null;\n  private config: MeAgentConfig;\n\n  constructor(\n    position: \"bottom-right\" | \"bottom-left\",\n    onSendMessage: (message: string) => void,\n    onClose: () => void,\n    apiClient: APIClient,\n    sessionId: string,\n    config: MeAgentConfig,\n    redemptionService?: RedemptionService\n  ) {\n    this.position = position;\n    this.onSendMessage = onSendMessage;\n    this.onClose = onClose;\n    this.apiClient = apiClient;\n    this.sessionId = sessionId;\n    this.config = config;\n    this.redemptionService = redemptionService || null;\n\n    // Initialize services\n    this.offerService = new OfferService(apiClient.offerAPI);\n    this.brandService = new BrandService(\n      apiClient.brandAPI,\n      apiClient.offerAPI\n    );\n\n    // Initialize detail panel controller\n    this.detailPanelController = new DetailPanelController(\n      config,\n      this.offerService,\n      this.brandService,\n      () => this.hideDetailPanel()\n    );\n\n    this.element = this.create();\n    this.messagesContainer = this.element.querySelector(\".me-agent-messages\")!;\n    this.inputElement = this.element.querySelector(\".me-agent-input\")!;\n    this.sendButton = this.element.querySelector(\".me-agent-send-button\")!;\n    this.maximizeButton = this.element.querySelector(\n      \".me-agent-maximize-button\"\n    )!;\n\n    // Mount detail panel inside chat - controller provides its own wrapper\n    this.element.appendChild(this.detailPanelController.getElement());\n\n    this.setupEventListeners();\n  }\n\n  /**\n   * Create the chat popup element\n   */\n  private create(): HTMLDivElement {\n    const chat = document.createElement(\"div\");\n    chat.className = `me-agent-chat ${this.position}`;\n\n    chat.innerHTML = `\n      <div class=\"me-agent-chat-content\">\n        <div class=\"me-agent-chat-header\">\n          <div class=\"me-agent-chat-title-container\">\n            ${getChatIcon({\n              width: 20,\n              height: 20,\n              className: \"me-agent-chat-icon\",\n              color: \"#999999\",\n            })}\n            <h3 class=\"me-agent-chat-title\">Chats</h3>\n          </div>\n          <div class=\"me-agent-header-buttons\">\n            <button class=\"me-agent-maximize-button\" aria-label=\"Maximize chat\">\n              <span class=\"me-agent-maximize-icon\">${getMaximizeIcon({\n                width: 16,\n                height: 16,\n              })}</span>\n              <span class=\"me-agent-minimize-icon\" style=\"display:none;\">${getMinimizeIcon(\n                { width: 16, height: 16 }\n              )}</span>\n            </button>\n            <button class=\"me-agent-close-button\" aria-label=\"Close chat\">${getCloseIcon(\n              { width: 20, height: 20 }\n            )}</button>\n          </div>\n        </div>\n        <div class=\"me-agent-messages\"></div>\n        <div class=\"me-agent-input-container\">\n          <div class=\"me-agent-input-content\">\n            <input \n              type=\"text\" \n              class=\"me-agent-input\" \n              placeholder=\"Ask or search anything...\"\n              aria-label=\"Message input\"\n            />\n            <button class=\"me-agent-send-button\" aria-label=\"Send message\">${getSendIcon(\n              { width: 18, height: 18 }\n            )}</button>\n          </div>\n        </div>\n      </div>\n    `;\n\n    return chat;\n  }\n\n  /**\n   * Setup event listeners\n   */\n  private setupEventListeners(): void {\n    // Close button\n    const closeButton = this.element.querySelector(\".me-agent-close-button\");\n    closeButton?.addEventListener(\"click\", this.onClose);\n\n    // Maximize button\n    this.maximizeButton.addEventListener(\"click\", () => this.toggleMaximize());\n\n    // Send button\n    this.sendButton.addEventListener(\"click\", () => this.handleSend());\n\n    // Enter key to send\n    this.inputElement.addEventListener(\"keypress\", (e) => {\n      if (e.key === \"Enter\" && !e.shiftKey) {\n        e.preventDefault();\n        this.handleSend();\n      }\n    });\n\n    // Monitor input changes to enable/disable send button\n    this.inputElement.addEventListener(\"input\", () => {\n      this.updateSendButtonState();\n    });\n\n    // Set initial send button state\n    this.updateSendButtonState();\n  }\n\n  /**\n   * Update send button state based on input value\n   */\n  private updateSendButtonState(): void {\n    const hasText = this.inputElement.value.trim().length > 0;\n    this.sendButton.disabled = !hasText;\n  }\n\n  /**\n   * Handle send message\n   */\n  private handleSend(): void {\n    const message = this.inputElement.value.trim();\n    if (message) {\n      this.hideWelcome(); // Remove quick actions when user sends a message\n      this.onSendMessage(message);\n      this.inputElement.value = \"\";\n      this.updateSendButtonState(); // Disable button after clearing input\n    }\n  }\n\n  /**\n   * Show welcome message with quick actions\n   */\n  showWelcome(): void {\n    this.welcomeElement = document.createElement(\"div\");\n    this.welcomeElement.className =\n      \"me-agent-message assistant me-agent-welcome-message\";\n\n    const quickActions: QuickAction[] = [\n      {\n        id: \"search\",\n        label: \"Search for an offer\",\n        value: \"Search for an offer\",\n        icon: \"search\",\n      },\n      {\n        id: \"offers\",\n        label: \"Earn a reward\",\n        value: \"Earn a reward\",\n        icon: \"offers\",\n      },\n      { id: \"rewards\", label: \"My rewards\", value: \"My rewards\", icon: \"tags\" },\n    ];\n\n    // Avatar\n    const avatarDiv = document.createElement(\"div\");\n    avatarDiv.className = \"me-agent-message-avatar-wrapper\";\n    avatarDiv.innerHTML = getAssistantAvatarIcon({\n      width: 32,\n      height: 32,\n      className: \"me-agent-message-avatar\",\n    });\n\n    // Content wrapper\n    const contentWrapper = document.createElement(\"div\");\n    contentWrapper.className = \"me-agent-message-content-wrapper\";\n\n    // Message content\n    const contentDiv = document.createElement(\"div\");\n    contentDiv.className = \"me-agent-message-content\";\n    contentDiv.innerHTML = `\n      <div></div>\n      <div>Hi there! Welcome, I am Meely. How would you like me to help you today?</div>\n    `;\n\n    // Quick actions\n    const actionsContainer = QuickActionsComponent.create(\n      quickActions,\n      (action) => {\n        // Hide only the quick actions, not the entire message\n        actionsContainer.remove();\n        this.onSendMessage(action.value);\n      }\n    );\n\n    contentWrapper.appendChild(contentDiv);\n    contentWrapper.appendChild(actionsContainer);\n    this.welcomeElement.appendChild(avatarDiv);\n    this.welcomeElement.appendChild(contentWrapper);\n\n    this.messagesContainer.appendChild(this.welcomeElement);\n  }\n\n  /**\n   * Hide welcome message (but keep the message, just remove quick actions)\n   */\n  hideWelcome(): void {\n    if (this.welcomeElement) {\n      // Just hide the quick actions, keep the welcome message visible\n      const actionsContainer = this.welcomeElement.querySelector(\n        \".me-agent-quick-actions\"\n      );\n      if (actionsContainer) {\n        actionsContainer.remove();\n      }\n    }\n  }\n\n  /**\n   * Add a message to the chat\n   */\n  addMessage(message: Message): void {\n    const messageElement = MessageComponent.create(message, (offerCode) => {\n      this.handleOfferClick(offerCode);\n    });\n    this.messagesContainer.appendChild(messageElement);\n    this.scrollToBottom();\n  }\n\n  /**\n   * Show loading indicator\n   */\n  showLoading(): HTMLDivElement {\n    const loadingElement = MessageComponent.createLoading();\n    this.messagesContainer.appendChild(loadingElement);\n    this.scrollToBottom();\n    return loadingElement;\n  }\n\n  /**\n   * Remove loading indicator\n   */\n  removeLoading(): void {\n    const loadingElement = this.messagesContainer.querySelector(\n      '[data-loading=\"true\"]'\n    );\n    if (loadingElement) {\n      loadingElement.remove();\n    }\n  }\n\n  /**\n   * Update last message content (for streaming)\n   */\n  updateLastMessage(content: string): void {\n    const messages = this.messagesContainer.querySelectorAll(\n      \".me-agent-message.assistant\"\n    );\n    const lastMessage = messages[messages.length - 1] as HTMLElement;\n    if (lastMessage) {\n      MessageComponent.updateContent(lastMessage, content, (offerCode) => {\n        this.handleOfferClick(offerCode);\n      });\n      this.scrollToBottom();\n    }\n  }\n\n  /**\n   * Scroll to bottom of messages\n   */\n  private scrollToBottom(): void {\n    this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;\n  }\n\n  /**\n   * Toggle maximize/minimize\n   */\n  toggleMaximize(): void {\n    this.isMaximized = !this.isMaximized;\n\n    if (this.isMaximized) {\n      // Maximizing\n      this.element.classList.add(\"maximized\");\n      const maximizeIcon = this.maximizeButton.querySelector(\n        \".me-agent-maximize-icon\"\n      ) as HTMLElement;\n      const minimizeIcon = this.maximizeButton.querySelector(\n        \".me-agent-minimize-icon\"\n      ) as HTMLElement;\n      maximizeIcon.style.display = \"none\";\n      minimizeIcon.style.display = \"block\";\n      this.maximizeButton.setAttribute(\"aria-label\", \"Restore chat\");\n\n      // Scroll to bottom after animation\n      setTimeout(() => this.scrollToBottom(), 300);\n    } else {\n      // Minimizing - hide detail panel first\n      this.hideDetailPanel();\n\n      // Trigger slide out animation\n      this.element.classList.add(\"minimizing\");\n\n      const maximizeIcon = this.maximizeButton.querySelector(\n        \".me-agent-maximize-icon\"\n      ) as HTMLElement;\n      const minimizeIcon = this.maximizeButton.querySelector(\n        \".me-agent-minimize-icon\"\n      ) as HTMLElement;\n\n      // Wait for slide out animation to complete\n      setTimeout(() => {\n        // Remove maximized state and minimizing class\n        this.element.classList.remove(\"maximized\");\n        this.element.classList.remove(\"minimizing\");\n\n        // Temporarily remove visible class to prepare for slide-in animation\n        this.element.classList.remove(\"visible\");\n\n        // Update icons\n        maximizeIcon.style.display = \"block\";\n        minimizeIcon.style.display = \"none\";\n        this.maximizeButton.setAttribute(\"aria-label\", \"Maximize chat\");\n\n        // Trigger slide-in animation from bottom\n        setTimeout(() => {\n          this.element.classList.add(\"visible\");\n          setTimeout(() => this.scrollToBottom(), 100);\n        }, 50);\n      }, 300);\n    }\n  }\n\n  /**\n   * Show the chat popup\n   */\n  show(): void {\n    this.element.classList.add(\"visible\");\n    this.inputElement.focus();\n  }\n\n  /**\n   * Hide the chat popup\n   */\n  hide(): void {\n    this.element.classList.remove(\"visible\");\n    this.hideDetailPanel(); // Hide detail panel when closing chat\n    if (this.isMaximized) {\n      this.toggleMaximize(); // Reset to normal size when closing\n    }\n  }\n\n  /**\n   * Set loading state for input\n   */\n  setLoading(loading: boolean): void {\n    this.inputElement.disabled = loading;\n    this.sendButton.disabled = loading;\n  }\n\n  /**\n   * Clear all messages\n   */\n  clearMessages(): void {\n    this.messagesContainer.innerHTML = \"\";\n    this.showWelcome();\n  }\n\n  /**\n   * Show offer preview card - appends to the last assistant message\n   */\n  showOfferPreview(offers: Offer[]): void {\n    // Create preview card with its own offers bound to the click handler\n    const previewCard = OfferPreviewCard.create(offers, () =>\n      this.showDetailPanel(offers)\n    );\n\n    // Find the last assistant message and append the card to its content wrapper\n    const messages = this.messagesContainer.querySelectorAll(\n      \".me-agent-message.assistant\"\n    );\n    const lastMessage = messages[messages.length - 1] as HTMLElement;\n\n    if (lastMessage) {\n      MessageComponent.appendToMessage(lastMessage, previewCard);\n    } else {\n      // Fallback: append to messages container if no assistant message found\n      this.messagesContainer.appendChild(previewCard);\n    }\n\n    this.scrollToBottom();\n  }\n\n  /**\n   * Show brand preview card - appends to the last assistant message\n   */\n  showBrandPreview(brands: Brand[]): void {\n    // Convert brands to CardListItem format\n    const brandItems: CardListItem[] = brands.slice(0, 10).map((brand) => ({\n      id: brand.id,\n      title: brand.name,\n      image:\n        brand.logoUrl ||\n        `https://via.placeholder.com/40x40?text=${brand.name.charAt(0)}`,\n    }));\n\n    // Create card list\n    const brandCard = CardList.create({\n      title: \"List of brands that offer sign up rewards\",\n      items: brandItems,\n      actionLabel: \"View All\",\n      onAction: () => this.showBrandsDetail(brands),\n    });\n\n    // Find the last assistant message and append the card to its content wrapper\n    const messages = this.messagesContainer.querySelectorAll(\n      \".me-agent-message.assistant\"\n    );\n    const lastMessage = messages[messages.length - 1] as HTMLElement;\n\n    if (lastMessage) {\n      MessageComponent.appendToMessage(lastMessage, brandCard);\n    } else {\n      // Fallback: append to messages container if no assistant message found\n      this.messagesContainer.appendChild(brandCard);\n    }\n\n    this.scrollToBottom();\n  }\n\n  /**\n   * Show brands detail panel with full list\n   */\n  private showBrandsDetail(brands: Brand[]): void {\n    if (this.isMaximized) {\n      this.detailPanelController.showBrandList(brands);\n      this.element.classList.add(\"has-detail-panel\");\n    } else {\n      this.toggleMaximize();\n      // Wait for maximize animation\n      setTimeout(() => {\n        this.detailPanelController.showBrandList(brands);\n        this.element.classList.add(\"has-detail-panel\");\n      }, 300);\n    }\n  }\n\n  /**\n   * Show category preview with card list\n   */\n  showCategoryPreview(categories: Category[]): void {\n    const categoryItems: CardListItem[] = categories\n      .slice(0, 10)\n      .map((category) => ({\n        id: category.categoryId,\n        title: category.title || category.categoryName,\n        image:\n          category.image ||\n          `https://via.placeholder.com/40x40?text=${(\n            category.title || category.categoryName\n          ).charAt(0)}`,\n      }));\n\n    const categoryCard = CardList.create({\n      title: \"List of category that offer purchase rewards\",\n      items: categoryItems,\n      actionLabel: \"View All\",\n      onAction: () => this.showCategoriesDetail(categories),\n    });\n\n    const messages = this.messagesContainer.querySelectorAll(\n      \".me-agent-message.assistant\"\n    );\n    const lastMessage = messages[messages.length - 1] as HTMLElement;\n    if (lastMessage) {\n      MessageComponent.appendToMessage(lastMessage, categoryCard);\n    } else {\n      this.messagesContainer.appendChild(categoryCard);\n    }\n\n    this.scrollToBottom();\n  }\n\n  /**\n   * Show categories detail panel with grid\n   */\n  private showCategoriesDetail(categories: Category[]): void {\n    if (this.isMaximized) {\n      this.detailPanelController.showCategoryGrid(categories);\n      this.element.classList.add(\"has-detail-panel\");\n    } else {\n      this.toggleMaximize();\n      // Wait for maximize animation\n      setTimeout(() => {\n        this.detailPanelController.showCategoryGrid(categories);\n        this.element.classList.add(\"has-detail-panel\");\n      }, 300);\n    }\n  }\n\n  /**\n   * Show ways to earn quick actions\n   */\n  showWaysToEarnActions(): void {\n    const actions: QuickAction[] = [\n      {\n        id: \"sign_up_brand\",\n        label: \"Sign up for a brand\",\n        value: \"Sign up for a brand\",\n        icon: \"user\",\n      },\n      {\n        id: \"purchase_brand\",\n        label: \"Purchase from a brand\",\n        value: \"Purchase from a brand\",\n        icon: \"money\",\n      },\n    ];\n\n    const quickActionsElement = QuickActionsComponent.create(\n      actions,\n      (action) => {\n        // Send the action label as a message\n        this.onSendMessage(action.label);\n      }\n    );\n\n    // Find the last assistant message and append the quick actions\n    const messages = this.messagesContainer.querySelectorAll(\n      \".me-agent-message.assistant\"\n    );\n    const lastMessage = messages[messages.length - 1] as HTMLElement;\n\n    if (lastMessage) {\n      MessageComponent.appendToMessage(lastMessage, quickActionsElement);\n    } else {\n      // Fallback: append to messages container if no assistant message found\n      this.messagesContainer.appendChild(quickActionsElement);\n    }\n\n    this.scrollToBottom();\n  }\n\n  /**\n   * Show detail panel with offers\n   */\n  private showDetailPanel(offers: Offer[]): void {\n    // Store the offers that are being displayed\n    this.currentOffers = offers;\n\n    // Auto-maximize when showing offers\n    if (!this.isMaximized) {\n      this.toggleMaximize();\n    }\n\n    this.element.classList.add(\"has-detail-panel\");\n    this.detailPanelController.showOfferGrid(offers, this.sessionId);\n    this.detailPanelController.show();\n  }\n\n  /**\n   * Hide detail panel\n   */\n  private hideDetailPanel(): void {\n    this.element.classList.remove(\"has-detail-panel\");\n    this.detailPanelController.hide();\n  }\n\n  /**\n   * Handle offer click\n   */\n  private async handleOfferClick(offerCode: string): Promise<void> {\n    try {\n      // Maximize widget if not already maximized\n      if (!this.isMaximized) {\n        this.toggleMaximize();\n      }\n\n      // Show the detail panel with offer details\n      this.element.classList.add(\"has-detail-panel\");\n      await this.detailPanelController.showOfferDetail(\n        offerCode,\n        this.sessionId\n      );\n    } catch (error) {\n      console.error(\"Error fetching offer details:\", error);\n      alert(\"Failed to load offer details. Please try again.\");\n    }\n  }\n\n  /**\n   * Mount the chat to the DOM\n   */\n  mount(): void {\n    document.body.appendChild(this.element);\n  }\n\n  /**\n   * Remove the chat from the DOM\n   */\n  unmount(): void {\n    this.element.remove();\n  }\n\n  /**\n   * Get the chat element\n   */\n  getElement(): HTMLDivElement {\n    return this.element;\n  }\n}\n","/**\n * Styles - Scoped CSS for SDK components\n */\n\nexport const styles = `\n  /* Import Clash Display font */\n  @import url('https://fonts.googleapis.com/css2?family=Clash+Display:wght@400;500;600;700&display=swap');\n\n  /* Container for all SDK elements */\n  .me-agent-container * {\n    box-sizing: border-box;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n  }\n\n  /* Floating Button */\n  .me-agent-button {\n    position: fixed;\n    bottom: 24px;\n    width: 64px;\n    height: 64px;\n    border-radius: 50%;\n    background: #0F0F0F;\n    outline: 1px #4D4D4D solid;\n    cursor: pointer;\n    box-shadow: 0px 16px 40px rgba(255, 255, 255, 0.24);\n    z-index: 999999;\n    transition: transform 0.2s ease, box-shadow 0.2s ease;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .me-agent-button:hover {\n    transform: scale(1.05);\n    box-shadow: 0px 16px 40px rgba(255, 255, 255, 0.24);\n  }\n\n  .me-agent-button.bottom-right {\n    right: 24px;\n  }\n\n  .me-agent-button.bottom-left {\n    left: 24px;\n  }\n\n  /* Hidden state for button when chat is open */\n  .me-agent-button.hidden {\n    opacity: 0;\n    transform: translateY(100px);\n    pointer-events: none;\n  }\n\n  .me-agent-button-icon {\n    display: block;\n  }\n\n  /* Chat Container */\n  .me-agent-chat {\n    position: fixed;\n    bottom: 20px;\n    width: 672px;\n    height: 602px;\n    background: rgba(250, 250, 250, 0.8);\n    outline: 1px #E6E6E6 solid;\n    border-radius: 16px;\n    box-shadow: 0px 24px 40px rgba(0, 0, 0, 0.08);\n    z-index: 999999;\n    display: flex;\n    flex-direction: row;\n    overflow: hidden;\n    opacity: 0;\n    transform: translateY(20px);\n    pointer-events: none;\n    transition: opacity 0.3s ease, transform 0.3s ease;\n    backdrop-filter: blur(32px);\n  }\n\n  .me-agent-chat.visible {\n    opacity: 1;\n    transform: translateY(0);\n    pointer-events: auto;\n  }\n\n  .me-agent-chat.bottom-right {\n    right: 24px;\n  }\n\n  .me-agent-chat.bottom-left {\n    left: 24px;\n  }\n\n  /* Chat Content (left side) */\n  .me-agent-chat-content {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n  }\n\n  /* Detail Panel Wrapper (right side) */\n  .me-agent-detail-panel-wrapper {\n    width: 0;\n    height: 100%;\n    overflow: hidden;\n    transition: width 0.3s ease;\n  }\n\n  .me-agent-chat.has-detail-panel .me-agent-detail-panel-wrapper {\n    width: 672px;\n    border-left: 1px solid #999999;\n  }\n\n  /* Maximized State */\n  .me-agent-chat.maximized {\n    width: 672px !important;\n    height: 100vh !important;\n    top: 0 !important;\n    bottom: 0 !important;\n    right: 0 !important;\n    left: auto !important;\n    border-radius: 0;\n    animation: slideInFromRight 0.3s ease;\n  }\n\n  /* Maximized with detail panel */\n  .me-agent-chat.maximized.has-detail-panel {\n    width: 1272px !important;\n  }\n\n  .me-agent-chat.minimizing {\n    animation: slideOutToRight 0.3s ease;\n  }\n\n  @keyframes slideInFromRight {\n    from {\n      transform: translateX(100%);\n      opacity: 0;\n    }\n    to {\n      transform: translateX(0);\n      opacity: 1;\n    }\n  }\n\n  @keyframes slideOutToRight {\n    from {\n      transform: translateX(0);\n      opacity: 1;\n    }\n    to {\n      transform: translateX(100%);\n      opacity: 0;\n    }\n  }\n\n  /* Chat Header */\n  .me-agent-chat-header {\n    padding: 20px;\n    background: transparent;\n    color: #0F0F0F;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n\n  .me-agent-chat-title-container {\n    display: flex;\n    align-items: center;\n    gap: 4px;\n  }\n\n  .me-agent-chat-title {\n    font-size: 16px;\n    font-weight: 600;\n    margin: 0;\n  }\n\n  .me-agent-header-buttons {\n    display: flex;\n    gap: 8px;\n    align-items: center;\n  }\n\n  .me-agent-maximize-button,\n  .me-agent-close-button {\n    background: white;\n    border: none;\n    color: #000000;\n    cursor: pointer;\n    padding: 0;\n    width: 32px;\n    height: 32px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 50%;\n    transition: background 0.2s ease;\n  }\n\n  .me-agent-maximize-button {\n    font-size: 16px;\n  }\n\n  .me-agent-maximize-button svg,\n  .me-agent-close-button svg {\n    display: block;\n  }\n\n  .me-agent-close-button {\n    font-size: 24px;\n  }\n\n  .me-agent-maximize-button:hover,\n  .me-agent-close-button:hover {\n    background: rgba(255, 255, 255, 0.5);\n  }\n\n  /* Messages Container */\n  .me-agent-messages {\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n    background: transparent;\n  }\n\n  /* Welcome Message */\n  .me-agent-welcome {\n    text-align: center;\n    padding: 20px 0;\n  }\n\n  .me-agent-welcome-title {\n    font-size: 20px;\n    font-weight: 600;\n    color: #1f2937;\n    margin: 0 0 20px 0;\n  }\n\n  /* Quick Actions */\n  .me-agent-quick-actions {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    margin-top: 10px;\n  }\n\n  .me-agent-quick-action {\n    background: white;\n    border: 1px solid #e5e7eb;\n    padding: 12px 16px;\n    border-radius: 8px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    font-size: 14px;\n    color: #374151;\n    text-align: left;\n  }\n\n  .me-agent-quick-action:hover {\n    background: #f3f4f6;\n    border-color: #667eea;\n    transform: translateX(2px);\n  }\n\n  /* Message Bubble */\n  .me-agent-message {\n    display: flex;\n    gap: 10px;\n    animation: slideIn 0.3s ease;\n    margin-bottom: 16px;\n  }\n\n  @keyframes slideIn {\n    from {\n      opacity: 0;\n      transform: translateY(10px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  .me-agent-message.user {\n    flex-direction: row-reverse;\n  }\n\n  /* Avatar */\n  .me-agent-message-avatar-wrapper {\n    flex-shrink: 0;\n    width: 32px;\n    height: 32px;\n  }\n\n  .me-agent-message-avatar {\n    width: 100%;\n    height: 100%;\n    display: block;\n  }\n\n  /* Content Wrapper */\n  .me-agent-message-content-wrapper {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    flex: 1;\n    min-width: 0;\n  }\n\n  .me-agent-message-content {\n    max-width: 400px;\n    width: fit-content;\n    padding: 12px 16px;\n    border-radius: 16px;\n    font-size: 16px;\n    line-height: 1.5;\n    word-wrap: break-word;\n    word-break: break-word;\n  }\n\n  .me-agent-message.user .me-agent-message-content {\n    background: #000000;\n    color: white;\n    border-top-right-radius: 0px;\n    margin-left: auto;\n  }\n\n  .me-agent-message.assistant .me-agent-message-content {\n    background: white;\n    color: #1f2937;\n    border-top-left-radius: 0px;\n  }\n\n  /* Links in message content */\n  .me-agent-message-content a {\n    color: #999999;\n    text-decoration: none;\n    font-weight: 500;\n    transition: color 0.2s ease;\n  }\n\n  .me-agent-message-content a:hover {\n    color: #000000;\n    text-decoration: underline;\n  }\n\n  /* Offer links - special styling */\n  .me-agent-message-content .me-agent-offer-link {\n    color: #999999;\n    font-weight: 600;\n    cursor: pointer;\n    border-bottom: 1px dashed #999999;\n    padding-bottom: 1px;\n  }\n\n  .me-agent-message-content .me-agent-offer-link:hover {\n    color: #999999;\n    border-bottom-color: #999999;\n    text-decoration: none;\n  }\n\n  /* Bold and italic text */\n  .me-agent-message-content strong {\n    font-weight: 600;\n  }\n\n  .me-agent-message-content em {\n    font-style: italic;\n  }\n\n  /* Quick Actions */\n  .me-agent-quick-actions {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    align-items: flex-start;\n  }\n\n  .me-agent-quick-action-button {\n    display: inline-flex;\n    align-items: center;\n    gap: 8px;\n    background: none;\n    border-radius: 10px;\n    font-size: 14px;\n    font-weight: 500;\n    color: #1f2937;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    text-align: left;\n    border: none;\n    padding: 8px 0px;\n    white-space: nowrap;\n  }\n\n  .me-agent-quick-action-button:hover {\n    transform: translateX(5px);\n  }\n\n  .me-agent-quick-action-icon {\n    flex-shrink: 0;\n    color: #999999;\n  }\n\n  .me-agent-quick-action-text {\n    flex-shrink: 0;\n  }\n\n  /* Welcome Message Specific Styles */\n  .me-agent-welcome-message .me-agent-message-content {\n    max-width: 400px;\n    line-height: 1.6;\n  }\n\n  .me-agent-welcome-message .me-agent-message-content > div {\n    margin-bottom: 4px;\n  }\n\n  .me-agent-welcome-message .me-agent-message-content > div:first-child {\n    font-size: 20px;\n    margin-bottom: 8px;\n  }\n\n  /* Input Container */\n  .me-agent-input-container {\n    padding: 20px;\n  }\n\n  .me-agent-input-content {\n    padding: 16px 20px;\n    background: white;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    border-radius: 16px;\n  }\n\n  .me-agent-input {\n    flex: 1;\n    padding: 12px 2px;\n    font-size: 16px;\n    outline: none;\n    border: none;\n  }\n\n  .me-agent-send-button {\n    width: 32px;\n    height: 32px;\n    background: #000000;\n    color: white;\n    border: none;\n    border-radius: 100px;\n    font-size: 14px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: transform 0.2s ease;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .me-agent-send-button svg {\n    display: block;\n  }\n\n  .me-agent-send-button:hover:not(:disabled) {\n    transform: scale(1.02);\n  }\n\n  .me-agent-send-button:disabled {\n    opacity: 0.3;\n    cursor: not-allowed;\n  }\n\n  .me-agent-send-button:hover:not(:disabled) {\n    background: #999999;\n  }\n\n  /* Loading Indicator */\n  .me-agent-loading {\n    display: flex;\n    align-items: center;\n    gap: 4px;\n  }\n\n  .me-agent-loading-text {\n    color: #6b7280;\n    font-size: 14px;\n  }\n\n  .me-agent-loading-dots {\n    display: flex;\n    align-items: flex-end;\n    gap: 2px;\n    height: 14px;\n  }\n\n  .me-agent-loading-dot {\n    width: 4px;\n    height: 4px;\n    border-radius: 50%;\n    background: #9ca3af;\n    animation: bounce 1.4s infinite ease-in-out both;\n  }\n\n  .me-agent-loading-dot:nth-child(1) {\n    animation-delay: -0.32s;\n  }\n\n  .me-agent-loading-dot:nth-child(2) {\n    animation-delay: -0.16s;\n  }\n\n  .me-agent-loading-dot:nth-child(3) {\n    animation-delay: 0s;\n  }\n\n  @keyframes bounce {\n    0%, 60%, 100% {\n      transform: translateY(0);\n      opacity: 0.4;\n    }\n    30% {\n      transform: translateY(-4px);\n      opacity: 1;\n    }\n  }\n\n  /* Card List Component (for offers, earnings, etc.) */\n  .me-agent-card-list {\n    background: #CCD3FF;\n    border: 1px solid #8899FF;\n    border-radius: 16px;\n    padding: 16px;\n    margin-top: 8px;\n    animation: slideIn 0.3s ease;\n  }\n\n  .me-agent-card-list-content {\n    display: flex;\n    gap: 12px;\n    align-items: center;\n  }\n\n  .me-agent-card-avatars {\n    display: flex;\n    position: relative;\n    min-width: fit-content;\n  }\n\n  .me-agent-card-avatar {\n    width: 48px;\n    height: 48px;\n    border-radius: 12px;\n    border: 2px solid #CCD3FF;\n    background-size: cover;\n    background-position: center;\n    background-color: white;\n    margin-left: -8px;\n    flex-shrink: 0;\n  }\n\n  .me-agent-card-avatar:first-child {\n    margin-left: 0;\n  }\n\n  .me-agent-card-avatar-overlay {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: relative;\n  }\n\n  .me-agent-card-avatar-overlay::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.6);\n    border-radius: 12px;\n    z-index: 1;\n  }\n\n  .me-agent-card-avatar-count {\n    color: white;\n    font-size: 14px;\n    font-weight: 700;\n    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n    position: relative;\n    z-index: 2;\n  }\n\n  .me-agent-card-list-text {\n    flex: 1;\n  }\n\n  .me-agent-card-list-title {\n    font-size: 14px;\n    color: #374151;\n    font-weight: 500;\n  }\n\n  .me-agent-card-list-button {\n    color: #0F0F0F;\n    border: none;\n    font-size: 14px;\n    font-weight: 600;\n    cursor: pointer;\n    padding: 0px;\n    margin: 0px;\n    transition: opacity 0.2s ease;\n    background: none;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 4px;\n  }\n\n  .me-agent-card-list-button:hover {\n    opacity: 0.8;\n  }\n\n  /* Detail Panel */\n  .me-agent-detail-panel {\n    width: 100%;\n    height: 100%;\n    background: white;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n    opacity: 0;\n    pointer-events: none;\n    transition: opacity 0.3s ease;\n  }\n\n  .me-agent-detail-panel.visible {\n    opacity: 1;\n    pointer-events: auto;\n  }\n\n  /* Detail Panel Header */\n  .me-agent-detail-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 16px 20px;\n    border-bottom: 1px solid #e5e5e5;\n    background: white;\n    flex-shrink: 0;\n  }\n\n  .me-agent-detail-title {\n    font-size: 18px;\n    font-weight: 600;\n    color: #1a1a1a;\n    margin: 0;\n    flex: 1;\n  }\n\n  .me-agent-back-button {\n    display: flex;\n    align-items: center;\n    background: none;\n    border: none;\n    cursor: pointer;\n    padding: 0;\n    color: #1a1a1a;\n    font-size: 18px;\n    font-weight: 600;\n    transition: opacity 0.2s ease;\n    flex: 1;\n  }\n\n  .me-agent-back-button:hover {\n    opacity: 0.7;\n  }\n\n  .me-agent-detail-header .me-agent-close-button {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: none;\n    border: none;\n    cursor: pointer;\n    padding: 8px;\n    color: #666;\n    transition: opacity 0.2s ease;\n  }\n\n  .me-agent-detail-header .me-agent-close-button:hover {\n    opacity: 0.7;\n  }\n\n  /* Detail Panel Content */\n  .me-agent-detail-content {\n    flex: 1;\n    overflow-y: auto;\n    overflow-x: hidden;\n  }\n\n  /* Detail Panel Loading State */\n  .me-agent-detail-loading {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 20px;\n    min-height: 400px;\n    width: 100%;\n  }\n\n  .me-agent-spinner {\n    width: 48px;\n    height: 48px;\n    border: 4px solid #f3f4f6;\n    border-top-color: #0f0f0f;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n  }\n\n  @keyframes spin {\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  .me-agent-cancel-loading-btn {\n    padding: 10px 20px;\n    background: #f3f4f6;\n    border: 1px solid #e5e7eb;\n    border-radius: 8px;\n    color: #374151;\n    font-size: 14px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.2s ease;\n  }\n\n  .me-agent-cancel-loading-btn:hover {\n    background: #e5e7eb;\n    border-color: #d1d5db;\n  }\n\n  .me-agent-cancel-loading-btn:active {\n    transform: scale(0.98);\n  }\n\n  .me-agent-offers-header {\n    padding: 20px;\n    background: white;\n    color: #0f0f0f;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    min-height: 76px;\n  }\n\n  .me-agent-offers-title {\n    font-size: 18px;\n    font-weight: 600;\n    margin: 0;\n    flex: 1;\n  }\n\n  .me-agent-offers-back,\n  .me-agent-offers-close {\n    background: none;\n    border: none;\n    color: #0f0f0f;\n    cursor: pointer;\n    padding: 8px;\n    border-radius: 4px;\n    transition: background 0.2s ease;\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    font-size: 14px;\n    font-weight: 500;\n  }\n\n  .me-agent-offers-back {\n    margin-right: auto;\n  }\n\n  .me-agent-offers-back svg,\n  .me-agent-offers-close svg {\n    display: inline-block;\n    vertical-align: middle;\n  }\n\n  .me-agent-offers-close {\n    font-size: 24px;\n    width: 32px;\n    height: 32px;\n    justify-content: center;\n  }\n\n  .me-agent-offers-back:hover,\n  .me-agent-offers-close:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n\n  /* Offers Grid */\n  .me-agent-offers-grid {\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    gap: 16px;\n    align-content: start;\n  }\n\n  /* Brands List */\n  .me-agent-brands-list {\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n  }\n\n  .me-agent-brand-card {\n    display: flex;\n    align-items: center;\n    gap: 16px;\n    padding: 16px 20px;\n    background: #FAFAFA;\n    border: 1px solid #F5F5F5;\n    border-radius: 16px;\n    transition: all 0.2s ease;\n  }\n\n  .me-agent-brand-card:hover {\n  }\n\n  .me-agent-brand-logo-container {\n    flex-shrink: 0;\n    width: 64px;\n    height: 64px;\n    border-radius: 12px;\n    overflow: hidden;\n    background: #000000;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .me-agent-brand-logo {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n\n  .me-agent-brand-info {\n    flex: 1;\n    min-width: 0;\n  }\n\n  .me-agent-brand-name {\n    font-family: 'Clash Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    font-size: 24px;\n    font-weight: 600;\n    color: #000000;\n    margin: 0 0 2px 0;\n  }\n\n  .me-agent-brand-conversion {\n    font-size: 14px;\n    color: #6B7280;\n    margin: 0;\n  }\n\n  .me-agent-brand-actions {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n    gap: 8px;\n  }\n\n  .me-agent-brand-reward-amount {\n    font-family: 'Clash Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    font-size: 24px;\n    font-weight: 600;\n    color: #000000;\n    text-align: right;\n  }\n\n  .me-agent-brand-reward-symbol {\n    font-size: 12px;\n    color: #000000;\n    font-weight: 500;\n  }\n\n  .me-agent-brand-signup-button {\n    flex-shrink: 0;\n    padding: 8px 12px;\n    background: transparent;\n    color: #000000;\n    border: 1px solid #E6E6E6;\n    border-radius: 8px;\n    font-size: 12px;\n    font-weight: 400;\n    cursor: pointer;\n    text-decoration: none;\n    display: inline-flex;\n    align-items: center;\n    gap: 8px;\n    transition: all 0.2s ease;\n  }\n\n  .me-agent-brand-signup-button:hover {\n    background: #F9FAFB;\n    border-color: #D1D5DB;\n  }\n\n  .me-agent-brand-signup-button svg {\n    flex-shrink: 0;\n  }\n\n  /* Category Grid Styles */\n  .me-agent-categories-grid {\n    overflow-y: auto;\n    padding: 20px;\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    gap: 16px;\n  }\n\n  .me-agent-category-card {\n    background: white;\n    border-radius: 12px;\n    overflow: hidden;\n    cursor: pointer;\n    transition: transform 0.2s ease, box-shadow 0.2s ease;\n    border: 1px solid #F5F5F5;\n    height: 162px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    padding: 16px;\n  }\n\n  .me-agent-category-card:hover {\n    transform: scale(1.02);\n  }\n\n  .me-agent-category-image-container {\n    position: relative;\n    width: 100%;\n    padding-top: 100%;\n    overflow: hidden;\n  }\n\n  .me-agent-category-image {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n\n  .me-agent-category-icon-overlay {\n    width: 24px;\n    height: 24px;\n    background: black;\n    border-radius: 4px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .me-agent-category-info {\n    // padding: 16px;\n  }\n\n  .me-agent-category-title {\n    font-family: 'Clash Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    font-size: 18px;\n    font-weight: 600;\n    color: #000000;\n    margin: 0 0 8px 0;\n    line-height: 1.3;\n  }\n\n  .me-agent-category-brand-count {\n    font-size: 14px;\n    color: #6B7280;\n    margin: 0;\n  }\n\n  /* Brand Offers List Styles */\n  .me-agent-brands-offers-list {\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n    display: flex;\n    flex-direction: column;\n    gap: 24px;\n  }\n\n  .me-agent-brand-offers-section {\n    background: white;\n  }\n\n  .me-agent-brand-offers-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 16px;\n  }\n\n  .me-agent-brand-offers-info {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    flex: 1;\n    min-width: 0;\n  }\n\n  .me-agent-brand-offers-logo {\n    width: 44px;\n    height: 44px;\n    border-radius: 50%;\n    object-fit: cover;\n    flex-shrink: 0;\n    background: #F9FAFB;\n  }\n\n  .me-agent-brand-offers-name {\n    font-family: 'Clash Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    font-size: 24px;\n    font-weight: 600;\n    color: #000000;\n    margin: 0;\n  }\n\n  .me-agent-brand-earning-amount {\n    font-size: 12px;\n    font-weight: 500;\n    color: #ffffff;\n    text-align: right;\n    flex-shrink: 0;\n    padding: 8px 16px;\n    background: #000000;\n    border-radius: 100px;\n  }\n\n  .me-agent-brand-offers-scroll {\n    display: flex;\n    gap: 16px;\n    overflow-x: auto;\n    overflow-y: hidden;\n    padding: 4px 0;\n    -webkit-overflow-scrolling: touch;\n    scrollbar-width: thin;\n    scrollbar-color: #E5E7EB #F9FAFB;\n  }\n\n  .me-agent-brand-offers-scroll::-webkit-scrollbar {\n    height: 6px;\n  }\n\n  .me-agent-brand-offers-scroll::-webkit-scrollbar-track {\n    background: #F9FAFB;\n    border-radius: 3px;\n  }\n\n  .me-agent-brand-offers-scroll::-webkit-scrollbar-thumb {\n    background: #E5E7EB;\n    border-radius: 3px;\n  }\n\n  .me-agent-brand-offers-scroll::-webkit-scrollbar-thumb:hover {\n    background: #D1D5DB;\n  }\n\n  .me-agent-brand-offer-card {\n    min-width: 150px;\n    max-width: 150px;\n    background: #FAFAFA;\n    border: 1px solid #F5F5F5;\n    border-radius: 12px;\n    overflow: hidden;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    flex-shrink: 0;\n  }\n\n  .me-agent-brand-offer-card:hover {\n    transform: scale(1.02);\n  }\n\n  .me-agent-brand-offer-image-container {\n    position: relative;\n    width: 100%;\n    padding-top: 100%;\n    overflow: hidden;\n    background: white;\n  }\n\n  .me-agent-brand-offer-image {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n\n  .me-agent-brand-offer-badge {\n    position: absolute;\n    top: 8px;\n    right: 8px;\n    background: #000000;\n    color: white;\n    padding: 4px 8px;\n    border-radius: 4px;\n    font-size: 12px;\n    font-weight: 600;\n  }\n\n  .me-agent-brand-offer-info {\n    padding: 12px;\n  }\n\n  .me-agent-brand-offer-name {\n    font-size: 14px;\n    font-weight: 500;\n    color: #000000;\n    margin: 0 0 4px 0;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n\n  .me-agent-brand-offer-pricing {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n\n  .me-agent-brand-offer-price {\n    font-size: 16px;\n    font-weight: 600;\n    color: #000000;\n  }\n\n  .me-agent-brand-offer-original-price {\n    font-size: 14px;\n    color: #9CA3AF;\n    text-decoration: line-through;\n  }\n\n  .me-agent-empty-state {\n    text-align: center;\n    padding: 40px 20px;\n    color: #6B7280;\n    font-size: 16px;\n  }\n\n  /* Note: Offer cards now use .me-agent-brand-offer-card for consistency */\n  \n  /* Override brand offer card width when in grid layout */\n  .me-agent-offers-grid .me-agent-brand-offer-card {\n    min-width: unset;\n    max-width: unset;\n    width: 100%;\n  }\n\n  /* Offers Loading */\n  .me-agent-offers-loading {\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  /* Offer Detail */\n  .me-agent-offer-detail {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    background: white;\n    height: 100%;\n    overflow: hidden;\n  }\n\n  .me-agent-offer-detail-scroll {\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n    min-height: 0;\n  }\n\n  /* Image Carousel */\n  .me-agent-image-carousel {\n    display: flex;\n    gap: 12px;\n    margin-bottom: 24px;\n    overflow-x: auto;\n  }\n\n  .me-agent-carousel-image {\n    flex-shrink: 0;\n    width: 280px;\n    height: 280px;\n    background-size: cover;\n    background-position: center;\n    background-color: #f3f4f6;\n    border-radius: 12px;\n  }\n\n  .me-agent-carousel-image.active {\n    border: 2px solid #0f0f0f;\n  }\n\n  /* Product Info */\n  .me-agent-detail-info {\n    margin-bottom: 24px;\n  }\n\n  .me-agent-detail-title {\n    font-size: 18px;\n    font-weight: 600;\n    color: #0f0f0f;\n    margin: 0 0 12px 0;\n  }\n\n  .me-agent-detail-pricing {\n    display: flex;\n    gap: 8px;\n    align-items: baseline;\n    margin-bottom: 12px;\n  }\n\n  .me-agent-detail-price {\n    font-size: 20px;\n    font-weight: 700;\n    color: #0f0f0f;\n  }\n\n  .me-agent-detail-original-price {\n    font-size: 18px;\n    color: #9ca3af;\n    text-decoration: line-through;\n  }\n\n  .me-agent-detail-badge {\n    display: inline-flex;\n    align-items: center;\n    gap: 6px;\n    padding: 8px 12px;\n    background: #000000;\n    color: white;\n    border-radius: 20px;\n    font-size: 13px;\n    font-weight: 500;\n    margin-bottom: 16px;\n  }\n\n  .me-agent-detail-shipping {\n    font-size: 14px;\n    color: #6b7280;\n    margin: 0 0 20px 0;\n  }\n\n  /* Section Label */\n  .me-agent-section-label {\n    font-size: 14px;\n    font-weight: 600;\n    color: #0f0f0f;\n    display: block;\n    margin-bottom: 12px;\n  }\n\n  /* Variant Section */\n  .me-agent-variant-section {\n    margin-bottom: 20px;\n  }\n\n  .me-agent-variant-grid {\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    gap: 12px;\n  }\n\n  .me-agent-variant-card {\n    background: none;\n    border: 2px solid #e5e7eb;\n    border-radius: 12px;\n    cursor: pointer;\n    padding: 0;\n    overflow: hidden;\n    transition: all 0.2s ease;\n  }\n\n  .me-agent-variant-card:hover:not(.disabled) {\n    border-color: #0f0f0f;\n  }\n\n  .me-agent-variant-card.active {\n    border-color: #0f0f0f;\n    box-shadow: 0 0 0 1px #0f0f0f;\n  }\n\n  .me-agent-variant-card.disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  .me-agent-variant-image {\n    position: relative;\n    width: 100%;\n    padding-top: 100%;\n    background-size: cover;\n    background-position: center;\n    background-color: #f3f4f6;\n  }\n\n  .me-agent-variant-discount {\n    position: absolute;\n    bottom: 8px;\n    left: 8px;\n    right: 8px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 4px;\n    padding: 4px 8px;\n    background: #000000;\n    color: white;\n    border-radius: 12px;\n    font-size: 11px;\n    font-weight: 500;\n  }\n\n  /* Quantity Section */\n  .me-agent-quantity-section {\n    margin-bottom: 20px;\n  }\n\n  .me-agent-quantity-selector {\n    display: flex;\n    align-items: center;\n    gap: 16px;\n    max-width: 200px;\n  }\n\n  .me-agent-quantity-btn {\n    width: 40px;\n    height: 40px;\n    border: 1px solid #e5e7eb;\n    background: white;\n    border-radius: 8px;\n    cursor: pointer;\n    font-size: 20px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: all 0.2s ease;\n  }\n\n  .me-agent-quantity-btn:hover {\n    background: #f9fafb;\n    border-color: #d1d5db;\n  }\n\n  .me-agent-quantity-input {\n    flex: 1;\n    height: 40px;\n    border: 1px solid #e5e7eb;\n    border-radius: 8px;\n    text-align: center;\n    font-size: 16px;\n    font-weight: 500;\n  }\n\n  .me-agent-quantity-input:focus {\n    outline: none;\n    border-color: #0f0f0f;\n  }\n\n  /* Tabs */\n  .me-agent-tabs {\n    display: flex;\n    gap: 8px;\n    margin-bottom: 20px;\n    border-bottom: 1px solid #e5e7eb;\n  }\n\n  .me-agent-tab {\n    padding: 12px 24px;\n    background: none;\n    border: none;\n    border-bottom: 2px solid transparent;\n    cursor: pointer;\n    font-size: 14px;\n    font-weight: 500;\n    color: #6b7280;\n    transition: all 0.2s ease;\n  }\n\n  .me-agent-tab.active {\n    color: #0f0f0f;\n    border-bottom-color: #0f0f0f;\n  }\n\n  .me-agent-tab-content {\n    min-height: 200px;\n  }\n\n  .me-agent-tab-pane {\n    display: none;\n  }\n\n  .me-agent-tab-pane.active {\n    display: block;\n  }\n\n  .me-agent-description-text {\n    font-size: 14px;\n    color: #4b5563;\n    line-height: 1.6;\n    margin: 0;\n  }\n\n  /* Reviews */\n  .me-agent-reviews {\n    display: flex;\n    flex-direction: column;\n    gap: 24px;\n  }\n\n  .me-agent-reviews-summary {\n    display: flex;\n    gap: 32px;\n    align-items: flex-start;\n  }\n\n  .me-agent-reviews-bars {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n  }\n\n  .me-agent-rating-row {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n  }\n\n  .me-agent-stars-small {\n    display: flex;\n    gap: 2px;\n    color: #d1d5db;\n  }\n\n  .me-agent-stars-small span.filled {\n    color: #f59e0b;\n  }\n\n  .me-agent-rating-bar {\n    flex: 1;\n    height: 6px;\n    background: #e5e7eb;\n    border-radius: 3px;\n    overflow: hidden;\n  }\n\n  .me-agent-rating-fill {\n    height: 100%;\n    background: #f59e0b;\n  }\n\n  .me-agent-rating-count {\n    font-size: 14px;\n    color: #6b7280;\n    min-width: 30px;\n    text-align: right;\n  }\n\n  .me-agent-reviews-score {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 8px;\n  }\n\n  .me-agent-score-number {\n    font-size: 48px;\n    font-weight: 700;\n    color: #0f0f0f;\n    line-height: 1;\n  }\n\n  .me-agent-score-number span {\n    font-size: 24px;\n    color: #9ca3af;\n  }\n\n  .me-agent-stars-large {\n    display: flex;\n    gap: 4px;\n    font-size: 20px;\n    color: #d1d5db;\n  }\n\n  .me-agent-stars-large span.filled {\n    color: #f59e0b;\n  }\n\n  .me-agent-review-count {\n    font-size: 14px;\n    color: #6b7280;\n  }\n\n  .me-agent-reviews-list {\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n  }\n\n  .me-agent-review-item {\n    padding: 16px;\n    border: 1px solid #e5e7eb;\n    border-radius: 12px;\n  }\n\n  .me-agent-review-header {\n    display: flex;\n    gap: 12px;\n    align-items: center;\n    margin-bottom: 12px;\n  }\n\n  .me-agent-reviewer-avatar {\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  }\n\n  .me-agent-reviewer-name {\n    font-size: 14px;\n    font-weight: 600;\n    color: #0f0f0f;\n    margin-bottom: 4px;\n  }\n\n  .me-agent-review-stars {\n    display: flex;\n    gap: 2px;\n    font-size: 14px;\n    color: #d1d5db;\n  }\n\n  .me-agent-review-stars span.filled {\n    color: #f59e0b;\n  }\n\n  .me-agent-review-text {\n    font-size: 14px;\n    color: #4b5563;\n    line-height: 1.6;\n    margin: 0;\n  }\n\n  /* Redemption Info */\n  .me-agent-redemption-info {\n    margin-top: 24px;\n    padding: 16px;\n    background: #f9fafb;\n    border-radius: 12px;\n    font-size: 14px;\n    color: #4b5563;\n    line-height: 1.6;\n  }\n\n  .me-agent-redemption-info p {\n    margin: 0;\n  }\n\n  /* Bottom Actions */\n  .me-agent-detail-actions {\n    position: sticky;\n    bottom: 0;\n    background: white;\n    padding: 16px 20px;\n    border-top: 1px solid #e5e7eb;\n    display: flex;\n    gap: 12px;\n    align-items: center;\n  }\n\n  .me-agent-redeem-button {\n    flex: 1;\n    padding: 14px 24px;\n    background: #000000;\n    color: white;\n    border: none;\n    border-radius: 8px;\n    font-size: 16px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: all 0.2s ease;\n  }\n\n  .me-agent-redeem-button:hover {\n    background: #1f1f1f;\n  }\n\n  .me-agent-secondary-actions {\n    display: flex;\n    gap: 8px;\n    align-items: center;\n  }\n\n  .me-agent-action-button {\n    padding: 14px 20px;\n    background: white;\n    color: #0f0f0f;\n    border: 1px solid #e5e7eb;\n    border-radius: 8px;\n    font-size: 14px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    white-space: nowrap;\n  }\n\n  .me-agent-action-button:hover {\n    background: #f9fafb;\n    border-color: #d1d5db;\n  }\n\n  .me-agent-action-icon {\n    width: 48px;\n    height: 48px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: white;\n    border: 1px solid #e5e7eb;\n    border-radius: 8px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    color: #0f0f0f;\n  }\n\n  .me-agent-action-icon:hover {\n    background: #f9fafb;\n    border-color: #d1d5db;\n  }\n\n  .me-agent-action-icon.liked {\n    color: #ef4444;\n  }\n\n  .me-agent-offer-detail-header {\n    display: flex;\n    gap: 12px;\n    align-items: center;\n    margin-bottom: 20px;\n  }\n\n  .me-agent-offer-brand-logo {\n    width: 60px;\n    height: 60px;\n    border-radius: 8px;\n    object-fit: cover;\n    border: 1px solid #e5e7eb;\n  }\n\n  .me-agent-offer-detail-name {\n    font-size: 20px;\n    font-weight: 600;\n    color: #1f2937;\n    margin: 0 0 4px 0;\n  }\n\n  .me-agent-offer-detail-brand {\n    font-size: 14px;\n    color: #6b7280;\n    margin: 0;\n  }\n\n  .me-agent-offer-detail-pricing {\n    background: #f9fafb;\n    padding: 16px;\n    border-radius: 8px;\n    margin-bottom: 20px;\n  }\n\n  .me-agent-offer-detail-discount {\n    display: inline-block;\n    background: #dcfce7;\n    color: #166534;\n    padding: 6px 12px;\n    border-radius: 6px;\n    font-size: 14px;\n    font-weight: 600;\n    margin-bottom: 12px;\n  }\n\n  .me-agent-offer-detail-price {\n    display: flex;\n    gap: 12px;\n    align-items: baseline;\n  }\n\n  .me-agent-offer-detail-original {\n    font-size: 18px;\n    color: #9ca3af;\n    text-decoration: line-through;\n  }\n\n  .me-agent-offer-detail-final {\n    font-size: 28px;\n    color: #1f2937;\n    font-weight: 700;\n  }\n\n  .me-agent-offer-detail-description h4 {\n    font-size: 16px;\n    font-weight: 600;\n    color: #1f2937;\n    margin: 0 0 8px 0;\n  }\n\n  .me-agent-offer-detail-description p {\n    font-size: 14px;\n    color: #4b5563;\n    line-height: 1.6;\n    margin: 0 0 20px 0;\n  }\n\n  .me-agent-offer-detail-code {\n    background: #fef3c7;\n    padding: 12px;\n    border-radius: 8px;\n    margin-bottom: 20px;\n    font-size: 14px;\n    color: #92400e;\n  }\n\n  .me-agent-offer-detail-code strong {\n    font-weight: 600;\n  }\n\n  .me-agent-offer-claim-button {\n    width: 100%;\n    padding: 14px;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    border: none;\n    border-radius: 8px;\n    font-size: 16px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: transform 0.2s ease;\n  }\n\n  .me-agent-offer-claim-button:hover {\n    transform: scale(1.02);\n  }\n\n  /* OTP Container */\n  .me-agent-otp-container {\n    padding: 32px 24px;\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n  }\n\n  .me-agent-otp-description {\n    font-size: 14px;\n    color: #6b7280;\n    line-height: 1.6;\n    margin: 0;\n  }\n\n  .me-agent-otp-form {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n  }\n\n  .me-agent-otp-email-input {\n    width: 100%;\n    padding: 12px 16px;\n    border: 1px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 14px;\n    outline: none;\n    transition: border-color 0.2s ease;\n  }\n\n  .me-agent-otp-email-input:focus {\n    border-color: #667eea;\n  }\n\n  .me-agent-otp-send-button {\n    width: 100%;\n    padding: 12px;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    border: none;\n    border-radius: 8px;\n    font-size: 14px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: transform 0.2s ease;\n  }\n\n  .me-agent-otp-send-button:hover:not(:disabled) {\n    transform: scale(1.02);\n  }\n\n  .me-agent-otp-send-button:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n\n  .me-agent-otp-status {\n    padding: 12px;\n    border-radius: 8px;\n    font-size: 14px;\n    line-height: 1.5;\n  }\n\n  .me-agent-otp-status-success {\n    background: #dcfce7;\n    color: #166534;\n    border: 1px solid #86efac;\n  }\n\n  .me-agent-otp-status-error {\n    background: #fee2e2;\n    color: #991b1b;\n    border: 1px solid #fca5a5;\n  }\n\n  /* Variants Selector (Horizontal) */\n  .me-agent-variants-selector {\n    margin: 12px 0;\n    padding: 12px 0;\n    border-top: 1px solid #e5e7eb;\n    border-bottom: 1px solid #e5e7eb;\n  }\n\n  .me-agent-variants-list-horizontal {\n    display: flex;\n    gap: 8px;\n    overflow-x: auto;\n    padding: 4px 0;\n    scrollbar-width: thin;\n    scrollbar-color: #d1d5db #f3f4f6;\n  }\n\n  .me-agent-variants-list-horizontal::-webkit-scrollbar {\n    height: 6px;\n  }\n\n  .me-agent-variants-list-horizontal::-webkit-scrollbar-track {\n    background: #f3f4f6;\n    border-radius: 3px;\n  }\n\n  .me-agent-variants-list-horizontal::-webkit-scrollbar-thumb {\n    background: #d1d5db;\n    border-radius: 3px;\n  }\n\n  .me-agent-variants-list-horizontal::-webkit-scrollbar-thumb:hover {\n    background: #9ca3af;\n  }\n\n  .me-agent-variant-chip {\n    display: inline-flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 2px;\n    padding: 10px 16px;\n    background: white;\n    border: 2px solid #e5e7eb;\n    border-radius: 8px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    white-space: nowrap;\n    flex-shrink: 0;\n    font-size: 13px;\n  }\n\n  .me-agent-variant-chip:hover:not(:disabled) {\n    border-color: #667eea;\n    background: #f9fafb;\n  }\n\n  .me-agent-variant-chip.active {\n    border-color: #667eea;\n    background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);\n    box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);\n  }\n\n  .me-agent-variant-chip.out-of-stock {\n    opacity: 0.5;\n    cursor: not-allowed;\n    background: #f3f4f6;\n  }\n\n  .me-agent-variant-chip:disabled {\n    cursor: not-allowed;\n  }\n\n  .me-agent-variant-chip-name {\n    font-weight: 600;\n    color: #1f2937;\n  }\n\n  .me-agent-variant-chip.active .me-agent-variant-chip-name {\n    color: #667eea;\n  }\n\n  .me-agent-variant-chip-options {\n    font-size: 11px;\n    color: #6b7280;\n  }\n\n  .me-agent-variant-chip-stock {\n    font-size: 10px;\n    color: #dc2626;\n    font-weight: 500;\n  }\n\n  /* Rewards Container */\n  .me-agent-rewards-container {\n    padding: 24px;\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n  }\n\n  .me-agent-rewards-description {\n    font-size: 14px;\n    color: #6b7280;\n    margin: 0;\n  }\n\n  .me-agent-rewards-list {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n  }\n\n  .me-agent-reward-item {\n    display: flex;\n    align-items: center;\n    gap: 16px;\n    padding: 16px;\n    background: white;\n    border: 1px solid #e5e7eb;\n    border-radius: 12px;\n    transition: all 0.2s ease;\n  }\n\n  .me-agent-reward-item:hover {\n    border-color: #667eea;\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);\n  }\n\n  .me-agent-reward-image {\n    width: 60px;\n    height: 60px;\n    border-radius: 12px;\n    background-size: cover;\n    background-position: center;\n    background-color: #f3f4f6;\n    flex-shrink: 0;\n  }\n\n  .me-agent-reward-info {\n    flex: 1;\n  }\n\n  .me-agent-reward-name {\n    font-size: 16px;\n    font-weight: 600;\n    color: #1f2937;\n    margin: 0 0 4px 0;\n  }\n\n  .me-agent-reward-symbol {\n    font-size: 12px;\n    color: #6b7280;\n    margin: 0 0 6px 0;\n  }\n\n  .me-agent-reward-balance {\n    font-size: 14px;\n    color: #374151;\n    font-weight: 500;\n    margin: 0;\n  }\n\n  .me-agent-reward-select-button {\n    padding: 10px 20px;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    border: none;\n    border-radius: 8px;\n    font-size: 14px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: transform 0.2s ease;\n    flex-shrink: 0;\n  }\n\n  .me-agent-reward-select-button:hover {\n    transform: scale(1.05);\n  }\n\n  /* Error Container */\n  .me-agent-error-container {\n    padding: 48px 32px;\n    text-align: center;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 16px;\n  }\n\n  .me-agent-error-icon {\n    font-size: 64px;\n    margin-bottom: 8px;\n  }\n\n  .me-agent-error-container h3 {\n    font-size: 20px;\n    font-weight: 600;\n    color: #1f2937;\n    margin: 0 0 8px 0;\n  }\n\n  .me-agent-error-container p {\n    font-size: 14px;\n    color: #6b7280;\n    line-height: 1.6;\n    margin: 0;\n    max-width: 400px;\n  }\n\n  .me-agent-error-container strong {\n    color: #1f2937;\n    font-weight: 600;\n  }\n\n  .me-agent-error-back-button {\n    margin-top: 16px;\n    padding: 12px 24px;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    border: none;\n    border-radius: 8px;\n    font-size: 14px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: transform 0.2s ease;\n  }\n\n  .me-agent-error-back-button:hover {\n    transform: scale(1.05);\n  }\n\n  /* Onboarding Container */\n  .me-agent-onboarding-container {\n    padding: 40px 24px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n    gap: 20px;\n  }\n\n  .me-agent-onboarding-spinner {\n    width: 60px;\n    height: 60px;\n    border: 4px solid #e5e7eb;\n    border-top-color: #667eea;\n    border-radius: 50%;\n    animation: me-agent-spin 1s linear infinite;\n  }\n\n  @keyframes me-agent-spin {\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  .me-agent-onboarding-title {\n    font-size: 20px;\n    font-weight: 700;\n    color: #1f2937;\n    margin: 0;\n  }\n\n  .me-agent-onboarding-description {\n    font-size: 14px;\n    color: #6b7280;\n    line-height: 1.5;\n    max-width: 400px;\n    margin: 0;\n  }\n\n  .me-agent-onboarding-status {\n    font-size: 13px;\n    color: #667eea;\n    font-weight: 500;\n    padding: 8px 16px;\n    background: rgba(102, 126, 234, 0.1);\n    border-radius: 20px;\n  }\n\n  /* Confirmation Container */\n  .me-agent-confirm-container {\n    padding: 24px;\n    display: flex;\n    flex-direction: column;\n    gap: 24px;\n  }\n\n  .me-agent-confirm-summary {\n    background: #f9fafb;\n    padding: 24px;\n    border-radius: 12px;\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n  }\n\n  .me-agent-confirm-summary h3 {\n    font-size: 18px;\n    font-weight: 600;\n    color: #1f2937;\n    margin: 0 0 8px 0;\n    padding-bottom: 16px;\n    border-bottom: 1px solid #e5e7eb;\n  }\n\n  .me-agent-confirm-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 14px;\n  }\n\n  .me-agent-confirm-item span {\n    color: #6b7280;\n  }\n\n  .me-agent-confirm-item strong {\n    color: #1f2937;\n    font-weight: 600;\n  }\n\n  .me-agent-confirm-savings {\n    color: #16a34a !important;\n    font-size: 18px !important;\n  }\n\n  .me-agent-confirm-button {\n    width: 100%;\n    padding: 14px;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    border: none;\n    border-radius: 8px;\n    font-size: 16px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: transform 0.2s ease;\n  }\n\n  .me-agent-confirm-button:hover {\n    transform: scale(1.02);\n  }\n\n  /* Tablet Responsive */\n  @media (max-width: 1024px) {\n    .me-agent-offers-grid {\n      grid-template-columns: repeat(3, 1fr);\n      gap: 16px;\n    }\n  }\n\n  /* Mobile Responsive */\n  @media (max-width: 768px) {\n    .me-agent-offers-grid {\n      grid-template-columns: repeat(2, 1fr);\n      gap: 12px;\n    }\n  }\n\n  @media (max-width: 480px) {\n    .me-agent-chat {\n      width: calc(100vw - 32px) !important;\n      height: calc(100vh - 40px) !important;\n      bottom: 20px !important;\n    }\n\n    .me-agent-button {\n      bottom: 16px;\n    }\n\n    .me-agent-chat.bottom-right,\n    .me-agent-chat.bottom-left {\n      left: 16px !important;\n      right: 16px !important;\n    }\n\n    .me-agent-chat.maximized {\n      width: 100vw !important;\n      height: 100vh !important;\n      top: 0 !important;\n      bottom: 0 !important;\n      left: 0 !important;\n      right: 0 !important;\n      border-radius: 0;\n    }\n\n    .me-agent-chat.maximized.has-detail-panel {\n      width: 100vw !important;\n    }\n\n    .me-agent-button.bottom-right {\n      right: 16px;\n    }\n\n    .me-agent-button.bottom-left {\n      left: 16px;\n    }\n\n    /* Mobile Detail Panel - Full overlay */\n    .me-agent-chat.has-detail-panel .me-agent-detail-panel-wrapper {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      width: 100%;\n      z-index: 10;\n      border-left: none;\n    }\n\n    .me-agent-offers-grid {\n      padding: 12px;\n    }\n\n    .me-agent-card-list-content {\n      flex-direction: column;\n      align-items: flex-start;\n    }\n  }\n`;\n\n/**\n * Inject styles into the document\n */\nexport function injectStyles(): void {\n  const styleId = \"me-agent-sdk-styles\";\n\n  // Check if styles already exist\n  if (document.getElementById(styleId)) {\n    return;\n  }\n\n  const styleElement = document.createElement(\"style\");\n  styleElement.id = styleId;\n  styleElement.textContent = styles;\n  document.head.appendChild(styleElement);\n}\n","/**\n * Environment types\n */\nexport enum Environment {\n  DEV = 'dev',\n  STAGING = 'staging',\n  PROD = 'prod',\n}\n\n/**\n * Supported Networks\n */\nexport enum SupportedNetwork {\n  SEPOLIA = 'sepolia',\n  HEDERA = 'hedera',\n  BASE = 'base',\n  POLYGON = 'polygon',\n}\n\n/**\n * Network-specific configurations\n */\ninterface NetworkConfig {\n  CHAIN_ID: string;\n  RPC_URL: string;\n  OPEN_REWARD_DIAMOND: string;\n}\n\n/**\n * Environment-specific base configurations\n */\ninterface EnvironmentConfig {\n  API_URL: string;\n  AGENT_BASE_URL: string;\n  ME_API_KEY: string;\n  API_V1_URL: string;\n  RUNTIME_URL: string;\n  GELATO_API_KEY: string;\n  MAGIC_PUBLISHABLE_API_KEY: string;\n}\n\n// Development environment\nconst DEV_CONFIG: EnvironmentConfig = {\n  API_URL: 'https://paas.meappbounty.com/v1/api/',\n  AGENT_BASE_URL: 'https://fastapi-proxy-580283507238.us-central1.run.app',\n  ME_API_KEY: 'hl3elmtvji75or71j4xy5e',\n  API_V1_URL: 'https://api.meappbounty.com/',\n  MAGIC_PUBLISHABLE_API_KEY: 'pk_live_FB79F672A43B8AC2',\n  RUNTIME_URL: 'https://runtime.meappbounty.com',\n  GELATO_API_KEY: 'g1UFyiAfIyq_m_M3Cn3LWIO6VQpjVTIbeCV7XLzWGb4_',\n};\n\n// Staging environment\nconst STAGING_CONFIG: EnvironmentConfig = {\n  API_URL: 'https://paas-staging.meappbounty.com/v1/api/',\n  AGENT_BASE_URL: 'https://fastapi-proxy-staging-580283507238.us-central1.run.app',\n  ME_API_KEY: 'staging_key',\n  API_V1_URL: 'https://api-staging.meappbounty.com/',\n  MAGIC_PUBLISHABLE_API_KEY: 'pk_live_STAGING_KEY',\n  RUNTIME_URL: 'https://runtime-staging.meappbounty.com',\n  GELATO_API_KEY: 'staging_gelato_key',\n};\n\n// Production environment\nconst PROD_CONFIG: EnvironmentConfig = {\n  API_URL: 'https://paas.meappbounty.com/v1/api/',\n  AGENT_BASE_URL: 'https://fastapi-proxy.meappbounty.com',\n  ME_API_KEY: 'prod_key',\n  API_V1_URL: 'https://api.meappbounty.com/',\n  MAGIC_PUBLISHABLE_API_KEY: 'pk_live_PROD_KEY',\n  RUNTIME_URL: 'https://runtime.meappbounty.com',\n  GELATO_API_KEY: 'prod_gelato_key',\n};\n\nconst ENV_CONFIGS: Record<Environment, EnvironmentConfig> = {\n  [Environment.DEV]: DEV_CONFIG,\n  [Environment.STAGING]: STAGING_CONFIG,\n  [Environment.PROD]: PROD_CONFIG,\n};\n\nconst NETWORK_CONFIGS: Record<SupportedNetwork, NetworkConfig> = {\n  [SupportedNetwork.SEPOLIA]: {\n    CHAIN_ID: '11155111',\n    RPC_URL: 'https://eth-sepolia.g.alchemy.com/v2/Ytq0aV34dWOA9X6gWhl_6trwmUTb58Ip',\n    OPEN_REWARD_DIAMOND: '0xacd3379d449ad0042a12f4fa88bc183948f7f472',\n  },\n  [SupportedNetwork.HEDERA]: {\n    CHAIN_ID: '296',\n    RPC_URL: 'https://testnet.hashio.io/api',\n    OPEN_REWARD_DIAMOND: '0x3b03a7980bfe38c9daa4c346ccf495eb24e16782',\n  },\n  [SupportedNetwork.BASE]: {\n    CHAIN_ID: '11155111', // Using Sepolia for now\n    RPC_URL: 'https://eth-sepolia.g.alchemy.com/v2/Ytq0aV34dWOA9X6gWhl_6trwmUTb58Ip',\n    OPEN_REWARD_DIAMOND: '0xacd3379d449ad0042a12f4fa88bc183948f7f472',\n  },\n  [SupportedNetwork.POLYGON]: {\n    CHAIN_ID: '11155111', // Using Sepolia for now\n    RPC_URL: 'https://eth-sepolia.g.alchemy.com/v2/Ytq0aV34dWOA9X6gWhl_6trwmUTb58Ip',\n    OPEN_REWARD_DIAMOND: '0xacd3379d449ad0042a12f4fa88bc183948f7f472',\n  },\n};\n\n/**\n * Complete environment configuration\n */\nexport interface EnvConfig extends EnvironmentConfig, NetworkConfig {}\n\n/**\n * Get environment configuration based on environment and network\n */\nexport const getEnv = (\n  environment: Environment = Environment.DEV,\n  network: SupportedNetwork = SupportedNetwork.SEPOLIA\n): EnvConfig => {\n  const envConfig = ENV_CONFIGS[environment] || ENV_CONFIGS[Environment.DEV];\n  const networkConfig = NETWORK_CONFIGS[network] || NETWORK_CONFIGS[SupportedNetwork.SEPOLIA];\n\n  return {\n    ...envConfig,\n    ...networkConfig,\n  };\n};\n\n// Default environment (Dev + Sepolia)\nexport const Env = getEnv(Environment.DEV, SupportedNetwork.SEPOLIA);\n\n","import {\n  MeAgentConfig,\n  Message,\n  Offer,\n  Brand,\n  Category,\n  EnvConfig,\n} from \"./types\";\nimport { mergeCategoriesWithPresets } from \"./core/constants/categories\";\nimport { SessionService } from \"./services/session-service\";\nimport { MessageParser } from \"./services/message-parser\";\nimport { RedemptionService } from \"./services/redemption-service\";\nimport { APIClient } from \"./data/api/api-client\";\nimport { SessionAPI } from \"./data/api/session-api\";\nimport { ChatAPI } from \"./data/api/chat-api\";\nimport { AuthAPI } from \"./data/api/auth-api\";\nimport { RewardAPI } from \"./data/api/reward-api\";\nimport { FloatingButton } from \"./views/components/button\";\nimport { ChatPopup } from \"./views/components/chat\";\nimport { injectStyles } from \"./views/shared/styles\";\nimport { getEnv, SupportedNetwork, Environment } from \"./core/config/env\";\n\n/**\n * Main SDK Class\n */\nexport class MeAgentSDK {\n  private config: MeAgentConfig;\n  private env: EnvConfig;\n  private sessionService: SessionService;\n  private messageParser: MessageParser;\n  private redemptionService: RedemptionService | null = null;\n  private apiClient: APIClient;\n  private button: FloatingButton | null = null;\n  private chat: ChatPopup | null = null;\n  private initialized = false;\n  private isOpen: boolean = false;\n\n  constructor(config: MeAgentConfig) {\n    this.validateConfig(config);\n    this.config = {\n      position: \"bottom-right\",\n      environment: Environment.DEV,\n      network: SupportedNetwork.SEPOLIA,\n      ...config,\n    };\n\n    // Get environment configuration based on environment and network\n    this.env = getEnv(this.config.environment, this.config.network);\n\n    // Initialize API client\n    this.apiClient = new APIClient(this.config, this.env);\n\n    // Initialize services\n    const sessionAPI = new SessionAPI(this.config, this.env);\n    const chatAPI = new ChatAPI(this.config, this.env);\n    const authAPI = new AuthAPI(this.config, this.env);\n    const rewardAPI = new RewardAPI(this.config, this.env);\n\n    this.sessionService = new SessionService(sessionAPI, chatAPI);\n    this.messageParser = new MessageParser();\n\n    // Initialize RedemptionService with network-specific configuration\n    this.redemptionService = new RedemptionService(\n      authAPI,\n      rewardAPI,\n      {\n        apiKey: this.env.MAGIC_PUBLISHABLE_API_KEY,\n        chainId: this.env.CHAIN_ID,\n        rpcUrl: this.env.RPC_URL,\n      },\n      this.env.OPEN_REWARD_DIAMOND\n    );\n  }\n\n  /**\n   * Validate configuration\n   */\n  private validateConfig(config: MeAgentConfig): void {\n    // No required fields currently\n  }\n\n  /**\n   * Initialize the SDK\n   */\n  async init(): Promise<void> {\n    if (this.initialized) {\n      console.warn(\"MeAgent SDK: Already initialized\");\n      return;\n    }\n\n    try {\n      // Inject styles\n      injectStyles();\n\n      // Create session\n      const sessionId = await this.sessionService.getOrCreateSession();\n\n      // Initialize UI components\n      this.button = new FloatingButton(\n        this.config.position || \"bottom-right\",\n        () => this.toggleChat()\n      );\n\n      this.chat = new ChatPopup(\n        this.config.position || \"bottom-right\",\n        (message) => this.sendMessage(message),\n        () => this.toggleChat(),\n        this.apiClient,\n        sessionId,\n        this.config,\n        this.redemptionService || undefined\n      );\n\n      // Mount components\n      this.button.mount();\n      this.chat.mount();\n\n      // Show welcome message\n      this.chat.showWelcome();\n\n      this.initialized = true;\n    } catch (error) {\n      console.error(\"MeAgent SDK: Initialization failed\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Toggle chat open/closed\n   */\n  private toggleChat(): void {\n    this.isOpen = !this.isOpen;\n    if (this.isOpen) {\n      this.chat?.show();\n      this.button?.hide();\n    } else {\n      this.chat?.hide();\n      this.button?.show();\n    }\n  }\n\n  /**\n   * Send a message\n   */\n  private async sendMessage(content: string): Promise<void> {\n    const sessionId = this.sessionService.getSessionId();\n\n    if (!sessionId) {\n      console.error(\"MeAgent SDK: No active session\");\n      return;\n    }\n\n    // Add user message\n    const userMessage = this.sessionService.createMessage(\"user\", content);\n    this.sessionService.addMessage(userMessage);\n    this.chat?.addMessage(userMessage);\n\n    // Show loading\n    this.chat?.setLoading(true);\n    this.chat?.showLoading();\n\n    let assistantMessage = this.sessionService.createMessage(\"assistant\", \"\");\n    let isFirstChunk = true;\n    let parsedData = {\n      offers: [] as Offer[],\n      brands: [] as Brand[],\n      categories: [] as Category[],\n      showWaysToEarn: false,\n    };\n    let hasFinalMessage = false;\n\n    try {\n      await this.apiClient.sendMessage(\n        sessionId,\n        content,\n        (chunk: string, rawData?: any) => {\n          // Parse function calls and responses using MessageParser\n          if (rawData) {\n            const parsed = this.messageParser.parseMessageData(rawData);\n            if (parsed.offers.length > 0) {\n              parsedData.offers = parsed.offers;\n            }\n            if (parsed.brands.length > 0) {\n              parsedData.brands = parsed.brands;\n              console.log(\n                \"[SDK] Detected signup earning brands:\",\n                parsed.brands.length\n              );\n            }\n            if (parsed.categories.length > 0) {\n              parsedData.categories = parsed.categories;\n              console.log(\n                \"[SDK] Detected purchase categories:\",\n                parsed.categories.length\n              );\n            }\n            if (parsed.showWaysToEarn) {\n              parsedData.showWaysToEarn = true;\n              console.log(\"[SDK] Detected ways_to_earn function call\");\n            }\n          }\n\n          // Create message container on first data, even if empty text\n          if (isFirstChunk) {\n            this.chat?.removeLoading();\n            assistantMessage.content = chunk || \"\";\n            this.sessionService.addMessage(assistantMessage);\n            this.chat?.addMessage(assistantMessage);\n            isFirstChunk = false;\n          } else if (chunk) {\n            // Check if this is a partial/streaming chunk or final complete message\n            const isPartial = rawData?.partial === true;\n\n            if (isPartial) {\n              // Streaming chunk (delta) - append it for real-time display\n              assistantMessage.content += chunk;\n              this.sessionService.updateLastMessage(assistantMessage.content);\n              this.chat?.updateLastMessage(assistantMessage.content);\n            } else if (rawData?.content?.parts?.[0]?.text) {\n              // Final complete message\n              if (hasFinalMessage) {\n                // We already have a final message, so this is additional text\n                // after a function call - append it with spacing\n                assistantMessage.content += \"\\n\\n\" + chunk;\n              } else {\n                // First final message - replace to ensure accuracy\n                assistantMessage.content = chunk;\n                hasFinalMessage = true;\n              }\n              this.sessionService.updateLastMessage(assistantMessage.content);\n              this.chat?.updateLastMessage(assistantMessage.content);\n            }\n          }\n        },\n        () => {\n          // On complete\n          this.chat?.setLoading(false);\n          this.chat?.removeLoading();\n\n          // Show offer preview if offers were found\n          if (parsedData.offers.length > 0) {\n            this.chat?.showOfferPreview(parsedData.offers);\n          }\n\n          // Show brand preview if brands were found\n          if (parsedData.brands.length > 0) {\n            this.chat?.showBrandPreview(parsedData.brands);\n          }\n\n          // Show category preview if categories were found\n          if (parsedData.categories.length > 0) {\n            this.chat?.showCategoryPreview(parsedData.categories);\n          }\n\n          // Show ways to earn quick actions if function was called\n          if (parsedData.showWaysToEarn) {\n            console.log(\"[SDK] Showing ways to earn actions\");\n            this.chat?.showWaysToEarnActions();\n          }\n        },\n        (error: Error) => {\n          // On error\n          console.error(\"MeAgent SDK: Error sending message\", error);\n          this.chat?.setLoading(false);\n          this.chat?.removeLoading();\n\n          const errorMessage = this.sessionService.createMessage(\n            \"assistant\",\n            \"Sorry, something went wrong. Please try again.\"\n          );\n          this.sessionService.addMessage(errorMessage);\n          this.chat?.addMessage(errorMessage);\n        }\n      );\n    } catch (error) {\n      console.error(\"MeAgent SDK: Error in sendMessage\", error);\n      this.chat?.setLoading(false);\n    }\n  }\n\n  /**\n   * Destroy the SDK\n   */\n  destroy(): void {\n    this.button?.unmount();\n    this.chat?.unmount();\n    this.initialized = false;\n  }\n}\n","import { MeAgentSDK } from \"./sdk\";\nimport { MeAgentConfig, SupportedNetwork, Environment } from \"./types\";\n\n/**\n * Global MeAgent namespace\n */\nexport interface MeAgentGlobal {\n  init: (config: MeAgentConfig) => Promise<void>;\n  destroy: () => void;\n  Network: typeof SupportedNetwork;\n  Environment: typeof Environment;\n}\n\nlet sdkInstance: MeAgentSDK | null = null;\n\n/**\n * Initialize the MeAgent SDK\n */\nasync function init(config: MeAgentConfig): Promise<void> {\n  if (sdkInstance) {\n    console.warn(\n      \"MeAgent: Instance already exists. Destroying previous instance.\"\n    );\n    destroy();\n  }\n\n  sdkInstance = new MeAgentSDK(config);\n  await sdkInstance.init();\n}\n\n/**\n * Destroy the SDK instance\n */\nfunction destroy(): void {\n  if (sdkInstance) {\n    sdkInstance.destroy();\n    sdkInstance = null;\n  }\n}\n\n// Export for UMD build\nconst MeAgent: MeAgentGlobal = {\n  init,\n  destroy,\n  Network: SupportedNetwork,\n  Environment: Environment,\n};\n\n// For UMD build - attach to window\nif (typeof window !== \"undefined\") {\n  (window as any).MeAgent = MeAgent;\n}\n\nexport default MeAgent;\nexport { MeAgentConfig, SupportedNetwork, Environment } from \"./types\";\n"],"names":["Environment","SupportedNetwork"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","x_google_ignoreList":[0]}