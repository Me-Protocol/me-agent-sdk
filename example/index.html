<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MeAgent SDK Demo - Plain HTML</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="demo-container">
      <header class="demo-header">
        <h1>ğŸ¤– MeAgent SDK Demo</h1>
        <p>Plain HTML Integration Example</p>
      </header>

      <main class="demo-content">
        <section class="demo-section">
          <h2>Welcome!</h2>
          <p>
            This is a demo page showing how to integrate the MeAgent SDK into a
            plain HTML website. Look for the chat button in the bottom-right
            corner!
          </p>
        </section>

        <section class="demo-section">
          <h3>Features</h3>
          <ul>
            <li>âœ¨ Easy integration with a single script tag</li>
            <li>ğŸ’¬ AI-powered chat assistant</li>
            <li>ğŸ¨ Beautiful, modern UI</li>
            <li>ğŸ“± Fully responsive design</li>
            <li>âš¡ Real-time streaming responses</li>
            <li>ğŸ”’ Secure authentication</li>
          </ul>
        </section>

        <section class="demo-section">
          <h3>How to Use</h3>
          <ol>
            <li>Click the floating button in the bottom-right corner</li>
            <li>Try the quick action buttons or type your own message</li>
            <li>Watch the AI respond in real-time!</li>
          </ol>
        </section>

        <section class="demo-section code-section">
          <h3>Integration Code</h3>
          <pre><code>&lt;!-- Load SDK via CDN --&gt;
&lt;script src="../dist/me-agent-sdk.js"&gt;&lt;/script&gt;

&lt;!-- Initialize SDK --&gt;
&lt;script&gt;
  MeAgent.init({
    emailAddress: 'user@example.com',
    brandId: 'your-brand-id',
    userId: 'user-123',
    position: 'bottom-right',
    environment: MeAgent.Environment.DEV, // DEV, STAGING, or PROD
    network: MeAgent.Network.SEPOLIA // SEPOLIA, HEDERA, BASE, or POLYGON
  });
&lt;/script&gt;</code></pre>
        </section>

        <section class="demo-section">
          <h3>ğŸŒ Environments</h3>
          <p>The SDK supports multiple environments:</p>
          <ul>
            <li><strong>DEV</strong> - Development environment (default)</li>
            <li><strong>STAGING</strong> - Staging environment</li>
            <li><strong>PROD</strong> - Production environment</li>
          </ul>
          <p>
            Set the environment using:
            <code>environment: MeAgent.Environment.DEV</code>
          </p>
        </section>

        <section class="demo-section">
          <h3>ğŸŒ Supported Networks</h3>
          <p>The SDK supports multiple blockchain networks:</p>
          <ul>
            <li><strong>Sepolia</strong> - Ethereum testnet (default)</li>
            <li><strong>Hedera</strong> - Hedera testnet</li>
            <li><strong>Base</strong> - Base network</li>
            <li><strong>Polygon</strong> - Polygon network</li>
          </ul>
          <p>
            Set the network using: <code>network: MeAgent.Network.SEPOLIA</code>
          </p>
        </section>

        <section class="demo-section">
          <h3>ğŸ Redemption Features</h3>
          <p>
            The SDK includes offer redemption capabilities with Magic Link
            authentication:
          </p>
          <ul>
            <li>ğŸ” Email-based authentication with OTP</li>
            <li>ğŸ’° Reward balance viewing</li>
            <li>ğŸ¯ Offer redemption with rewards</li>
            <li>âœ… Affordability checking</li>
            <li>ğŸ“Š Transaction summaries</li>
          </ul>
          <p>
            <small
              >Configuration is network-specific and managed
              automatically.</small
            >
          </p>
        </section>
      </main>

      <footer class="demo-footer">
        <p>Â© 2025 MeAgent SDK</p>
      </footer>
    </div>

    <!-- Load the standalone SDK (Webpack bundle - includes all dependencies) -->
    <script src="../dist/me-agent-sdk.min.js"></script>

    <!-- Initialize the SDK -->
    <script>
      window.addEventListener("DOMContentLoaded", async () => {
        try {
          // Demo cart state
          let demoCart = [];

          await MeAgent.init({
            emailAddress: "colourjim+bosco@gmail.com",
            brandId: "demo-brand",
            userId: "0751b839-afc8-4ce1-bbfa-92e91a8d38a1",
            position: "bottom-right",
            environment: MeAgent.Environment.PROD,
            network: MeAgent.Network.SEPOLIA,
            devMode: true,
            // Optional cart callbacks
            onAddToCart: async (offer, variantId) => {
              console.log("Adding to cart:", offer, "variant:", variantId);
              demoCart.push({ offerCode: offer.offerCode, variantId });

              // Update SDK's cart state
              MeAgent.updateCartItems(demoCart);

              alert(`Added "${offer.name}" to cart!`);
            },
            onRemoveFromCart: async (offerCode, variantId) => {
              console.log(
                "Removing from cart:",
                offerCode,
                "variant:",
                variantId
              );
              demoCart = demoCart.filter(
                (item) =>
                  !(
                    item.offerCode === offerCode && item.variantId === variantId
                  )
              );

              // Update SDK's cart state
              MeAgent.updateCartItems(demoCart);

              alert("Removed from cart!");
            },
            cartItems: demoCart,
            // Optional social callbacks
            onShare: (offer) => {
              console.log("Share clicked:", offer);
              if (navigator.share) {
                navigator.share({
                  title: offer.name,
                  text: offer.description,
                  url: window.location.href,
                });
              } else {
                alert("Share: " + offer.name);
              }
            },
            onLikeUnlike: (offer, isLiked) => {
              console.log("Like/Unlike clicked:", offer, isLiked);

              // Update liked state (for demo purposes, using a simple object)
              if (!window.demoLikedOffers) {
                window.demoLikedOffers = {};
              }
              window.demoLikedOffers[offer.id] = isLiked;

              // Update SDK's liked state
              MeAgent.updateLikedOffers(window.demoLikedOffers);

              alert(`${isLiked ? "Liked" : "Unliked"}: ${offer.name}`);
            },
            likedOffers: {},
          });
          console.log("MeAgent SDK initialized successfully");
          console.log("Environment:", MeAgent.Environment.DEV);
          console.log("Network:", MeAgent.Network.SEPOLIA);

          // Add event listeners for programmatic control buttons
          document
            .getElementById("openChatBtn")
            ?.addEventListener("click", () => {
              MeAgent.open();
            });

          document
            .getElementById("closeChatBtn")
            ?.addEventListener("click", () => {
              MeAgent.close();
            });

          document
            .getElementById("toggleChatBtn")
            ?.addEventListener("click", () => {
              MeAgent.toggle();
            });
        } catch (error) {
          console.error("Failed to initialize MeAgent SDK:", error);
        }
      });
    </script>
  </body>
</html>
